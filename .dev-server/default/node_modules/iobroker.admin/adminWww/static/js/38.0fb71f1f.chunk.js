/*! For license information please see 38.0fb71f1f.chunk.js.LICENSE.txt */
(self.webpackChunksrc_rx=self.webpackChunksrc_rx||[]).push([[38],{4526:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});const o=(0,i(15719).A)()},62172:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});i(29183);var o=i(68334),r=i(4526),n=i(99947);function s(){const e=(0,o.A)(r.A);return e[n.A]||e}},68334:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var o=i(8867),r=i(46096);const n=(0,o.A)();const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;return(0,r.A)(e)}},67186:function(e){e.exports=function(){"use strict";function e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function t(t){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?e(Object(o),!0).forEach((function(e){c(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function i(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function o(e){var t=i(e,"string");return"symbol"==typeof t?t:t+""}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function a(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,i){return(t=o(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function h(e){return l(e)||u(e)||d(e)||p()}function l(e){if(Array.isArray(e))return m(e)}function u(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e,t){if(e){if("string"===typeof e)return m(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f="undefined"!==typeof window&&"undefined"!==typeof window.document,g=f?window:{},b=!(!f||!g.document.documentElement)&&"ontouchstart"in g.document.documentElement,v=!!f&&"PointerEvent"in g,y="cropper",w="all",x="crop",k="move",C="zoom",S="e",T="w",E="s",_="n",O="ne",M="nw",D="se",R="sw",A="".concat(y,"-crop"),N="".concat(y,"-disabled"),I="".concat(y,"-hidden"),L="".concat(y,"-hide"),j="".concat(y,"-invisible"),H="".concat(y,"-modal"),P="".concat(y,"-move"),q="".concat(y,"Action"),$="".concat(y,"Preview"),B="crop",z="move",W="none",U="crop",F="cropend",Y="cropmove",X="cropstart",K="dblclick",V=b?"touchstart":"mousedown",G=b?"touchmove":"mousemove",J=b?"touchend touchcancel":"mouseup",Z=v?"pointerdown":V,Q=v?"pointermove":G,ee=v?"pointerup pointercancel":J,te="ready",ie="resize",oe="wheel",re="zoom",ne="image/jpeg",se=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ae=/^data:/,ce=/^data:image\/jpeg;base64,/,he=/^img|canvas$/i,le=200,ue=100,de={viewMode:0,dragMode:B,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:le,minContainerHeight:ue,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},me='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',pe=Number.isNaN||g.isNaN;function fe(e){return"number"===typeof e&&!pe(e)}var ge=function(e){return e>0&&e<1/0};function be(e){return"undefined"===typeof e}function ve(e){return"object"===r(e)&&null!==e}var ye=Object.prototype.hasOwnProperty;function we(e){if(!ve(e))return!1;try{var t=e.constructor,i=t.prototype;return t&&i&&ye.call(i,"isPrototypeOf")}catch(o){return!1}}function xe(e){return"function"===typeof e}var ke=Array.prototype.slice;function Ce(e){return Array.from?Array.from(e):ke.call(e)}function Se(e,t){return e&&xe(t)&&(Array.isArray(e)||fe(e.length)?Ce(e).forEach((function(i,o){t.call(e,i,o,e)})):ve(e)&&Object.keys(e).forEach((function(i){t.call(e,e[i],i,e)}))),e}var Te=Object.assign||function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return ve(e)&&i.length>0&&i.forEach((function(t){ve(t)&&Object.keys(t).forEach((function(i){e[i]=t[i]}))})),e},Ee=/\.\d*(?:0|9){12}\d*$/;function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Ee.test(e)?Math.round(e*t)/t:e}var Oe=/^width|height|left|top|marginLeft|marginTop$/;function Me(e,t){var i=e.style;Se(t,(function(e,t){Oe.test(t)&&fe(e)&&(e="".concat(e,"px")),i[t]=e}))}function De(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function Re(e,t){if(t)if(fe(e.length))Se(e,(function(e){Re(e,t)}));else if(e.classList)e.classList.add(t);else{var i=e.className.trim();i?i.indexOf(t)<0&&(e.className="".concat(i," ").concat(t)):e.className=t}}function Ae(e,t){t&&(fe(e.length)?Se(e,(function(e){Ae(e,t)})):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function Ne(e,t,i){t&&(fe(e.length)?Se(e,(function(e){Ne(e,t,i)})):i?Re(e,t):Ae(e,t))}var Ie=/([a-z\d])([A-Z])/g;function Le(e){return e.replace(Ie,"$1-$2").toLowerCase()}function je(e,t){return ve(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(Le(t)))}function He(e,t,i){ve(i)?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-".concat(Le(t)),i)}function Pe(e,t){if(ve(e[t]))try{delete e[t]}catch(i){e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch(i){e.dataset[t]=void 0}else e.removeAttribute("data-".concat(Le(t)))}var qe=/\s\s*/,$e=function(){var e=!1;if(f){var t=!1,i=function(){},o=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});g.addEventListener("test",i,o),g.removeEventListener("test",i,o)}return e}();function Be(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i;t.trim().split(qe).forEach((function(t){if(!$e){var n=e.listeners;n&&n[t]&&n[t][i]&&(r=n[t][i],delete n[t][i],0===Object.keys(n[t]).length&&delete n[t],0===Object.keys(n).length&&delete e.listeners)}e.removeEventListener(t,r,o)}))}function ze(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i;t.trim().split(qe).forEach((function(t){if(o.once&&!$e){var n=e.listeners,s=void 0===n?{}:n;r=function(){delete s[t][i],e.removeEventListener(t,r,o);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];i.apply(e,a)},s[t]||(s[t]={}),s[t][i]&&e.removeEventListener(t,s[t][i],o),s[t][i]=r,e.listeners=s}e.addEventListener(t,r,o)}))}function We(e,t,i){var o;return xe(Event)&&xe(CustomEvent)?o=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(o=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i),e.dispatchEvent(o)}function Ue(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Fe=g.location,Ye=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Xe(e){var t=e.match(Ye);return null!==t&&(t[1]!==Fe.protocol||t[2]!==Fe.hostname||t[3]!==Fe.port)}function Ke(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function Ve(e){var t=e.rotate,i=e.scaleX,o=e.scaleY,r=e.translateX,n=e.translateY,s=[];fe(r)&&0!==r&&s.push("translateX(".concat(r,"px)")),fe(n)&&0!==n&&s.push("translateY(".concat(n,"px)")),fe(t)&&0!==t&&s.push("rotate(".concat(t,"deg)")),fe(i)&&1!==i&&s.push("scaleX(".concat(i,")")),fe(o)&&1!==o&&s.push("scaleY(".concat(o,")"));var a=s.length?s.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function Ge(e){var i=t({},e),o=0;return Se(e,(function(e,t){delete i[t],Se(i,(function(t){var i=Math.abs(e.startX-t.startX),r=Math.abs(e.startY-t.startY),n=Math.abs(e.endX-t.endX),s=Math.abs(e.endY-t.endY),a=Math.sqrt(i*i+r*r),c=(Math.sqrt(n*n+s*s)-a)/a;Math.abs(c)>Math.abs(o)&&(o=c)}))})),o}function Je(e,i){var o=e.pageX,r=e.pageY,n={endX:o,endY:r};return i?n:t({startX:o,startY:r},n)}function Ze(e){var t=0,i=0,o=0;return Se(e,(function(e){var r=e.startX,n=e.startY;t+=r,i+=n,o+=1})),{pageX:t/=o,pageY:i/=o}}function Qe(e){var t=e.aspectRatio,i=e.height,o=e.width,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",n=ge(o),s=ge(i);if(n&&s){var a=i*t;"contain"===r&&a>o||"cover"===r&&a<o?i=o/t:o=i*t}else n?i=o/t:s&&(o=i*t);return{width:o,height:i}}function et(e){var t=e.width,i=e.height,o=e.degree;if(90===(o=Math.abs(o)%180))return{width:i,height:t};var r=o%90*Math.PI/180,n=Math.sin(r),s=Math.cos(r),a=t*s+i*n,c=t*n+i*s;return o>90?{width:c,height:a}:{width:a,height:c}}function tt(e,t,i,o){var r=t.aspectRatio,n=t.naturalWidth,s=t.naturalHeight,a=t.rotate,c=void 0===a?0:a,l=t.scaleX,u=void 0===l?1:l,d=t.scaleY,m=void 0===d?1:d,p=i.aspectRatio,f=i.naturalWidth,g=i.naturalHeight,b=o.fillColor,v=void 0===b?"transparent":b,y=o.imageSmoothingEnabled,w=void 0===y||y,x=o.imageSmoothingQuality,k=void 0===x?"low":x,C=o.maxWidth,S=void 0===C?1/0:C,T=o.maxHeight,E=void 0===T?1/0:T,_=o.minWidth,O=void 0===_?0:_,M=o.minHeight,D=void 0===M?0:M,R=document.createElement("canvas"),A=R.getContext("2d"),N=Qe({aspectRatio:p,width:S,height:E}),I=Qe({aspectRatio:p,width:O,height:D},"cover"),L=Math.min(N.width,Math.max(I.width,f)),j=Math.min(N.height,Math.max(I.height,g)),H=Qe({aspectRatio:r,width:S,height:E}),P=Qe({aspectRatio:r,width:O,height:D},"cover"),q=Math.min(H.width,Math.max(P.width,n)),$=Math.min(H.height,Math.max(P.height,s)),B=[-q/2,-$/2,q,$];return R.width=_e(L),R.height=_e(j),A.fillStyle=v,A.fillRect(0,0,L,j),A.save(),A.translate(L/2,j/2),A.rotate(c*Math.PI/180),A.scale(u,m),A.imageSmoothingEnabled=w,A.imageSmoothingQuality=k,A.drawImage.apply(A,[e].concat(h(B.map((function(e){return Math.floor(_e(e))}))))),A.restore(),R}var it=String.fromCharCode;function ot(e,t,i){var o="";i+=t;for(var r=t;r<i;r+=1)o+=it(e.getUint8(r));return o}var rt=/^data:.*,/;function nt(e){var t=e.replace(rt,""),i=atob(t),o=new ArrayBuffer(i.length),r=new Uint8Array(o);return Se(r,(function(e,t){r[t]=i.charCodeAt(t)})),o}function st(e,t){for(var i=[],o=8192,r=new Uint8Array(e);r.length>0;)i.push(it.apply(null,Ce(r.subarray(0,o)))),r=r.subarray(o);return"data:".concat(t,";base64,").concat(btoa(i.join("")))}function at(e){var t,i=new DataView(e);try{var o,r,n;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var s=i.byteLength,a=2;a+1<s;){if(255===i.getUint8(a)&&225===i.getUint8(a+1)){r=a;break}a+=1}if(r){var c=r+10;if("Exif"===ot(i,r+4,4)){var h=i.getUint16(c);if(((o=18761===h)||19789===h)&&42===i.getUint16(c+2,o)){var l=i.getUint32(c+4,o);l>=8&&(n=c+l)}}}if(n){var u,d,m=i.getUint16(n,o);for(d=0;d<m;d+=1)if(u=n+12*d+2,274===i.getUint16(u,o)){u+=8,t=i.getUint16(u,o),i.setUint16(u,1,o);break}}}catch(p){t=1}return t}function ct(e){var t=0,i=1,o=1;switch(e){case 2:i=-1;break;case 3:t=-180;break;case 4:o=-1;break;case 5:t=90,o=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90}return{rotate:t,scaleX:i,scaleY:o}}var ht={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,i=this.container,o=this.cropper,r=Number(t.minContainerWidth),n=Number(t.minContainerHeight);Re(o,I),Ae(e,I);var s={width:Math.max(i.offsetWidth,r>=0?r:le),height:Math.max(i.offsetHeight,n>=0?n:ue)};this.containerData=s,Me(o,{width:s.width,height:s.height}),Re(e,I),Ae(o,I)},initCanvas:function(){var e=this.containerData,t=this.imageData,i=this.options.viewMode,o=Math.abs(t.rotate)%180===90,r=o?t.naturalHeight:t.naturalWidth,n=o?t.naturalWidth:t.naturalHeight,s=r/n,a=e.width,c=e.height;e.height*s>e.width?3===i?a=e.height*s:c=e.width/s:3===i?c=e.width/s:a=e.height*s;var h={aspectRatio:s,naturalWidth:r,naturalHeight:n,width:a,height:c};this.canvasData=h,this.limited=1===i||2===i,this.limitCanvas(!0,!0),h.width=Math.min(Math.max(h.width,h.minWidth),h.maxWidth),h.height=Math.min(Math.max(h.height,h.minHeight),h.maxHeight),h.left=(e.width-h.width)/2,h.top=(e.height-h.height)/2,h.oldLeft=h.left,h.oldTop=h.top,this.initialCanvasData=Te({},h)},limitCanvas:function(e,t){var i=this.options,o=this.containerData,r=this.canvasData,n=this.cropBoxData,s=i.viewMode,a=r.aspectRatio,c=this.cropped&&n;if(e){var h=Number(i.minCanvasWidth)||0,l=Number(i.minCanvasHeight)||0;s>1?(h=Math.max(h,o.width),l=Math.max(l,o.height),3===s&&(l*a>h?h=l*a:l=h/a)):s>0&&(h?h=Math.max(h,c?n.width:0):l?l=Math.max(l,c?n.height:0):c&&(h=n.width,(l=n.height)*a>h?h=l*a:l=h/a));var u=Qe({aspectRatio:a,width:h,height:l});h=u.width,l=u.height,r.minWidth=h,r.minHeight=l,r.maxWidth=1/0,r.maxHeight=1/0}if(t)if(s>(c?0:1)){var d=o.width-r.width,m=o.height-r.height;r.minLeft=Math.min(0,d),r.minTop=Math.min(0,m),r.maxLeft=Math.max(0,d),r.maxTop=Math.max(0,m),c&&this.limited&&(r.minLeft=Math.min(n.left,n.left+(n.width-r.width)),r.minTop=Math.min(n.top,n.top+(n.height-r.height)),r.maxLeft=n.left,r.maxTop=n.top,2===s&&(r.width>=o.width&&(r.minLeft=Math.min(0,d),r.maxLeft=Math.max(0,d)),r.height>=o.height&&(r.minTop=Math.min(0,m),r.maxTop=Math.max(0,m))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=o.width,r.maxTop=o.height},renderCanvas:function(e,t){var i=this.canvasData,o=this.imageData;if(t){var r=et({width:o.naturalWidth*Math.abs(o.scaleX||1),height:o.naturalHeight*Math.abs(o.scaleY||1),degree:o.rotate||0}),n=r.width,s=r.height,a=i.width*(n/i.naturalWidth),c=i.height*(s/i.naturalHeight);i.left-=(a-i.width)/2,i.top-=(c-i.height)/2,i.width=a,i.height=c,i.aspectRatio=n/s,i.naturalWidth=n,i.naturalHeight=s,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,Me(this.canvas,Te({width:i.width,height:i.height},Ve({translateX:i.left,translateY:i.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,i=this.imageData,o=i.naturalWidth*(t.width/t.naturalWidth),r=i.naturalHeight*(t.height/t.naturalHeight);Te(i,{width:o,height:r,left:(t.width-o)/2,top:(t.height-r)/2}),Me(this.image,Te({width:i.width,height:i.height},Ve(Te({translateX:i.left,translateY:i.top},i)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,i=e.aspectRatio||e.initialAspectRatio,o=Number(e.autoCropArea)||.8,r={width:t.width,height:t.height};i&&(t.height*i>t.width?r.height=r.width/i:r.width=r.height*i),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*o),r.height=Math.max(r.minHeight,r.height*o),r.left=t.left+(t.width-r.width)/2,r.top=t.top+(t.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=Te({},r)},limitCropBox:function(e,t){var i=this.options,o=this.containerData,r=this.canvasData,n=this.cropBoxData,s=this.limited,a=i.aspectRatio;if(e){var c=Number(i.minCropBoxWidth)||0,h=Number(i.minCropBoxHeight)||0,l=s?Math.min(o.width,r.width,r.width+r.left,o.width-r.left):o.width,u=s?Math.min(o.height,r.height,r.height+r.top,o.height-r.top):o.height;c=Math.min(c,o.width),h=Math.min(h,o.height),a&&(c&&h?h*a>c?h=c/a:c=h*a:c?h=c/a:h&&(c=h*a),u*a>l?u=l/a:l=u*a),n.minWidth=Math.min(c,l),n.minHeight=Math.min(h,u),n.maxWidth=l,n.maxHeight=u}t&&(s?(n.minLeft=Math.max(0,r.left),n.minTop=Math.max(0,r.top),n.maxLeft=Math.min(o.width,r.left+r.width)-n.width,n.maxTop=Math.min(o.height,r.top+r.height)-n.height):(n.minLeft=0,n.minTop=0,n.maxLeft=o.width-n.width,n.maxTop=o.height-n.height))},renderCropBox:function(){var e=this.options,t=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,e.movable&&e.cropBoxMovable&&He(this.face,q,i.width>=t.width&&i.height>=t.height?k:w),Me(this.cropBox,Te({width:i.width,height:i.height},Ve({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),We(this.element,U,this.getData())}},lt={initPreview:function(){var e=this.element,t=this.crossOrigin,i=this.options.preview,o=t?this.crossOriginUrl:this.url,r=e.alt||"The image to preview",n=document.createElement("img");if(t&&(n.crossOrigin=t),n.src=o,n.alt=r,this.viewBox.appendChild(n),this.viewBoxImage=n,i){var s=i;"string"===typeof i?s=e.ownerDocument.querySelectorAll(i):i.querySelector&&(s=[i]),this.previews=s,Se(s,(function(e){var i=document.createElement("img");He(e,$,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(i.crossOrigin=t),i.src=o,i.alt=r,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(i)}))}},resetPreview:function(){Se(this.previews,(function(e){var t=je(e,$);Me(e,{width:t.width,height:t.height}),e.innerHTML=t.html,Pe(e,$)}))},preview:function(){var e=this.imageData,t=this.canvasData,i=this.cropBoxData,o=i.width,r=i.height,n=e.width,s=e.height,a=i.left-t.left-e.left,c=i.top-t.top-e.top;this.cropped&&!this.disabled&&(Me(this.viewBoxImage,Te({width:n,height:s},Ve(Te({translateX:-a,translateY:-c},e)))),Se(this.previews,(function(t){var i=je(t,$),h=i.width,l=i.height,u=h,d=l,m=1;o&&(d=r*(m=h/o)),r&&d>l&&(u=o*(m=l/r),d=l),Me(t,{width:u,height:d}),Me(t.getElementsByTagName("img")[0],Te({width:n*m,height:s*m},Ve(Te({translateX:-a*m,translateY:-c*m},e))))})))}},ut={bind:function(){var e=this.element,t=this.options,i=this.cropper;xe(t.cropstart)&&ze(e,X,t.cropstart),xe(t.cropmove)&&ze(e,Y,t.cropmove),xe(t.cropend)&&ze(e,F,t.cropend),xe(t.crop)&&ze(e,U,t.crop),xe(t.zoom)&&ze(e,re,t.zoom),ze(i,Z,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&ze(i,oe,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&ze(i,K,this.onDblclick=this.dblclick.bind(this)),ze(e.ownerDocument,Q,this.onCropMove=this.cropMove.bind(this)),ze(e.ownerDocument,ee,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&ze(window,ie,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,i=this.cropper;xe(t.cropstart)&&Be(e,X,t.cropstart),xe(t.cropmove)&&Be(e,Y,t.cropmove),xe(t.cropend)&&Be(e,F,t.cropend),xe(t.crop)&&Be(e,U,t.crop),xe(t.zoom)&&Be(e,re,t.zoom),Be(i,Z,this.onCropStart),t.zoomable&&t.zoomOnWheel&&Be(i,oe,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Be(i,K,this.onDblclick),Be(e.ownerDocument,Q,this.onCropMove),Be(e.ownerDocument,ee,this.onCropEnd),t.responsive&&Be(window,ie,this.onResize)}},dt={resize:function(){if(!this.disabled){var e,t,i=this.options,o=this.container,r=this.containerData,n=o.offsetWidth/r.width,s=o.offsetHeight/r.height,a=Math.abs(n-1)>Math.abs(s-1)?n:s;1!==a&&(i.restore&&(e=this.getCanvasData(),t=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(Se(e,(function(t,i){e[i]=t*a}))),this.setCropBoxData(Se(t,(function(e,i){t[i]=e*a})))))}},dblclick:function(){this.disabled||this.options.dragMode===W||this.setDragMode(De(this.dragBox,A)?z:B)},wheel:function(e){var t=this,i=Number(this.options.wheelZoomRatio)||.1,o=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){t.wheeling=!1}),50),e.deltaY?o=e.deltaY>0?1:-1:e.wheelDelta?o=-e.wheelDelta/120:e.detail&&(o=e.detail>0?1:-1),this.zoom(-o*i,e)))},cropStart:function(e){var t=e.buttons,i=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(fe(t)&&1!==t||fe(i)&&0!==i||e.ctrlKey))){var o,r=this.options,n=this.pointers;e.changedTouches?Se(e.changedTouches,(function(e){n[e.identifier]=Je(e)})):n[e.pointerId||0]=Je(e),o=Object.keys(n).length>1&&r.zoomable&&r.zoomOnTouch?C:je(e.target,q),se.test(o)&&!1!==We(this.element,X,{originalEvent:e,action:o})&&(e.preventDefault(),this.action=o,this.cropping=!1,o===x&&(this.cropping=!0,Re(this.dragBox,H)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var i=this.pointers;e.preventDefault(),!1!==We(this.element,Y,{originalEvent:e,action:t})&&(e.changedTouches?Se(e.changedTouches,(function(e){Te(i[e.identifier]||{},Je(e,!0))})):Te(i[e.pointerId||0]||{},Je(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,i=this.pointers;e.changedTouches?Se(e.changedTouches,(function(e){delete i[e.identifier]})):delete i[e.pointerId||0],t&&(e.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Ne(this.dragBox,H,this.cropped&&this.options.modal)),We(this.element,F,{originalEvent:e,action:t}))}}},mt={change:function(e){var t,i=this.options,o=this.canvasData,r=this.containerData,n=this.cropBoxData,s=this.pointers,a=this.action,c=i.aspectRatio,h=n.left,l=n.top,u=n.width,d=n.height,m=h+u,p=l+d,f=0,g=0,b=r.width,v=r.height,y=!0;!c&&e.shiftKey&&(c=u&&d?u/d:1),this.limited&&(f=n.minLeft,g=n.minTop,b=f+Math.min(r.width,o.width,o.left+o.width),v=g+Math.min(r.height,o.height,o.top+o.height));var A=s[Object.keys(s)[0]],N={x:A.endX-A.startX,y:A.endY-A.startY},L=function(e){switch(e){case S:m+N.x>b&&(N.x=b-m);break;case T:h+N.x<f&&(N.x=f-h);break;case _:l+N.y<g&&(N.y=g-l);break;case E:p+N.y>v&&(N.y=v-p)}};switch(a){case w:h+=N.x,l+=N.y;break;case S:if(N.x>=0&&(m>=b||c&&(l<=g||p>=v))){y=!1;break}L(S),(u+=N.x)<0&&(a=T,h-=u=-u),c&&(d=u/c,l+=(n.height-d)/2);break;case _:if(N.y<=0&&(l<=g||c&&(h<=f||m>=b))){y=!1;break}L(_),d-=N.y,l+=N.y,d<0&&(a=E,l-=d=-d),c&&(u=d*c,h+=(n.width-u)/2);break;case T:if(N.x<=0&&(h<=f||c&&(l<=g||p>=v))){y=!1;break}L(T),u-=N.x,h+=N.x,u<0&&(a=S,h-=u=-u),c&&(d=u/c,l+=(n.height-d)/2);break;case E:if(N.y>=0&&(p>=v||c&&(h<=f||m>=b))){y=!1;break}L(E),(d+=N.y)<0&&(a=_,l-=d=-d),c&&(u=d*c,h+=(n.width-u)/2);break;case O:if(c){if(N.y<=0&&(l<=g||m>=b)){y=!1;break}L(_),d-=N.y,l+=N.y,u=d*c}else L(_),L(S),N.x>=0?m<b?u+=N.x:N.y<=0&&l<=g&&(y=!1):u+=N.x,N.y<=0?l>g&&(d-=N.y,l+=N.y):(d-=N.y,l+=N.y);u<0&&d<0?(a=R,l-=d=-d,h-=u=-u):u<0?(a=M,h-=u=-u):d<0&&(a=D,l-=d=-d);break;case M:if(c){if(N.y<=0&&(l<=g||h<=f)){y=!1;break}L(_),d-=N.y,l+=N.y,u=d*c,h+=n.width-u}else L(_),L(T),N.x<=0?h>f?(u-=N.x,h+=N.x):N.y<=0&&l<=g&&(y=!1):(u-=N.x,h+=N.x),N.y<=0?l>g&&(d-=N.y,l+=N.y):(d-=N.y,l+=N.y);u<0&&d<0?(a=D,l-=d=-d,h-=u=-u):u<0?(a=O,h-=u=-u):d<0&&(a=R,l-=d=-d);break;case R:if(c){if(N.x<=0&&(h<=f||p>=v)){y=!1;break}L(T),u-=N.x,h+=N.x,d=u/c}else L(E),L(T),N.x<=0?h>f?(u-=N.x,h+=N.x):N.y>=0&&p>=v&&(y=!1):(u-=N.x,h+=N.x),N.y>=0?p<v&&(d+=N.y):d+=N.y;u<0&&d<0?(a=O,l-=d=-d,h-=u=-u):u<0?(a=D,h-=u=-u):d<0&&(a=M,l-=d=-d);break;case D:if(c){if(N.x>=0&&(m>=b||p>=v)){y=!1;break}L(S),d=(u+=N.x)/c}else L(E),L(S),N.x>=0?m<b?u+=N.x:N.y>=0&&p>=v&&(y=!1):u+=N.x,N.y>=0?p<v&&(d+=N.y):d+=N.y;u<0&&d<0?(a=M,l-=d=-d,h-=u=-u):u<0?(a=R,h-=u=-u):d<0&&(a=O,l-=d=-d);break;case k:this.move(N.x,N.y),y=!1;break;case C:this.zoom(Ge(s),e),y=!1;break;case x:if(!N.x||!N.y){y=!1;break}t=Ue(this.cropper),h=A.startX-t.left,l=A.startY-t.top,u=n.minWidth,d=n.minHeight,N.x>0?a=N.y>0?D:O:N.x<0&&(h-=u,a=N.y>0?R:M),N.y<0&&(l-=d),this.cropped||(Ae(this.cropBox,I),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}y&&(n.width=u,n.height=d,n.left=h,n.top=l,this.action=a,this.renderCropBox()),Se(s,(function(e){e.startX=e.endX,e.startY=e.endY}))}},pt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Re(this.dragBox,H),Ae(this.cropBox,I),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Te({},this.initialImageData),this.canvasData=Te({},this.initialCanvasData),this.cropBoxData=Te({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Te(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Ae(this.dragBox,H),Re(this.cropBox,I)),this},replace:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Se(this.previews,(function(t){t.getElementsByTagName("img")[0].src=e})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Ae(this.cropper,N)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Re(this.cropper,N)),this},destroy:function(){var e=this.element;return e[y]?(e[y]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.canvasData,o=i.left,r=i.top;return this.moveTo(be(e)?e:o+Number(e),be(t)?t:r+Number(t))},moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.canvasData,o=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(fe(e)&&(i.left=e,o=!0),fe(t)&&(i.top=t,o=!0),o&&this.renderCanvas(!0)),this},zoom:function(e,t){var i=this.canvasData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(i.width*e/i.naturalWidth,null,t)},zoomTo:function(e,t,i){var o=this.options,r=this.canvasData,n=r.width,s=r.height,a=r.naturalWidth,c=r.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&o.zoomable){var h=a*e,l=c*e;if(!1===We(this.element,re,{ratio:e,oldRatio:n/a,originalEvent:i}))return this;if(i){var u=this.pointers,d=Ue(this.cropper),m=u&&Object.keys(u).length?Ze(u):{pageX:i.pageX,pageY:i.pageY};r.left-=(h-n)*((m.pageX-d.left-r.left)/n),r.top-=(l-s)*((m.pageY-d.top-r.top)/s)}else we(t)&&fe(t.x)&&fe(t.y)?(r.left-=(h-n)*((t.x-r.left)/n),r.top-=(l-s)*((t.y-r.top)/s)):(r.left-=(h-n)/2,r.top-=(l-s)/2);r.width=h,r.height=l,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return fe(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,fe(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(fe(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.imageData,o=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(fe(e)&&(i.scaleX=e,o=!0),fe(t)&&(i.scaleY=t,o=!0),o&&this.renderCanvas(!0,!0)),this},getData:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,o=this.imageData,r=this.canvasData,n=this.cropBoxData;if(this.ready&&this.cropped){e={x:n.left-r.left,y:n.top-r.top,width:n.width,height:n.height};var s=o.width/o.naturalWidth;if(Se(e,(function(t,i){e[i]=t/s})),t){var a=Math.round(e.y+e.height),c=Math.round(e.x+e.width);e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=c-e.x,e.height=a-e.y}}else e={x:0,y:0,width:0,height:0};return i.rotatable&&(e.rotate=o.rotate||0),i.scalable&&(e.scaleX=o.scaleX||1,e.scaleY=o.scaleY||1),e},setData:function(e){var t=this.options,i=this.imageData,o=this.canvasData,r={};if(this.ready&&!this.disabled&&we(e)){var n=!1;t.rotatable&&fe(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,n=!0),t.scalable&&(fe(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,n=!0),fe(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,n=!0)),n&&this.renderCanvas(!0,!0);var s=i.width/i.naturalWidth;fe(e.x)&&(r.left=e.x*s+o.left),fe(e.y)&&(r.top=e.y*s+o.top),fe(e.width)&&(r.width=e.width*s),fe(e.height)&&(r.height=e.height*s),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?Te({},this.containerData):{}},getImageData:function(){return this.sized?Te({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&Se(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){t[i]=e[i]})),t},setCanvasData:function(e){var t=this.canvasData,i=t.aspectRatio;return this.ready&&!this.disabled&&we(e)&&(fe(e.left)&&(t.left=e.left),fe(e.top)&&(t.top=e.top),fe(e.width)?(t.width=e.width,t.height=e.width/i):fe(e.height)&&(t.height=e.height,t.width=e.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,i,o=this.cropBoxData,r=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&we(e)&&(fe(e.left)&&(o.left=e.left),fe(e.top)&&(o.top=e.top),fe(e.width)&&e.width!==o.width&&(t=!0,o.width=e.width),fe(e.height)&&e.height!==o.height&&(i=!0,o.height=e.height),r&&(t?o.height=o.width/r:i&&(o.width=o.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,i=tt(this.image,this.imageData,t,e);if(!this.cropped)return i;var o=this.getData(e.rounded),r=o.x,n=o.y,s=o.width,a=o.height,c=i.width/Math.floor(t.naturalWidth);1!==c&&(r*=c,n*=c,s*=c,a*=c);var l=s/a,u=Qe({aspectRatio:l,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),d=Qe({aspectRatio:l,width:e.minWidth||0,height:e.minHeight||0},"cover"),m=Qe({aspectRatio:l,width:e.width||(1!==c?i.width:s),height:e.height||(1!==c?i.height:a)}),p=m.width,f=m.height;p=Math.min(u.width,Math.max(d.width,p)),f=Math.min(u.height,Math.max(d.height,f));var g=document.createElement("canvas"),b=g.getContext("2d");g.width=_e(p),g.height=_e(f),b.fillStyle=e.fillColor||"transparent",b.fillRect(0,0,p,f);var v=e.imageSmoothingEnabled,y=void 0===v||v,w=e.imageSmoothingQuality;b.imageSmoothingEnabled=y,w&&(b.imageSmoothingQuality=w);var x,k,C,S,T,E,_=i.width,O=i.height,M=r,D=n;M<=-s||M>_?(M=0,x=0,C=0,T=0):M<=0?(C=-M,M=0,T=x=Math.min(_,s+M)):M<=_&&(C=0,T=x=Math.min(s,_-M)),x<=0||D<=-a||D>O?(D=0,k=0,S=0,E=0):D<=0?(S=-D,D=0,E=k=Math.min(O,a+D)):D<=O&&(S=0,E=k=Math.min(a,O-D));var R=[M,D,x,k];if(T>0&&E>0){var A=p/s;R.push(C*A,S*A,T*A,E*A)}return b.drawImage.apply(b,[i].concat(h(R.map((function(e){return Math.floor(_e(e))}))))),g},setAspectRatio:function(e){var t=this.options;return this.disabled||be(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,i=this.dragBox,o=this.face;if(this.ready&&!this.disabled){var r=e===B,n=t.movable&&e===z;e=r||n?e:W,t.dragMode=e,He(i,q,e),Ne(i,A,r),Ne(i,P,n),t.cropBoxMovable||(He(o,q,e),Ne(o,A,r),Ne(o,P,n))}return this}},ft=g.Cropper,gt=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,e),!t||!he.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=Te({},de,we(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return a(e,[{key:"init",value:function(){var e,t=this.element,i=t.tagName.toLowerCase();if(!t[y]){if(t[y]=this,"img"===i){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e)return;e=t.src}else"canvas"===i&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t=this;if(e){this.url=e,this.imageData={};var i=this.element,o=this.options;if(o.rotatable||o.scalable||(o.checkOrientation=!1),o.checkOrientation&&window.ArrayBuffer)if(ae.test(e))ce.test(e)?this.read(nt(e)):this.clone();else{var r=new XMLHttpRequest,n=this.clone.bind(this);this.reloading=!0,this.xhr=r,r.onabort=n,r.onerror=n,r.ontimeout=n,r.onprogress=function(){r.getResponseHeader("content-type")!==ne&&r.abort()},r.onload=function(){t.read(r.response)},r.onloadend=function(){t.reloading=!1,t.xhr=null},o.checkCrossOrigin&&Xe(e)&&i.crossOrigin&&(e=Ke(e)),r.open("GET",e,!0),r.responseType="arraybuffer",r.withCredentials="use-credentials"===i.crossOrigin,r.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,i=this.imageData,o=at(e),r=0,n=1,s=1;if(o>1){this.url=st(e,ne);var a=ct(o);r=a.rotate,n=a.scaleX,s=a.scaleY}t.rotatable&&(i.rotate=r),t.scalable&&(i.scaleX=n,i.scaleY=s),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,i=e.crossOrigin,o=t;this.options.checkCrossOrigin&&Xe(t)&&(i||(i="anonymous"),o=Ke(t)),this.crossOrigin=i,this.crossOriginUrl=o;var r=document.createElement("img");i&&(r.crossOrigin=i),r.src=o||t,r.alt=e.alt||"The image to crop",this.image=r,r.onload=this.start.bind(this),r.onerror=this.stop.bind(this),Re(r,L),e.parentNode.insertBefore(r,e.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var i=g.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(g.navigator.userAgent),o=function(t,i){Te(e.imageData,{naturalWidth:t,naturalHeight:i,aspectRatio:t/i}),e.initialImageData=Te({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(!t.naturalWidth||i){var r=document.createElement("img"),n=document.body||document.documentElement;this.sizingImage=r,r.onload=function(){o(r.width,r.height),i||n.removeChild(r)},r.src=t.src,i||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",n.appendChild(r))}else o(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,i=this.image,o=e.parentNode,r=document.createElement("div");r.innerHTML=me;var n=r.querySelector(".".concat(y,"-container")),s=n.querySelector(".".concat(y,"-canvas")),a=n.querySelector(".".concat(y,"-drag-box")),c=n.querySelector(".".concat(y,"-crop-box")),h=c.querySelector(".".concat(y,"-face"));this.container=o,this.cropper=n,this.canvas=s,this.dragBox=a,this.cropBox=c,this.viewBox=n.querySelector(".".concat(y,"-view-box")),this.face=h,s.appendChild(i),Re(e,I),o.insertBefore(n,e.nextSibling),Ae(i,L),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,Re(c,I),t.guides||Re(c.getElementsByClassName("".concat(y,"-dashed")),I),t.center||Re(c.getElementsByClassName("".concat(y,"-center")),I),t.background&&Re(n,"".concat(y,"-bg")),t.highlight||Re(h,j),t.cropBoxMovable&&(Re(h,P),He(h,q,w)),t.cropBoxResizable||(Re(c.getElementsByClassName("".concat(y,"-line")),I),Re(c.getElementsByClassName("".concat(y,"-point")),I)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),xe(t.ready)&&ze(e,te,t.ready,{once:!0}),We(e,te)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var e=this.cropper.parentNode;e&&e.removeChild(this.cropper),Ae(this.element,I)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ft,e}},{key:"setDefaults",value:function(e){Te(de,we(e)&&e)}}])}();return Te(gt.prototype,ht,lt,ut,dt,mt,pt),gt}()},35185:(e,t,i)=>{"use strict";i.d(t,{I:()=>u});var o=i(29183),r=i.n(o),n=i(67186),s=i.n(n),a=function(){return a=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)};function c(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(i[o[r]]=e[o[r]])}return i}var h=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],l={opacity:0,maxWidth:"100%"},u=r().forwardRef((function(e,t){var i=c(e,[]),n=i.dragMode,u=void 0===n?"crop":n,d=i.src,m=i.style,p=i.className,f=i.crossOrigin,g=i.scaleX,b=i.scaleY,v=i.enable,y=i.zoomTo,w=i.rotateTo,x=i.alt,k=void 0===x?"picture":x,C=i.ready,S=i.onInitialized,T=c(i,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),E={scaleY:b,scaleX:g,enable:v,zoomTo:y,rotateTo:w},_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=(0,o.useRef)(null);return r().useEffect((function(){e.forEach((function(e){e&&("function"==typeof e?e(i.current):e.current=i.current)}))}),[e]),i}(t,(0,o.useRef)(null));(0,o.useEffect)((function(){var e;(null===(e=_.current)||void 0===e?void 0:e.cropper)&&"number"==typeof y&&_.current.cropper.zoomTo(y)}),[i.zoomTo]),(0,o.useEffect)((function(){var e;(null===(e=_.current)||void 0===e?void 0:e.cropper)&&void 0!==d&&_.current.cropper.reset().clear().replace(d)}),[d]),(0,o.useEffect)((function(){if(null!==_.current){var e=new(s())(_.current,a(a({dragMode:u},T),{ready:function(e){null!==e.currentTarget&&function(e,t){void 0===t&&(t={});var i=t.enable,o=void 0===i||i,r=t.scaleX,n=void 0===r?1:r,s=t.scaleY,a=void 0===s?1:s,c=t.zoomTo,h=void 0===c?0:c,l=t.rotateTo;o?e.enable():e.disable(),e.scaleX(n),e.scaleY(a),void 0!==l&&e.rotateTo(l),h>0&&e.zoomTo(h)}(e.currentTarget.cropper,E),C&&C(e)}}));S&&S(e)}return function(){var e,t;null===(t=null===(e=_.current)||void 0===e?void 0:e.cropper)||void 0===t||t.destroy()}}),[_]);var O=function(e){return h.reduce((function(e,t){var i=e,o=t;return i[o],c(i,["symbol"==typeof o?o:o+""])}),e)}(a(a({},T),{crossOrigin:f,src:d,alt:k}));return r().createElement("div",{style:m,className:p},r().createElement("img",a({},O,{style:l,ref:_})))}))},4473:(e,t,i)=>{"use strict";function o(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}i.d(t,{A:()=>o})},68341:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var o=0;function r(e){return"__private_"+o+++"_"+e}},10235:(e,t,i)=>{"use strict";function o(e){return e?.rows.map((e=>e.value)).filter((e=>!!e))??[]}function r(e){return e?.startsWith("system.host.")||(e=`system.host.${e}`),e}function n(e){return e?.startsWith("system.host.")&&(e=e.substring(12)),e}function s(e){return new Promise((t=>{setTimeout(t,e)}))}function a(e){const t="*"===(e=(e||"").toString())[0],i="*"===e[e.length-1];return(t?"":"^")+(e=e.replace(/[-/\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*"))+(i?"":"$")}var c,h;i.d(t,{wz:()=>m,Ng:()=>d,Sr:()=>h,fq:()=>l,Gd:()=>c}),function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.OBJECTS_LOADED=2]="OBJECTS_LOADED",e[e.READY=3]="READY"}(c||(c={})),function(e){e.PERMISSION_ERROR="permissionError",e.NOT_CONNECTED="notConnectedError",e.TIMEOUT="timeout",e.NOT_ADMIN="Allowed only in admin",e.NOT_SUPPORTED="Not supported"}(h||(h={}));const l=h.PERMISSION_ERROR,u=(h.NOT_CONNECTED,["material","echarts","vis"]);class d{constructor(e){this.props=this.applyDefaultProps(e),this.waitForSocketLib().then((()=>this.startSocket())).catch((e=>{alert(`Socket connection could not be initialized: ${e}`)}))}applyDefaultProps(e){return{...e,protocol:e.protocol||window.location.protocol,host:e.host||window.location.hostname,port:e.port||("3000"===window.location.port?8081:window.location.port),ioTimeout:Math.max(e.ioTimeout||2e4,2e4),cmdTimeout:Math.max(e.cmdTimeout||5e3,5e3),admin5only:e.admin5only||!1,autoSubscribes:e.autoSubscribes??[],autoSubscribeLog:e.autoSubscribeLog??!1,doNotLoadACL:e.doNotLoadACL??!0,doNotLoadAllObjects:e.doNotLoadAllObjects??!0}}props;ignoreState="";connected=!1;subscribed=!1;firstConnect=!0;waitForRestart=!1;loaded=!1;simStates={};statesSubscribes={};filesSubscribes={};objectsSubscribes={};objects={};states={};acl=null;isSecure=!1;onReadyDone=!1;onConnectionHandlers=[];onLogHandlers=[];onCmdStdoutHandler;onCmdStderrHandler;onCmdExitHandler;onError(e){(this.props.onError??console.error)(e)}_socket;_waitForSocketPromise;_waitForFirstConnectionPromise=(()=>function(){let e,t;const i=new Promise(((i,o)=>{e=i,t=o}));return i.resolve=e,i.reject=t,i}())();_instanceSubscriptions={};_promises={};_authTimer;_systemConfig;get systemConfig(){return this._systemConfig}systemLang="en";static isWeb(){return void 0!==window.socketUrl}waitForSocketLib(){return this._waitForSocketPromise||(this._waitForSocketPromise=new Promise((async(e,t)=>{if("undefined"===typeof window.io&&"undefined"===typeof window.iob)if("function"===typeof window.registerSocketOnLoad)window.registerSocketOnLoad((()=>e()));else{for(let t=1;t<=30;t++){if(window.io||window.iob)return e();await s(100)}t(new Error("Socket library could not be loaded!"))}else e()}))),this._waitForSocketPromise}async startSocket(){if(this._socket)return;let e=this.props.host,t=this.props.port,i=(this.props.protocol||window.location.protocol).replace(":",""),o=window.location.pathname;if("iobroker.net"===window.location.hostname||"iobroker.pro"===window.location.hostname)o="";else{if(window.socketUrl){const o=new URL(window.socketUrl);e=o.hostname,t=o.port,i=o.protocol.replace(":","")}const r=o.lastIndexOf("/");if(-1!==r&&(o=o.substring(0,r+1)),d.isWeb()){const e=o.split("/");e.length>2&&(e.pop(),e.pop(),u.includes(e[e.length-1])&&e.pop(),o=e.join("/"),o.endsWith("/")||(o+="/"))}}const r=t?`${i}://${e}:${t}`:`${i}://${e}`;return this._socket=(window.io||window.iob).connect(r,{path:o.endsWith("/")?`${o}socket.io`:`${o}/socket.io`,query:"ws=true",name:this.props.name,timeout:this.props.ioTimeout,uuid:this.props.uuid,token:this.props.token}),this._socket.on("connect",(e=>{this.onReadyDone=!1,!0!==e?(this.connected=!0,setTimeout((()=>this.getVersion().then((e=>{const[t,i,o]=e.version.split(".");1e4*parseInt(t,10)+100*parseInt(i,10)+parseInt(o,10)<40102?(this._authTimer=null,this.onPreConnect(!1,!1)):this._socket.emit("authenticate",((e,t)=>this.onPreConnect(e,t)))})).catch((e=>this.onError({message:e.toString(),operation:"getVersion"})))),500)):this._socket.emit("authenticate",((e,t)=>{this.onPreConnect(e,t)}))})),this._socket.on("reconnect",(()=>{this.onReadyDone=!1,this.props.onProgress?.(c.READY),this.connected=!0,this.waitForRestart?window.location.reload():(this._subscribe(!0),this.onConnectionHandlers.forEach((e=>e(!0))))})),this._socket.on("disconnect",(()=>{this.onReadyDone=!1,this.connected=!1,this.subscribed=!1,this.props.onProgress?.(c.CONNECTING),this.onConnectionHandlers.forEach((e=>e(!1)))})),this._socket.on("reauthenticate",(()=>this.authenticate())),this._socket.on("log",(e=>{this.props.onLog?.(e),this.onLogHandlers.forEach((t=>t(e)))})),this._socket.on("error",(e=>{let t;void 0==e?t="":"function"===typeof e.toString?t=e.toString():(t=JSON.stringify(e),console.error(`Received strange error: ${t}`)),t.includes("User not authorized")?this.authenticate():t.includes("websocket error")?(console.error(`Socket Error => reload: ${e}`),window.location.reload()):console.error(`Socket Error: ${e}`)})),this._socket.on("connect_error",(e=>console.error(`Connect error: ${e}`))),this._socket.on("permissionError",(e=>this.onError({message:"no permission",operation:e.operation,type:e.type,id:e.id||""}))),this._socket.on("objectChange",((e,t)=>{setTimeout((()=>this.objectChange(e,t)),0)})),this._socket.on("stateChange",((e,t)=>{setTimeout((()=>this.stateChange(e,t)),0)})),this._socket.on("im",((e,t,i)=>{setTimeout((()=>this.instanceMessage(e,t,i)),0)})),this._socket.on("fileChange",((e,t,i)=>{setTimeout((()=>this.fileChange(e,t,i)),0)})),this._socket.on("cmdStdout",((e,t)=>{this.onCmdStdoutHandler?.(e,t)})),this._socket.on("cmdStderr",((e,t)=>{this.onCmdStderrHandler?.(e,t)})),this._socket.on("cmdExit",((e,t)=>{this.onCmdExitHandler?.(e,t)})),Promise.resolve()}onPreConnect(e,t){this._authTimer&&(clearTimeout(this._authTimer),this._authTimer=null),this.connected=!0,this.isSecure=t,this.waitForRestart?window.location.reload():(this.firstConnect?this.loadData().catch((e=>console.error(`Cannot load data: ${e}`))):this.props.onProgress?.(c.READY),this._subscribe(!0),this.onConnectionHandlers.forEach((e=>e(!0)))),this._waitForFirstConnectionPromise.resolve()}static isCloud(){return!(!window.location.hostname.includes("amazonaws.com")&&!window.location.hostname.includes("iobroker.in"))||"undefined"!==typeof window.socketUrl&&(window.socketUrl.includes("iobroker.in")||window.socketUrl.includes("amazonaws"))}isConnected(){return this.connected}waitForFirstConnection(){return this._waitForFirstConnectionPromise}async getUserPermissions(){return this.request({commandTimeout:!1,executor:(e,t)=>{this._socket.emit("getUserPermissions",((i,o)=>{i?t(i):e(o)}))}})}async loadData(){if(this.loaded)return;for(let e=1;e<=10;e++){if(this.doLoadData().catch((e=>console.error(`Cannot load data: ${e}`))),this.loaded)return;await s(d.isCloud()?5e3:1e3)}}async doLoadData(){if(!this.loaded){if(!this.props.doNotLoadACL)try{this.acl=await this.getUserPermissions()}catch(e){return void this.onError(`Cannot read user permissions: ${e}`)}try{!this.props.admin5only||d.isWeb()||window.vendorPrefix&&"@@vendorPrefix@@"!==window.vendorPrefix?this._systemConfig=await this.getSystemConfig():this._systemConfig=await this.getCompactSystemConfig()}catch(e){return void this.onError(`Cannot read system config: ${e}`)}this._systemConfig&&(this.systemLang=this._systemConfig.common?.language,this.systemLang||(this.systemLang=window.navigator.userLanguage||window.navigator.language,/^(en|de|ru|pt|nl|fr|it|es|pl|uk)-?/.test(this.systemLang)?this.systemLang=this.systemLang.substring(0,2):/^(en|de|ru|pt|nl|fr|it|es|pl|uk|zh-cn)$/.test(this.systemLang)||(this.systemLang="en"),this._systemConfig.common.language=this.systemLang)),this.props.onLanguage?.(this.systemLang),this.loaded=!0,this.props.onProgress?.(c.CONNECTED),this.firstConnect=!1,this.props.doNotLoadAllObjects?this.props.admin5only?this.objects={}:this.objects={"system.config":this._systemConfig}:this.objects=await this.getObjects(),this.props.onProgress?.(c.READY),this.onReadyDone||(this.onReadyDone=!0,this.props.onReady?.(this.objects))}}authenticate(){window.location.search.includes("&href=")?window.location.href=`${window.location.protocol}//${window.location.host}${window.location.pathname}${window.location.search}${window.location.hash}`:window.location.href=`${window.location.protocol}//${window.location.host}${window.location.pathname}?login&href=${window.location.search}${window.location.hash}`}async subscribeState(){let e,t,i,o;for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];if(3===n.length?[e,t,i]=n:([e,i]=n,t=!1),o=Array.isArray(e)?e:[e],"function"!==typeof i)throw new Error("The state change handler must be a function!");const c=[];for(let l=0;l<o.length;l++){const t=o[l];this.statesSubscribes[t]?!this.statesSubscribes[t].cbs.includes(i)&&this.statesSubscribes[t].cbs.push(i):(this.statesSubscribes[t]={reg:new RegExp(a(t)),cbs:[i]},e!==this.ignoreState&&c.push(t))}if(this.connected)if(c.length&&this._socket.emit("subscribe",c),t){let e;for(let t=0;t<o.length;t++){try{e=await this.getBinaryState(o[t])}catch(h){console.error(`Cannot getBinaryState "${o[t]}": ${JSON.stringify(h)}`),e=void 0}void 0!=e&&i(o[t],e)}}else if(o.find((e=>e.includes("*")))){let e;for(let t=0;t<o.length;t++){try{e=await this.getForeignStates(o[t])}catch(h){return void console.error(`Cannot getForeignStates "${o[t]}": ${JSON.stringify(h)}`)}if(e)for(const[t,o]of Object.entries(e)){const e=i(t,o);e instanceof Promise&&e.catch((e=>console.error(`Cannot call state change handler: ${e}`)))}}}else try{const e=await(d.isWeb()?this.getStates(o):this.getForeignStates(o));if(e)for(const[t,o]of Object.entries(e)){const e=i(t,o);e instanceof Promise&&e.catch((e=>console.error(`Cannot call state change handler: ${e}`)))}}catch(h){return void console.error(`Cannot getState "${o.join(", ")}": ${h.message}`)}}async subscribeStateAsync(e,t){return this.subscribeState(e,t)}unsubscribeState(e,t){let i;i=Array.isArray(e)?e:[e];const o=[];for(let r=0;r<i.length;r++){const e=i[r];if(this.statesSubscribes[e]){const i=this.statesSubscribes[e];if(t){const e=i.cbs.indexOf(t);-1!==e&&i.cbs.splice(e,1)}else i.cbs=[];i.cbs?.length||(delete this.statesSubscribes[e],e!==this.ignoreState&&o.push(e))}}this.connected&&o.length&&this._socket.emit("unsubscribe",i)}subscribeObject(e,t){let i;if(i=Array.isArray(e)?e:[e],"function"!==typeof t)throw new Error("The object change handler must be a function!");const o=[];for(let r=0;r<i.length;r++){const e=i[r];this.objectsSubscribes[e]?!this.objectsSubscribes[e].cbs.includes(t)&&this.objectsSubscribes[e].cbs.push(t):(this.objectsSubscribes[e]={reg:new RegExp(a(e)),cbs:[t]},o.push(e))}return this.connected&&o.length&&this._socket.emit("subscribeObjects",o),Promise.resolve()}unsubscribeObject(e,t){let i;i=Array.isArray(e)?e:[e];const o=[];for(let r=0;r<i.length;r++){const e=i[r];if(this.objectsSubscribes[e]){const i=this.objectsSubscribes[e];if(t){const e=i.cbs.indexOf(t);-1!==e&&i.cbs.splice(e,1)}else i.cbs=[];i.cbs?.length||(delete this.objectsSubscribes[e],o.push(e))}}return this.connected&&o.length&&this._socket.emit("unsubscribeObjects",o),Promise.resolve()}objectChange(e,t){let i;this.objects[e]&&(i={_id:e,type:this.objects[e].type});let o=!1;t?(t._rev&&this.objects[e]&&(this.objects[e]._rev=t._rev),this.objects[e]&&JSON.stringify(this.objects[e])===JSON.stringify(t)||(this.objects[e]=t,o=!0)):this.objects[e]&&(delete this.objects[e],o=!0);for(const[r,n]of Object.entries(this.objectsSubscribes))(r===e||n.reg.test(e))&&n.cbs.forEach((o=>{try{const r=o(e,t,i);r instanceof Promise&&r.catch((e=>console.error(`Cannot call object change handler: ${e}`)))}catch(r){console.error(`Error by callback of objectChange: ${r}`)}}));if(o){const i=this.props.onObjectChange?.(e,t);i instanceof Promise&&i.catch((e=>console.error(`Cannot call object change handler: ${e}`)))}}stateChange(e,t){for(const o of Object.values(this.statesSubscribes))if(o.reg.test(e))for(const r of o.cbs)try{const i=r(e,t??null);i instanceof Promise&&i.catch((e=>console.error(`Cannot call state change handler: ${e}`)))}catch(i){console.error(`Error by callback of stateChanged: ${i}`)}}instanceMessage(e,t,i){this._instanceSubscriptions[t]?.forEach((o=>{if(o.messageType===e){const r=o.callback(i,t,e);r instanceof Promise&&r.catch((e=>console.error(`Cannot call instance message handler: ${e}`)))}}))}fileChange(e,t,i){for(const r of Object.values(this.filesSubscribes))if(r.regId.test(e)&&r.regFilePattern.test(t))for(const n of r.cbs)try{n(e,t,i)}catch(o){console.error(`Error by callback of fileChange: ${o}`)}}async subscribeFiles(e,t,i){if("function"!==typeof i)throw new Error("The state change handler must be a function!");let o;o=Array.isArray(t)?t:[t];const r=[];for(let n=0;n<o.length;n++){const t=o[n],s=`${e}$%$${t}`;this.filesSubscribes[s]?!this.filesSubscribes[s].cbs.includes(i)&&this.filesSubscribes[s].cbs.push(i):(this.filesSubscribes[s]={regId:new RegExp(a(e)),regFilePattern:new RegExp(a(t)),cbs:[i]},r.push(t))}return this.connected&&r.length&&this._socket.emit("subscribeFiles",e,r),Promise.resolve()}unsubscribeFiles(e,t,i){let o;o=Array.isArray(t)?t:[t];const r=[];for(let n=0;n<o.length;n++){const t=o[n],s=`${e}$%$${t}`;if(this.filesSubscribes[s]){const e=this.filesSubscribes[s];if(i){const t=e.cbs.indexOf(i);-1!==t&&e.cbs.splice(t,1)}else e.cbs=[];e.cbs?.length||(delete this.filesSubscribes[s],r.push(t))}}this.connected&&r.length&&this._socket.emit("unsubscribeFiles",e,r)}async request(e){let{cacheKey:t,forceUpdate:i,commandTimeout:o,onTimeout:r,requireAdmin:n,requireFeatures:s,executor:a}=e;if(n&&d.isWeb())return Promise.reject(new Error(h.NOT_ADMIN));if(t&&!i&&t in this._promises)return this._promises[t];if(!this.connected)return Promise.reject(new Error(h.NOT_CONNECTED));if(s?.length)for(const l of s)if(!await this.checkFeatureSupported(l))throw new Error(h.NOT_SUPPORTED);const c=new Promise((async(e,i)=>{const n={elapsed:!1,clearTimeout:()=>{}};let s;!1!==o&&(s=setTimeout((()=>{n.elapsed=!0,r?.(),t&&this._promises[t]instanceof Promise&&delete this._promises[t],i(new Error(h.TIMEOUT))}),o??this.props.cmdTimeout),n.clearTimeout=()=>{clearTimeout(s)});try{await a(e,i,n)}catch(c){t&&this._promises[t]instanceof Promise&&delete this._promises[t],i(new Error(c.toString()))}}));return t&&(this._promises[t]=c),c}resetCache(e,t){t?Object.keys(this._promises).filter((t=>t.startsWith(e))).forEach((e=>{delete this._promises[e]})):delete this._promises[e]}getStates(e){return this.request({commandTimeout:!1,executor:(t,i)=>{this._socket.emit("getStates",e,((e,o)=>{this.states=o??{},e?i(e):t(this.states)}))}})}getState(e){return this.request({commandTimeout:!1,executor:(t,i)=>{e&&e===this.ignoreState?t(this.simStates[e]||{val:null,ack:!0}):this._socket.emit("getState",e,((e,o)=>{e?i(e):t(o)}))}})}getBinaryState(e){return this.request({commandTimeout:!1,executor:(t,i)=>{this._socket.emit("getBinaryState",e,((e,o)=>{e?i(e):t(o)}))}})}setBinaryState(e,t){return this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("setBinaryState",e,t,(e=>{e?o(e):i()}))}})}setState(e,t,i){return"boolean"===typeof i&&(t={val:t,ack:i}),this.request({commandTimeout:!1,executor:(o,r)=>{if(e&&e===this.ignoreState){let r;if(r="boolean"===typeof i||"object"===typeof t&&void 0!==t.val?t:{val:t,ack:!1,ts:Date.now(),lc:Date.now(),from:"system.adapter.vis.0"},this.simStates[e]=r,this.statesSubscribes[e])for(const t of this.statesSubscribes[e].cbs)try{const i=t(e,r);i instanceof Promise&&i.catch((e=>console.error(`Cannot call state change handler: ${e}`)))}catch(n){console.error(`Error by callback of stateChanged: ${n}`)}o()}else this._socket.emit("setState",e,t,(e=>{e?r(e):o()}))}})}getObjects(e,t){return this.request({commandTimeout:!1,executor:(i,o)=>{e||!this.objects?this._socket.emit(d.isWeb()?"getObjects":"getAllObjects",((e,r)=>{t||this.props.onProgress?.(c.OBJECTS_LOADED),e?o(e):(this.objects=r??{},i(this.objects))})):i(this.objects)}})}getObjectsById(e){return this.request({commandTimeout:!1,executor:(t,i)=>{this._socket.emit("getObjects",e,((e,o)=>{e?i(e):t(o)}))}})}_subscribe(e){if(e&&!this.subscribed){this.subscribed=!0,this.props.autoSubscribes?.length&&this._socket.emit("subscribeObjects",this.props.autoSubscribes);const e=Object.keys(this.objectsSubscribes);e.length&&this._socket.emit("subscribeObjects",e),Object.keys(this.objectsSubscribes).forEach((e=>this._socket.emit("subscribeObjects",e))),this.props.autoSubscribeLog&&this._socket.emit("requireLog",!0),Object.keys(this.statesSubscribes).forEach((e=>this._socket.emit("subscribe",e))),Object.keys(this.filesSubscribes).forEach((e=>{const[t,i]=e.split("$%$");this._socket.emit("subscribeFiles",t,i)}))}else if(!e&&this.subscribed){this.subscribed=!1,this.props.autoSubscribes?.length&&this._socket.emit("unsubscribeObjects",this.props.autoSubscribes);const e=Object.keys(this.objectsSubscribes);e.length&&this._socket.emit("unsubscribeObjects",e),this.props.autoSubscribeLog&&this._socket.emit("requireLog",!1),Object.keys(this.statesSubscribes).forEach((e=>this._socket.emit("unsubscribe",e))),Object.keys(this.filesSubscribes).forEach((e=>{const[t,i]=e.split("$%$");this._socket.emit("unsubscribeFiles",t,i)}))}}requireLog(e){return this.request({commandTimeout:!1,executor:(t,i)=>{this._socket.emit("requireLog",e,(e=>{e?i(e):t()}))}})}delObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("delObject",e,{maintenance:t},(e=>{e?o(e):i()}))}})}delObjects(e,t){return this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("delObjects",e,{maintenance:t},(e=>{e?o(e):i()}))}})}setObject(e,t){return t?(delete(t=JSON.parse(JSON.stringify(t))).from,delete t.user,delete t.ts,this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("setObject",e,t,(e=>{e?o(e):i()}))}})):Promise.reject(new Error("Null object is not allowed"))}getObject(e){return this.request({commandTimeout:!1,executor:(t,i)=>{e&&e===this.ignoreState?t({_id:this.ignoreState,type:"state",common:{name:"ignored state",type:"mixed"}}):this._socket.emit("getObject",e,((e,o)=>{e?i(e):t(o)}))}})}sendTo(e,t,i){return this.request({commandTimeout:!1,executor:o=>{this._socket.emit("sendTo",e,t,i,(e=>{o(e)}))}})}extendObject(e,t){return t?(delete(t=JSON.parse(JSON.stringify(t))).from,delete t.user,delete t.ts,this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("extendObject",e,t,(e=>{e?o(e):i()}))}})):Promise.reject(new Error("Null object is not allowed"))}registerLogHandler(e){this.onLogHandlers.includes(e)||this.onLogHandlers.push(e)}unregisterLogHandler(e){const t=this.onLogHandlers.indexOf(e);-1!==t&&this.onLogHandlers.splice(t,1)}registerConnectionHandler(e){this.onConnectionHandlers.includes(e)||this.onConnectionHandlers.push(e)}unregisterConnectionHandler(e){const t=this.onConnectionHandlers.indexOf(e);-1!==t&&this.onConnectionHandlers.splice(t,1)}registerCmdStdoutHandler(e){this.onCmdStdoutHandler=e}unregisterCmdStdoutHandler(){this.onCmdStdoutHandler=void 0}registerCmdStderrHandler(e){this.onCmdStderrHandler=e}unregisterCmdStderrHandler(){this.onCmdStderrHandler=void 0}registerCmdExitHandler(e){this.onCmdExitHandler=e}unregisterCmdExitHandler(){this.onCmdExitHandler=void 0}getEnums(e,t){return this.request({cacheKey:`enums_${e||"all"}`,forceUpdate:t,commandTimeout:!1,executor:(t,i)=>{this._socket.emit("getObjectView","system","enum",{startkey:`enum.${e||""}`,endkey:e?`enum.${e}.\u9999`:"enum.\u9999"},((o,r)=>{if(o)i(o);else{const i={};if(r)for(let t=0;t<r.rows.length;t++)e&&r.rows[t].id===`enum.${e}`||(i[r.rows[t].id]=r.rows[t].value);t(i)}}))}})}getObjectView(e,t,i){return this.getObjectViewCustom("system",i,e,t)}getObjectViewSystem(e,t,i){return this.getObjectViewCustom("system",e,t,i)}getObjectViewCustom(e,t,i,o){return this.request({commandTimeout:!1,executor:(r,n)=>{i=i||"",o=o||"\u9999",this._socket.emit("getObjectView",e,t,{startkey:i,endkey:o},((e,t)=>{if(e)n(e);else{const e={};if(t&&t.rows)for(let i=0;i<t.rows.length;i++)e[t.rows[i].id]=t.rows[i].value;r(e)}}))}})}readMetaItems(){return this.request({commandTimeout:!1,executor:(e,t)=>{this._socket.emit("getObjectView","system","meta",{startkey:"",endkey:"\u9999"},((i,o)=>{i?t(i):e(o.rows?.map((e=>e.value)).filter((e=>!!e)))}))}})}readDir(e,t){return this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("readDir",e,t,((e,t)=>{e?o(e):i(t)}))}})}readFile(e,t,i){return this.request({commandTimeout:!1,executor:(o,r)=>{this._socket.emit(i?"readFile64":"readFile",e,t,((e,t,i)=>{e?r(e):o({file:t,mimeType:i})}))}})}writeFile64(e,t,i){return this.request({commandTimeout:!1,executor:(o,r)=>{if("string"===typeof i)this._socket.emit("writeFile",e,t,i,(e=>{e?r(e):o()}));else{const n=btoa(new Uint8Array(i).reduce(((e,t)=>e+String.fromCharCode(t)),""));this._socket.emit("writeFile64",e,t,n,(e=>{e?r(e):o()}))}}})}deleteFile(e,t){return this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("deleteFile",e,t,(e=>{e?o(e):i()}))}})}deleteFolder(e,t){return this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("deleteFolder",e,t,(e=>{e?o(e):i()}))}})}rename(e,t,i){return this.request({commandTimeout:!1,executor:(o,r)=>{this._socket.emit("rename",e,t,i,(e=>{e?r(e):o()}))}})}renameFile(e,t,i){return this.request({commandTimeout:!1,executor:(o,r)=>{this._socket.emit("renameFile",e,t,i,(e=>{e?r(e):o()}))}})}cmdExec(e,t,i,o){return this.request({commandTimeout:o,executor:(o,n,s)=>{e=r(e),this._socket.emit("cmdExec",e,i,t,(e=>{s.elapsed||(s.clearTimeout(),e?n(e):o())}))}})}getSystemConfig(e){return this.request({cacheKey:"systemConfig",forceUpdate:e,commandTimeout:!1,executor:async e=>{let t=await this.getObject("system.config");t??={},t.common??={},t.native??={},e(t)}})}getCompactSystemConfig(e){return this.request({cacheKey:"systemConfigCommon",forceUpdate:e,commandTimeout:!1,requireAdmin:!0,executor:(e,t)=>{this._socket.emit("getCompactSystemConfig",((i,o)=>{i?t(i):(o??={},o.common??={},o.native??={},e(o))}))}})}getForeignStates(e){return this.request({commandTimeout:!1,executor:(t,i)=>{this._socket.emit("getForeignStates",e||"*",((e,o)=>{e?i(e):t(o??{})}))}})}getForeignObjects(e,t){return this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("getForeignObjects",e||"*",t,((e,t)=>{e?o(e):i(t)}))}})}setSystemConfig(e){return this.setObject("system.config",e)}getRawSocket(){return this._socket}getHistory(e,t){return this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("getHistory",e,t,((e,t)=>{e?o(e):i(t)}))}})}getHistoryEx(e,t){return this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("getHistory",e,t,((e,t,r,n)=>{e?o(e):i({values:t,sessionId:n,stepIgnore:r})}))}})}getIpAddresses(e,t){return e=r(e),this.request({cacheKey:`IPs_${e}`,forceUpdate:t,commandTimeout:!1,executor:async t=>{const i=await this.getObject(e);t(i?.common.address??[])}})}getVersion(e){return this.request({cacheKey:"version",forceUpdate:e,commandTimeout:!1,executor:(e,t)=>{this._socket.emit("getVersion",((i,o,r)=>{i&&!o&&"string"===typeof i&&i.match(/\d+\.\d+\.\d+/)?e({version:i,serverName:"socketio"}):i?t(i):e({version:o,serverName:r})}))}})}getWebServerName(){return this.request({cacheKey:"webName",commandTimeout:!1,executor:(e,t)=>{this._socket.emit("getAdapterName",((i,o)=>{i?t(i):e(o)}))}})}fileExists(e,t){return this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("fileExists",e,t,((e,t)=>{e?o(e):i(!!t)}))}})}getCurrentUser(){return this.request({commandTimeout:!1,executor:e=>{this._socket.emit("authEnabled",((t,i)=>{e(i)}))}})}getUuid(){return this.request({cacheKey:"uuid",commandTimeout:!1,executor:async e=>{const t=await this.getObject("system.meta.uuid");e(t?.native?.uuid)}})}checkFeatureSupported(e,t){return this.request({cacheKey:`supportedFeatures_${e}`,forceUpdate:t,commandTimeout:!1,executor:(t,i)=>{this._socket.emit("checkFeatureSupported",e,((e,o)=>{e?i(e):t(o)}))}})}getAdapterInstances(e,t){return"boolean"===typeof e&&(t=e,e=""),e=e||"",this.request({cacheKey:`instances_${e}`,forceUpdate:t,commandTimeout:!1,executor:async t=>{const i=e?`system.adapter.${e}.`:"system.adapter.",o=`${i}\u9999`,r=await this.getObjectViewSystem("instance",i,o),n=Object.values(r);t(e?n.filter((t=>t.common.name===e)):n)}})}getAdapters(e,t){return"boolean"===typeof e&&(t=e,e=""),e=e||"",this.request({cacheKey:`adapter_${e}`,forceUpdate:t,commandTimeout:!1,executor:async t=>{const i=await this.getObjectViewSystem("adapter",`system.adapter.${e||""}`,`system.adapter.${e||"\u9999"}`),o=Object.values(i);t(e?o.filter((t=>t.common.name===e)):o)}})}getGroups(e){return this.request({cacheKey:"groups",forceUpdate:e,commandTimeout:!1,executor:(e,t)=>{this._socket.emit("getObjectView","system","group",{startkey:"system.group.",endkey:"system.group.\u9999"},((i,r)=>{i?t(i):e(o(r))}))}})}logout(){return this.request({commandTimeout:!1,executor:(e,t)=>{this._socket.emit("logout",(i=>{i?t(i):e(null)}))}})}subscribeOnInstance(e,t,i,o){return this.request({commandTimeout:!1,executor:(r,n)=>{this._socket.emit("clientSubscribe",e,t,i,((i,s)=>{i?n(i):s&&(s.error?n(s.error):(e.startsWith("system.adapter.")||(e=`system.adapter.${e}`),this._instanceSubscriptions[e]=this._instanceSubscriptions[e]||[],this._instanceSubscriptions[e].find((e=>e.messageType===t&&e.callback===o))||this._instanceSubscriptions[e].push({messageType:t,callback:o}),r(s)))}))}})}unsubscribeFromInstance(e,t,i){let o;e.startsWith("system.adapter.")||(e=`system.adapter.${e}`);const r=[];do{o=!1;const n=this._instanceSubscriptions[e]?.findIndex((e=>(!t||e.messageType===t)&&(!i||e.callback===i)));if(void 0!==n&&null!==n&&-1!==n){o=!0;const i=this._instanceSubscriptions[e][n].messageType;this._instanceSubscriptions[e].splice(n,1),this._instanceSubscriptions[e].length||delete this._instanceSubscriptions[e];this._instanceSubscriptions[e]&&this._instanceSubscriptions[e].find((e=>e.messageType===i))||r.push(this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("clientUnsubscribe",e,t,((e,t)=>e?o(e):i(t)))}}))}}while(o&&(!i||!t));return r.length?Promise.all(r).then((e=>!!e.find((e=>e)))):Promise.resolve(!1)}log(e,t){return e?this.request({commandTimeout:!1,executor:i=>(this._socket.emit("log",e,t),i(null))}):Promise.resolve(null)}setStateToIgnore(e){this.ignoreState=e}}class m extends d{constructor(e){super(e)}request(e){return super.request({requireAdmin:!0,...e})}getCertificates(e){return this.request({cacheKey:"cert",forceUpdate:e,commandTimeout:!1,executor:async e=>{const t=await this.getObject("system.certificates");e(t?.native?.certificates?Object.entries(t.native.certificates).map((e=>{let[t,i]=e;return function(e,t){if(!t)return;let i;if(t.length<700&&(-1!==t.indexOf("/")||-1!==t.indexOf("\\")))if(e.toLowerCase().includes("private"))i="private";else if(t.toLowerCase().includes("private"))i="private";else if(e.toLowerCase().includes("public"))i="public";else if(t.toLowerCase().includes("public"))i="public";else if(e.toLowerCase().includes("chain"))i="chained";else{if(!t.toLowerCase().includes("chain"))return;i="chained"}else i="-----BEGIN RSA PRIVATE KEY"===t.substring(0,26)||"-----BEGIN PRIVATE KEY"===t.substring(0,22)?"private":"public","public"===i&&t.split("-----END CERTIFICATE-----").filter((e=>e.replace(/\r\n|\r|\n/,"").trim())).length>1&&(i="chained");return{name:e,type:i}}(t,i)})).filter((e=>!!e)):[])}})}getLogs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return this.request({commandTimeout:!1,executor:i=>{this._socket.emit("sendToHost",e,"getLogs",t||200,(e=>{i(e)}))}})}upgradeAdapterWithWebserver(e,t){return this.request({commandTimeout:!1,executor:i=>{this._socket.emit("sendToHost",e,"upgradeAdapterWithWebserver",t,(e=>{i(e)}))}})}upgradeController(e,t,i){return this.request({commandTimeout:!1,executor:(o,r)=>{this._socket.emit("sendToHost",e,"upgradeController",{version:t,adminInstance:i},(e=>{const t=e;t.error?r(t.error):o(t.result)}))}})}updateLicenses(e,t){return this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("updateLicenses",e,t,((e,t)=>{e?o(e):i(t)}))}})}upgradeOsPackages(e,t,i){return this.request({commandTimeout:!1,executor:o=>{this._socket.emit("sendToHost",e,"upgradeOsPackages",{packages:t,restart:!!i},(e=>{o(e)}))}})}getLogsFiles(e){return this.request({commandTimeout:!1,executor:(t,i)=>{this._socket.emit("readLogs",e,((e,o)=>{e&&i(e),t(o)}))}})}delLogs(e){return this.request({commandTimeout:!1,executor:(t,i)=>{this._socket.emit("sendToHost",e,"delLogs",null,(e=>{e&&i(e),t()}))}})}deleteFile(e,t){return this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("deleteFile",e,t,(e=>{e&&o(e),i()}))}})}deleteFolder(e,t){return this.request({commandTimeout:!1,executor:(i,o)=>{this._socket.emit("deleteFolder",e,t,(e=>{e&&o(e),i()}))}})}rename(e,t,i){return this.request({commandTimeout:!1,executor:(o,r)=>{this._socket.emit("rename",e,t,i,(e=>{e&&r(e),o()}))}})}renameFile(e,t,i){return this.request({commandTimeout:!1,executor:(o,r)=>{this._socket.emit("renameFile",e,t,i,(e=>{e&&r(e),o()}))}})}getHosts(e){return this.request({cacheKey:"hosts",forceUpdate:e,commandTimeout:!1,executor:(e,t)=>{this._socket.emit("getObjectView","system","host",{startkey:"system.host.",endkey:"system.host.\u9999"},((i,r)=>{i?t(i):e(o(r))}))}})}getUsers(e){return this.request({cacheKey:"users",forceUpdate:e,commandTimeout:!1,executor:(e,t)=>{this._socket.emit("getObjectView","system","user",{startkey:"system.user.",endkey:"system.user.\u9999"},((i,r)=>{i?t(i):e(o(r))}))}})}renameGroup(e,t,i){return this.request({commandTimeout:!1,executor:async o=>{const r=await this.getGroups(!0),n=r.filter((t=>t._id.startsWith(`${e}.`)));for(const i of n){const o=i._id,r=t+i._id.substring(e.length);i._id=r,await this.setObject(r,i),await this.delObject(o)}const s=r.find((t=>t._id===e));if(s){const e=s._id;s._id=t,void 0!==i&&(s.common??={},s.common.name=i),await this.setObject(t,s),await this.delObject(e)}o()}})}getHostInfo(e,t,i){return e=r(e),this.request({cacheKey:`hostInfo_${e}`,forceUpdate:t,commandTimeout:i,executor:(t,i,o)=>{this._socket.emit("sendToHost",e,"getHostInfo",null,(e=>{o.elapsed||(o.clearTimeout(),e===h.PERMISSION_ERROR?i('May not read "getHostInfo"'):e?t(e):i('Cannot read "getHostInfo"'))}))}})}getHostInfoShort(e,t,i){return e=r(e),this.request({cacheKey:`hostInfoShort_${e}`,forceUpdate:t,commandTimeout:i,executor:(t,i,o)=>{this._socket.emit("sendToHost",e,"getHostInfoShort",null,(e=>{o.elapsed||(o.clearTimeout(),e===h.PERMISSION_ERROR?i('May not read "getHostInfoShort"'):e?t(e):i('Cannot read "getHostInfoShort"'))}))}})}getRepository(e,t,i,o){return this.request({cacheKey:`repository_${e}`,forceUpdate:i,commandTimeout:o,executor:(i,o,r)=>{this._socket.emit("sendToHost",e,"getRepository",t,(e=>{r.elapsed||(r.clearTimeout(),e===h.PERMISSION_ERROR?o('May not read "getRepository"'):e?i(e):o('Cannot read "getRepository"'))}))}})}getInstalled(e,t,i){return e=r(e),this.request({cacheKey:`installed_${e}`,forceUpdate:t,commandTimeout:i,executor:(t,i,o)=>{this._socket.emit("sendToHost",e,"getInstalled",null,(e=>{o.elapsed||(o.clearTimeout(),e===h.PERMISSION_ERROR?i('May not read "getInstalled"'):e?t(e):i('Cannot read "getInstalled"'))}))}})}cmdExec(e,t,i,o){return this.request({commandTimeout:o,executor:(o,n,s)=>{e=r(e),this._socket.emit("cmdExec",e,i,t,(e=>{s.elapsed||(s.clearTimeout(),e&&n(e),o())}))}})}readBaseSettings(e){return e=n(e),this.request({requireFeatures:["CONTROLLER_READWRITE_BASE_SETTINGS"],executor:(t,i,o)=>{this._socket.emit("sendToHost",e,"readBaseSettings",null,(e=>{o.elapsed||(o.clearTimeout(),e===h.PERMISSION_ERROR?i('May not read "BaseSettings"'):e?e.error?i(new Error(e.error)):t(e):i('Cannot read "BaseSettings"'))}))}})}writeBaseSettings(e,t){return e=n(e),this.request({requireFeatures:["CONTROLLER_READWRITE_BASE_SETTINGS"],executor:(i,o,r)=>{this._socket.emit("sendToHost",e,"writeBaseSettings",t,(e=>{r.elapsed||(r.clearTimeout(),e===h.PERMISSION_ERROR?o('May not write "BaseSettings"'):e?i(e):o('Cannot write "BaseSettings"'))}))}})}restartController(e){return e=n(e),this.request({executor:(t,i,o)=>{this._socket.emit("sendToHost",e,"restartController",null,(()=>{o.elapsed||(o.clearTimeout(),t(!0))}))}})}getDiagData(e,t){return e=n(e),this.request({executor:(i,o,r)=>{this._socket.emit("sendToHost",e,"getDiagData",t,(e=>{r.elapsed||(r.clearTimeout(),i(e||null))}))}})}changePassword(e,t){return this.request({executor:(i,o,r)=>{this._socket.emit("changePassword",e,t,(e=>{r.elapsed||(r.clearTimeout(),e&&o(e),i())}))}})}getIpAddresses(e,t){return e=r(e),this.request({cacheKey:`IPs_${e}`,forceUpdate:t,commandTimeout:!1,executor:async t=>{const i=await this.getObject(e);t(i?.common.address??[])}})}getHostByIp(e,t){return e=n(e),this.request({cacheKey:`rIPs_${e}`,forceUpdate:t,executor:(t,i,o)=>{this._socket.emit("getHostByIp",e,((e,i)=>{if(o.elapsed)return;o.clearTimeout();const{IPs4:r,IPs6:n}=function(e){const t=[{name:"[IPv4] 0.0.0.0 - Listen on all IPs",address:"0.0.0.0",family:"ipv4"}],i=[{name:"[IPv6] :: - Listen on all IPs",address:"::",family:"ipv6"}];if(e.native?.hardware?.networkInterfaces)for(const[o,r]of Object.entries(e.native.hardware.networkInterfaces))if(r)for(const e of r)"IPv6"!==e.family?t.push({name:`[${e.family}] ${e.address} - ${o}`,address:e.address,family:"ipv4"}):i.push({name:`[${e.family}] ${e.address} - ${o}`,address:e.address,family:"ipv6"});return{IPs4:t,IPs6:i}}(i);t([...r,...n])}))}})}encrypt(e){return this.request({executor:(t,i,o)=>{this._socket.emit("encrypt",e,((e,r)=>{o.elapsed||(o.clearTimeout(),e&&i(e),t(r))}))}})}decrypt(e){return this.request({executor:(t,i,o)=>{this._socket.emit("decrypt",e,((e,r)=>{o.elapsed||(o.clearTimeout(),e&&i(e),t(r))}))}})}chmodFile(e,t,i){return this.request({executor:(o,r,n)=>{this._socket.emit("chmodFile",e,t,i,((e,t)=>{n.elapsed||(n.clearTimeout(),e&&r(e),o(t))}))}})}chownFile(e,t,i){return this.request({executor:(o,r,n)=>{this._socket.emit("chownFile",e,t,i,((e,t)=>{n.elapsed||(n.clearTimeout(),e&&r(e),o(t))}))}})}getNotifications(e,t){return this.request({executor:(i,o,r)=>{this._socket.emit("sendToHost",e,"getNotifications",{category:t},(e=>{r.elapsed||(r.clearTimeout(),i(e))}))}})}clearNotifications(e,t){return this.request({executor:(i,o,r)=>{this._socket.emit("sendToHost",e,"clearNotifications",{category:t},(e=>{r.elapsed||(r.clearTimeout(),i(e))}))}})}getIsEasyModeStrict(){return this.request({executor:(e,t,i)=>{this._socket.emit("getIsEasyModeStrict",((o,r)=>{i.elapsed||(i.clearTimeout(),o&&t(o),e(!!r))}))}})}getEasyMode(){return this.request({executor:(e,t,i)=>{this._socket.emit("getEasyMode",((o,r)=>{i.elapsed||(i.clearTimeout(),o?t(new Error(o)):e(r))}))}})}getRatings(e){return this.request({executor:(t,i,o)=>{this._socket.emit("getRatings",!!e,((e,r)=>{o.elapsed||(o.clearTimeout(),e?i(new Error(e)):t(r))}))}})}getCurrentSession(e){const t=new AbortController;return this.request({commandTimeout:e||5e3,onTimeout:()=>{t.abort()},executor:async(e,i,o)=>{try{const i=await fetch("./session",{signal:t.signal});if(o.elapsed)return;o.clearTimeout(),e(i.json())}catch(r){i(`getCurrentSession: ${r}`)}}})}getCurrentInstance(){return this.request({cacheKey:"currentInstance",executor:(e,t,i)=>{this._socket.emit("getCurrentInstance",((o,r)=>{i.elapsed||(i.clearTimeout(),o&&t(o),e(r))}))}})}getAdapterInstances(e,t){let i;return"boolean"===typeof e?(t=e,i=""):i=e||"",this.request({cacheKey:`instances_${i}`,forceUpdate:t,executor:(e,t,o)=>{this._socket.emit("getAdapterInstances",i,((i,r)=>{o.elapsed||(o.clearTimeout(),i&&t(i),e(r))}))}})}getAdapters(e,t){let i;return"boolean"===typeof e?(t=e,i=""):i=e||"",this.request({cacheKey:`adapter_${i}`,forceUpdate:t,executor:(e,t,o)=>{this._socket.emit("getAdapters",i,((i,r)=>{o.elapsed||(o.clearTimeout(),i&&t(i),e(r))}))}})}getCompactAdapters(e){return this.request({cacheKey:"compactAdapters",forceUpdate:e,executor:(e,t,i)=>{this._socket.emit("getCompactAdapters",((o,r)=>{i.elapsed||(i.clearTimeout(),o&&t(o),e(r))}))}})}getAdaptersResetCache(e){e=e??"",this.resetCache(`adapter_${e}`),this.resetCache("compactAdapters")}getCompactInstances(e){return this.request({cacheKey:"compactInstances",forceUpdate:e,executor:(e,t,i)=>{this._socket.emit("getCompactInstances",((o,r)=>{i.elapsed||(i.clearTimeout(),o&&t(o),e(r))}))}})}getAdapterInstancesResetCache(e){e=e??"",this.resetCache(`instances_${e}`),this.resetCache("compactInstances")}getCompactInstalled(e,t,i){return e=r(e),this.request({cacheKey:`installedCompact_${e}`,forceUpdate:t,commandTimeout:i,executor:(t,i,o)=>{this._socket.emit("getCompactInstalled",e,(e=>{o.elapsed||(o.clearTimeout(),e===h.PERMISSION_ERROR?i('May not read "getCompactInstalled"'):e?t(e):i('Cannot read "getCompactInstalled"'))}))}})}getInstalledResetCache(e){e?(this.resetCache(`installedCompact_${e}`),this.resetCache(`installed_${e}`)):(this.resetCache("installedCompact_",!0),this.resetCache("installed_",!0))}getCompactRepository(e,t,i){return e=r(e),this.request({cacheKey:`repositoryCompact_${e}`,forceUpdate:t,commandTimeout:i,executor:(t,i,o)=>{this._socket.emit("getCompactRepository",e,(e=>{o.elapsed||(o.clearTimeout(),e===h.PERMISSION_ERROR?i('May not read "getCompactRepository"'):e?t(e):i('Cannot read "getCompactRepository"'))}))}})}getRepositoryResetCache(e){e?(this.resetCache(`repositoryCompact_${e}`),this.resetCache(`repository_${e}`)):(this.resetCache("repositoryCompact_",!0),this.resetCache("repository_",!0))}getCompactHosts(e){return this.request({cacheKey:"hostsCompact",forceUpdate:e,executor:(e,t,i)=>{this._socket.emit("getCompactHosts",((o,r)=>{i.elapsed||(i.clearTimeout(),o&&t(o),e(r))}))}})}getCompactSystemRepositories(e){return this.request({cacheKey:"repositoriesCompact",forceUpdate:e,executor:(e,t,i)=>{this._socket.emit("getCompactSystemRepositories",((o,r)=>{i.elapsed||(i.clearTimeout(),o&&t(o),e(r))}))}})}}},603:(e,t,i)=>{"use strict";i.d(t,{jI:()=>j});var o=i(29183);function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e}).apply(this,arguments)}function n(e,t){if(null==e)return{};var i,o,r={},n=Object.keys(e);for(o=0;o<n.length;o++)t.indexOf(i=n[o])>=0||(r[i]=e[i]);return r}function s(e){var t=(0,o.useRef)(e),i=(0,o.useRef)((function(e){t.current&&t.current(e)}));return t.current=e,i.current}var a=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=1),e>i?i:e<t?t:e},c=function(e){return"touches"in e},h=function(e){return e&&e.ownerDocument.defaultView||self},l=function(e,t,i){var o=e.getBoundingClientRect(),r=c(t)?function(e,t){for(var i=0;i<e.length;i++)if(e[i].identifier===t)return e[i];return e[0]}(t.touches,i):t;return{left:a((r.pageX-(o.left+h(e).pageXOffset))/o.width),top:a((r.pageY-(o.top+h(e).pageYOffset))/o.height)}},u=function(e){!c(e)&&e.preventDefault()},d=o.memo((function(e){var t=e.onMove,i=e.onKey,a=n(e,["onMove","onKey"]),d=(0,o.useRef)(null),m=s(t),p=s(i),f=(0,o.useRef)(null),g=(0,o.useRef)(!1),b=(0,o.useMemo)((function(){var e=function(e){u(e),(c(e)?e.touches.length>0:e.buttons>0)&&d.current?m(l(d.current,e,f.current)):i(!1)},t=function(){return i(!1)};function i(i){var o=g.current,r=h(d.current),n=i?r.addEventListener:r.removeEventListener;n(o?"touchmove":"mousemove",e),n(o?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,o=d.current;if(o&&(u(t),!function(e,t){return t&&!c(e)}(t,g.current)&&o)){if(c(t)){g.current=!0;var r=t.changedTouches||[];r.length&&(f.current=r[0].identifier)}o.focus(),m(l(o,t,f.current)),i(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),p({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},i]}),[p,m]),v=b[0],y=b[1],w=b[2];return(0,o.useEffect)((function(){return w}),[w]),o.createElement("div",r({},a,{onTouchStart:v,onMouseDown:v,className:"react-colorful__interactive",ref:d,onKeyDown:y,tabIndex:0,role:"slider"}))})),m=function(e){return e.filter(Boolean).join(" ")},p=function(e){var t=e.color,i=e.left,r=e.top,n=void 0===r?.5:r,s=m(["react-colorful__pointer",e.className]);return o.createElement("div",{className:s,style:{top:100*n+"%",left:100*i+"%"}},o.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},f=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=Math.pow(10,t)),Math.round(i*e)/i},g=(Math.PI,function(e){return S(b(e))}),b=function(e){return"#"===e[0]&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?f(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:8===e.length?f(parseInt(e.substring(6,8),16)/255,2):1}},v=function(e){return C(x(e))},y=function(e){var t=e.s,i=e.v,o=e.a,r=(200-t)*i/100;return{h:f(e.h),s:f(r>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0),l:f(r/2),a:f(o,2)}},w=function(e){var t=y(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},x=function(e){var t=e.h,i=e.s,o=e.v,r=e.a;t=t/360*6,i/=100,o/=100;var n=Math.floor(t),s=o*(1-i),a=o*(1-(t-n)*i),c=o*(1-(1-t+n)*i),h=n%6;return{r:f(255*[o,a,s,s,c,o][h]),g:f(255*[c,o,o,a,s,s][h]),b:f(255*[s,s,c,o,o,a][h]),a:f(r,2)}},k=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},C=function(e){var t=e.r,i=e.g,o=e.b,r=e.a,n=r<1?k(f(255*r)):"";return"#"+k(t)+k(i)+k(o)+n},S=function(e){var t=e.r,i=e.g,o=e.b,r=e.a,n=Math.max(t,i,o),s=n-Math.min(t,i,o),a=s?n===t?(i-o)/s:n===i?2+(o-t)/s:4+(t-i)/s:0;return{h:f(60*(a<0?a+6:a)),s:f(n?s/n*100:0),v:f(n/255*100),a:r}},T=o.memo((function(e){var t=e.hue,i=e.onChange,r=m(["react-colorful__hue",e.className]);return o.createElement("div",{className:r},o.createElement(d,{onMove:function(e){i({h:360*e.left})},onKey:function(e){i({h:a(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":f(t),"aria-valuemax":"360","aria-valuemin":"0"},o.createElement(p,{className:"react-colorful__hue-pointer",left:t/360,color:w({h:t,s:100,v:100,a:1})})))})),E=o.memo((function(e){var t=e.hsva,i=e.onChange,r={backgroundColor:w({h:t.h,s:100,v:100,a:1})};return o.createElement("div",{className:"react-colorful__saturation",style:r},o.createElement(d,{onMove:function(e){i({s:100*e.left,v:100-100*e.top})},onKey:function(e){i({s:a(t.s+100*e.left,0,100),v:a(t.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+f(t.s)+"%, Brightness "+f(t.v)+"%"},o.createElement(p,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:w(t)})))})),_=function(e,t){if(e===t)return!0;for(var i in e)if(e[i]!==t[i])return!1;return!0},O=function(e,t){return e.toLowerCase()===t.toLowerCase()||_(b(e),b(t))};function M(e,t,i){var r=s(i),n=(0,o.useState)((function(){return e.toHsva(t)})),a=n[0],c=n[1],h=(0,o.useRef)({color:t,hsva:a});(0,o.useEffect)((function(){if(!e.equal(t,h.current.color)){var i=e.toHsva(t);h.current={hsva:i,color:t},c(i)}}),[t,e]),(0,o.useEffect)((function(){var t;_(a,h.current.hsva)||e.equal(t=e.fromHsva(a),h.current.color)||(h.current={hsva:a,color:t},r(t))}),[a,e,r]);var l=(0,o.useCallback)((function(e){c((function(t){return Object.assign({},t,e)}))}),[]);return[a,l]}var D,R="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,A=new Map,N=function(e){R((function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!A.has(t)){var o=t.createElement("style");o.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',A.set(t,o);var r=D||i.nc;r&&o.setAttribute("nonce",r),t.head.appendChild(o)}}),[])},I=function(e){var t=e.className,i=e.colorModel,s=e.color,a=void 0===s?i.defaultColor:s,c=e.onChange,h=n(e,["className","colorModel","color","onChange"]),l=(0,o.useRef)(null);N(l);var u=M(i,a,c),d=u[0],p=u[1],f=m(["react-colorful",t]);return o.createElement("div",r({},h,{ref:l,className:f}),o.createElement(E,{hsva:d,onChange:p}),o.createElement(T,{hue:d.h,onChange:p,className:"react-colorful__last-control"}))},L={defaultColor:"000",toHsva:g,fromHsva:function(e){return v({h:e.h,s:e.s,v:e.v,a:1})},equal:O},j=function(e){return o.createElement(I,r({},e,{colorModel:L}))}},50783:(e,t,i)=>{"use strict";i.d(t,{A:()=>T});var o=i(29183),r=e=>"string"!==typeof e?{}:e.split(/ ?; ?/).reduce(((e,t)=>{const[i,o]=t.split(/ ?: ?/).map(((e,t)=>0===t?e.replace(/\s+/g,""):e.trim()));if(i&&o){const t=i.replace(/(\w)-(\w)/g,((e,t,i)=>`${t}${i.toUpperCase()}`));let r=o.trim();Number.isNaN(Number(o))||(r=Number(o)),e[i.startsWith("-")?i:t]=r}return e}),{});var n=["br","col","colgroup","dl","hr","iframe","img","input","link","menuitem","meta","ol","param","select","table","tbody","tfoot","thead","tr","ul","wbr"],s={"accept-charset":"acceptCharset",acceptcharset:"acceptCharset",accesskey:"accessKey",allowfullscreen:"allowFullScreen",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",class:"className",classid:"classID",classname:"className",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",controlslist:"controlsList",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",datetime:"dateTime",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",enctype:"encType",for:"htmlFor",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",innerhtml:"innerHTML",inputmode:"inputMode",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",marginwidth:"marginWidth",marginheight:"marginHeight",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",nomodule:"noModule",novalidate:"noValidate",playsinline:"playsInline",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",typemustmatch:"typeMustMatch",usemap:"useMap",accentheight:"accentHeight","accent-height":"accentHeight",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",arabicform:"arabicForm","arabic-form":"arabicForm",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",diffuseconstant:"diffuseConstant",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",edgemode:"edgeMode",enablebackground:"enableBackground","enable-background":"enableBackground",externalresourcesrequired:"externalResourcesRequired",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",imagerendering:"imageRendering","image-rendering":"imageRendering",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",vmathematical:"vMathematical","v-mathematical":"vMathematical",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan",onblur:"onBlur",onchange:"onChange",onclick:"onClick",oncontextmenu:"onContextMenu",ondoubleclick:"onDoubleClick",ondrag:"onDrag",ondragend:"onDragEnd",ondragenter:"onDragEnter",ondragexit:"onDragExit",ondragleave:"onDragLeave",ondragover:"onDragOver",ondragstart:"onDragStart",ondrop:"onDrop",onerror:"onError",onfocus:"onFocus",oninput:"onInput",oninvalid:"onInvalid",onkeydown:"onKeyDown",onkeypress:"onKeyPress",onkeyup:"onKeyUp",onload:"onLoad",onmousedown:"onMouseDown",onmouseenter:"onMouseEnter",onmouseleave:"onMouseLeave",onmousemove:"onMouseMove",onmouseout:"onMouseOut",onmouseover:"onMouseOver",onmouseup:"onMouseUp",onscroll:"onScroll",onsubmit:"onSubmit",ontouchcancel:"onTouchCancel",ontouchend:"onTouchEnd",ontouchmove:"onTouchMove",ontouchstart:"onTouchStart",onwheel:"onWheel"};function a(e,t){const{key:i,level:a,...h}=t;switch(e.nodeType){case 1:return o.createElement(function(e){if(/[a-z]+[A-Z]+[a-z]+/.test(e))return e;return e.toLowerCase()}(e.nodeName),function(e,t){const i={key:t};if(e instanceof Element){const t=e.getAttribute("class");t&&(i.className=t),[...e.attributes].forEach((e=>{switch(e.name){case"class":break;case"style":i[e.name]=r(e.value);break;case"allowfullscreen":case"allowpaymentrequest":case"async":case"autofocus":case"autoplay":case"checked":case"controls":case"default":case"defer":case"disabled":case"formnovalidate":case"hidden":case"ismap":case"itemscope":case"loop":case"multiple":case"muted":case"nomodule":case"novalidate":case"open":case"readonly":case"required":case"reversed":case"selected":case"typemustmatch":i[s[e.name]||e.name]=!0;break;default:i[s[e.name]||e.name]=e.value}}))}return i}(e,i),c(e.childNodes,a,h));case 3:{const t=e.nodeValue?.toString()??"";if(!h.allowWhiteSpaces&&/^\s+$/.test(t)&&!/[\u00A0\u202F]/.test(t))return null;if(!e.parentNode)return t;const i=e.parentNode.nodeName.toLowerCase();return n.includes(i)?(/\S/.test(t)&&console.warn(`A textNode is not allowed inside '${i}'. Your text "${t}" will be ignored`),null):t}case 8:default:return null;case 11:return c(e.childNodes,a,t)}}function c(e,t,i){const o=[...e].map(((e,o)=>h(e,{...i,index:o,level:t+1}))).filter(Boolean);return o.length?o:null}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!(e instanceof Node))return null;const{actions:i=[],index:o=0,level:r=0,randomKey:n}=t;let s=e,c=`${r}-${o}`;const h=[];return n&&0===r&&(c=`${function(){const e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";let t="";for(let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;i>0;--i)t+=e[Math.round(61*Math.random())];return t}()}-${c}`),Array.isArray(i)&&i.forEach((t=>{t.condition(s,c,r)&&("function"===typeof t.pre&&(s=t.pre(s,c,r),s instanceof Node||(s=e)),"function"===typeof t.post&&h.push(t.post(s,c,r)))})),h.length?h:a(s,{key:c,level:r,...t})}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof e?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||"string"!==typeof e)return null;const{includeAllNodes:i=!1,nodeOnly:o=!1,selector:r="body > *",type:n="text/html"}=t;try{const s=(new DOMParser).parseFromString(e,n);if(i){const{childNodes:e}=s.body;return o?e:[...e].map((e=>h(e,t)))}const a=s.querySelector(r)||s.body.childNodes[0];if(!(a instanceof Node))throw new TypeError("Error parsing input");return o?a:h(a,t)}catch(s){}return null}(e,t):e instanceof Node?h(e,t):null}var u=Object.defineProperty,d=(e,t,i)=>((e,t,i)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!==typeof t?t+"":t,i),m="react-inlinesvg",p={IDLE:"idle",LOADING:"loading",LOADED:"loaded",FAILED:"failed",READY:"ready",UNSUPPORTED:"unsupported"};function f(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}function g(){return function(){if(!document)return!1;const e=document.createElement("div");e.innerHTML="<svg />";const t=e.firstChild;return!!t&&"http://www.w3.org/2000/svg"===t.namespaceURI}()&&"undefined"!==typeof window&&null!==window}async function b(e,t){const i=await fetch(e,t),o=i.headers.get("content-type"),[r]=(o??"").split(/ ?; ?/);if(i.status>299)throw new Error("Not found");if(!["image/svg+xml","text/plain"].some((e=>r.includes(e))))throw new Error(`Content type isn't valid: ${r}`);return i.text()}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((t=>{setTimeout(t,1e3*e)}))}var y,w=class{constructor(){d(this,"cacheApi"),d(this,"cacheStore"),d(this,"subscribers",[]),d(this,"isReady",!1),this.cacheStore=new Map;let e=m,t=!1;f()&&(e=window.REACT_INLINESVG_CACHE_NAME??m,t=!!window.REACT_INLINESVG_PERSISTENT_CACHE&&"caches"in window),t?caches.open(e).then((e=>{this.cacheApi=e})).catch((e=>{console.error(`Failed to open cache: ${e.message}`)})).finally((()=>{this.isReady=!0,this.subscribers.forEach((e=>e()))})):this.isReady=!0}onReady(e){this.isReady?e():this.subscribers.push(e)}async get(e,t){return await(this.cacheApi?this.fetchAndAddToPersistentCache(e,t):this.fetchAndAddToInternalCache(e,t)),this.cacheStore.get(e)?.content??""}set(e,t){this.cacheStore.set(e,t)}isCached(e){return this.cacheStore.get(e)?.status===p.LOADED}async fetchAndAddToInternalCache(e,t){const i=this.cacheStore.get(e);if(i?.status!==p.LOADING){if(!i?.content){this.cacheStore.set(e,{content:"",status:p.LOADING});try{const i=await b(e,t);this.cacheStore.set(e,{content:i,status:p.LOADED})}catch(o){throw this.cacheStore.set(e,{content:"",status:p.FAILED}),o}}}else await this.handleLoading(e,(async()=>{this.cacheStore.set(e,{content:"",status:p.IDLE}),await this.fetchAndAddToInternalCache(e,t)}))}async fetchAndAddToPersistentCache(e,t){const i=this.cacheStore.get(e);if(i?.status===p.LOADED)return;if(i?.status===p.LOADING)return void await this.handleLoading(e,(async()=>{this.cacheStore.set(e,{content:"",status:p.IDLE}),await this.fetchAndAddToPersistentCache(e,t)}));this.cacheStore.set(e,{content:"",status:p.LOADING});const o=await(this.cacheApi?.match(e));if(o){const t=await o.text();this.cacheStore.set(e,{content:t,status:p.LOADED})}else try{await(this.cacheApi?.add(new Request(e,t)));const i=await(this.cacheApi?.match(e)),o=await(i?.text())??"";this.cacheStore.set(e,{content:o,status:p.LOADED})}catch(r){throw this.cacheStore.set(e,{content:"",status:p.FAILED}),r}}async handleLoading(e,t){let i=0;for(;this.cacheStore.get(e)?.status===p.LOADING&&i<10;)await v(.1),i+=1;i>=10&&await t()}keys(){return[...this.cacheStore.keys()]}data(){return[...this.cacheStore.entries()].map((e=>{let[t,i]=e;return{[t]:i}}))}async delete(e){this.cacheApi&&await this.cacheApi.delete(e),this.cacheStore.delete(e)}async clear(){if(this.cacheApi){const e=await this.cacheApi.keys();for(const t of e)await this.cacheApi.delete(t)}this.cacheStore.clear()}};function x(e){const t=(0,o.useRef)();return(0,o.useEffect)((()=>{t.current=e})),t.current}function k(e){const{baseURL:t,content:i,description:o,handleError:r,hash:n,preProcessor:s,title:a,uniquifyIDs:c=!1}=e;try{const e=function(e,t){if(t)return t(e);return e}(i,s),r=l(e,{nodeOnly:!0});if(!r||!(r instanceof SVGSVGElement))throw new Error("Could not convert the src to a DOM Node");const h=C(r,{baseURL:t,hash:n,uniquifyIDs:c});if(o){const e=h.querySelector("desc");e?.parentNode&&e.parentNode.removeChild(e);const t=document.createElementNS("http://www.w3.org/2000/svg","desc");t.innerHTML=o,h.prepend(t)}if("undefined"!==typeof a){const e=h.querySelector("title");if(e?.parentNode&&e.parentNode.removeChild(e),a){const e=document.createElementNS("http://www.w3.org/2000/svg","title");e.innerHTML=a,h.prepend(e)}}return h}catch(h){return r(h)}}function C(e,t){const{baseURL:i="",hash:o,uniquifyIDs:r}=t,n=["id","href","xlink:href","xlink:role","xlink:arcrole"],s=["href","xlink:href"];return r?([...e.children].forEach((e=>{if(e.attributes?.length){const t=Object.values(e.attributes).map((e=>{const t=e,r=/url\((.*?)\)/.exec(e.value);return r?.[1]&&(t.value=e.value.replace(r[0],`url(${i}${r[1]}__${o})`)),t}));n.forEach((e=>{const i=t.find((t=>t.name===e));var r,n;i&&(r=e,n=i.value,!s.includes(r)||!n||n.includes("#"))&&(i.value=`${i.value}__${o}`)}))}return e.children.length?C(e,t):e})),e):e}function S(e){const{cacheRequests:t=!0,children:i=null,description:r,fetchOptions:n,innerRef:s,loader:a=null,onError:c,onLoad:h,src:u,title:d,uniqueHash:m}=e,[v,w]=(0,o.useReducer)(((e,t)=>({...e,...t})),{content:"",element:null,isCached:t&&y.isCached(e.src),status:p.IDLE}),{content:C,element:S,isCached:T,status:E}=v,_=x(e),O=x(v),M=(0,o.useRef)(m??function(e){const t="abcdefghijklmnopqrstuvwxyz",i=`${t}${t.toUpperCase()}1234567890`;let o="";for(let n=0;n<e;n++)o+=(r=i)[Math.floor(Math.random()*r.length)];var r;return o}(8)),D=(0,o.useRef)(!1),R=(0,o.useRef)(!1),A=(0,o.useCallback)((e=>{D.current&&(w({status:"Browser does not support SVG"===e.message?p.UNSUPPORTED:p.FAILED}),c?.(e))}),[c]),N=(0,o.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];D.current&&w({content:e,isCached:t,status:p.LOADED})}),[]),I=(0,o.useCallback)((async()=>{const e=await b(u,n);N(e)}),[n,N,u]),L=(0,o.useCallback)((()=>{try{const t=l(k({...e,handleError:A,hash:M.current,content:C}));if(!t||!(0,o.isValidElement)(t))throw new Error("Could not convert the src to a React element");w({element:t,status:p.READY})}catch(t){A(new Error(t.message))}}),[C,A,e]),j=(0,o.useCallback)((async()=>{const e=/^data:image\/svg[^,]*?(;base64)?,(.*)/u.exec(u);let i;if(e?i=e[1]?window.atob(e[2]):decodeURIComponent(e[2]):u.includes("<svg")&&(i=u),i)N(i);else try{if(t){const e=await y.get(u,n);N(e,!0)}else await I()}catch(o){A(o)}}),[t,I,n,A,N,u]),H=(0,o.useCallback)((async()=>{D.current&&w({content:"",element:null,isCached:!1,status:p.LOADING})}),[]);(0,o.useEffect)((()=>{if(D.current=!0,!f()||R.current)return()=>{};try{if(E===p.IDLE){if(!g())throw new Error("Browser does not support SVG");if(!u)throw new Error("Missing src");H()}}catch(e){A(e)}return R.current=!0,()=>{D.current=!1}}),[]),(0,o.useEffect)((()=>{if(f()&&_)if(_.src!==u){if(!u)return void A(new Error("Missing src"));H()}else _.title===d&&_.description===r||L()}),[r,L,A,H,_,u,d]),(0,o.useEffect)((()=>{O&&(O.status!==p.LOADING&&E===p.LOADING&&j(),O.status!==p.LOADED&&E===p.LOADED&&L(),O.status!==p.READY&&E===p.READY&&h?.(u,T))}),[j,L,T,h,O,u,E]);const P=function(e){const t={};for(var i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];for(const n in e)({}).hasOwnProperty.call(e,n)&&(o.includes(n)||(t[n]=e[n]));return t}(e,"baseURL","cacheRequests","children","description","fetchOptions","innerRef","loader","onError","onLoad","preProcessor","src","title","uniqueHash","uniquifyIDs");return f()?S?(0,o.cloneElement)(S,{ref:s,...P}):[p.UNSUPPORTED,p.FAILED].includes(E)?i:a:a}function T(e){y||(y=new w);const{loader:t}=e,i=(0,o.useRef)(!1),[r,n]=(0,o.useState)(y.isReady);return(0,o.useEffect)((()=>{i.current||(y.onReady((()=>{n(!0)})),i.current=!0)}),[]),r?o.createElement(S,{...e}):t}}}]);
//# sourceMappingURL=38.0fb71f1f.chunk.js.map