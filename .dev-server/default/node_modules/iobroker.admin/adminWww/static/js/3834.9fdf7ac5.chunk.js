"use strict";(self.webpackChunksrc_rx=self.webpackChunksrc_rx||[]).push([[3834],{79313:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(28437),o=n(89303),i=n(32075),r=n(16904),l=n(70579);const a={modalDialog:{minWidth:400,maxWidth:800},overflowHidden:{display:"flex",overflow:"hidden"},titleIcon:{marginRight:5},content:{fontSize:16},languageButton:{position:"absolute",right:8,top:8},languageButtonActive:e=>({color:e.palette.primary.main})},d=e=>{let{toggleTranslation:t,noTranslation:n,title:d,fullWidth:c,help:p,maxWidth:h,progress:g,icon:u,disableApplyIfNotChanged:x,applyButton:v,onClose:m,children:j,titleButtonApply:f,titleButtonClose:b,onApply:y,textInput:w,defaultValue:k,overflowHidden:C,disableApply:T,theme:I}=e;const[D,B]=(0,s.useState)(k);(0,s.useEffect)((()=>{B(k)}),[k]);let A=null;u&&(A=u);const M=r.Utils.getStyle(I,a.languageButtonActive);return(0,l.jsxs)(o.Dialog,{open:!0,maxWidth:h||"md",fullWidth:!!c,disableEscapeKeyDown:!1,onClose:m,sx:{"& .MuiPaper-root":a.modalDialog},children:[d&&(0,l.jsxs)(o.DialogTitle,{children:[u?(0,l.jsx)(A,{style:a.titleIcon}):null,d,"en"!==r.I18n.getLanguage()&&t?(0,l.jsx)(o.IconButton,{size:"large",style:{...a.languageButton,...n?M:void 0},onClick:()=>t(),title:r.I18n.t("Disable/Enable translation"),children:(0,l.jsx)(i.Language,{})}):null]}),(0,l.jsxs)(o.DialogContent,{style:{...C?a.overflowHidden:void 0,...a.content,paddingTop:8},children:[w&&(0,l.jsx)(o.TextField,{autoComplete:"off",fullWidth:!0,autoFocus:!0,variant:"standard",size:"medium",multiline:!0,value:D,onChange:e=>B(e.target.value),slotProps:{input:{endAdornment:D?(0,l.jsx)(o.InputAdornment,{position:"end",children:(0,l.jsx)(o.IconButton,{size:"small",onClick:()=>B(""),children:(0,l.jsx)(i.Close,{})})}):null}}}),j,p?(0,l.jsx)("div",{children:p}):null]}),(0,l.jsxs)(o.DialogActions,{children:[(void 0===v||v)&&(0,l.jsx)(o.Button,{startIcon:(0,l.jsx)(i.Check,{}),disabled:T||g||x&&k===D,onClick:()=>y&&y(w?D:""),variant:"contained",color:"primary",children:r.I18n.t(f||"Ok")}),(0,l.jsx)(o.Button,{color:"grey",onClick:m,disabled:g,variant:"contained",startIcon:(0,l.jsx)(i.Close,{}),children:r.I18n.t(b||"Cancel")})]})]})}},13714:(e,t,n)=>{n.d(t,{A:()=>d});n(28437);var s=n(89303),o=n(32075),i=n(22631),r=n(22103),l=n(70579);const a={checkIcon:{color:i.A[700]},cancelIcon:{color:r.A[700]},wrapperContent:{display:"flex",flexFlow:"nowrap",alignItems:"inherit"}};const d=function(e){return(0,l.jsxs)(s.Grid2,{container:!0,style:a.wrapperContent,alignItems:"center",direction:"row",spacing:1,children:[(0,l.jsx)(s.Grid2,{children:e.state?(0,l.jsx)(o.CheckCircle,{style:a.checkIcon}):(0,l.jsx)(o.Cancel,{style:a.cancelIcon})}),(0,l.jsx)(s.Grid2,{children:(0,l.jsx)(s.Typography,{children:e.children})})]})}},53002:(e,t,n)=>{n.d(t,{A:()=>m,Q:()=>x});var s=n(28437),o=n(78613),i=n.n(o),r=n(86178),l=n.n(r),a=n(89303),d=n(32075),c=n(16904),p=n(46188),h=n(13714),g=(n(56220),n(86503),n(24459),n(938),n(89329),n(36791),n(54511),n(9102),n(46031),n(38383),n(70579));const u={closeButton:e=>({position:"absolute",right:8,top:8,color:e.palette.grey[500]}),languageButton:{position:"absolute",right:60,top:8},languageButtonActive:e=>({color:e.palette.primary.main}),typography:{paddingRight:30},version:e=>({background:"#4dabf5",borderRadius:"3px",pl:"10px",fontWeight:"bold",color:"dark"===e.palette.mode?"black":"white"}),wrapperButton:{"@media screen and (max-width: 465px)":{"& *":{fontSize:10}},"@media screen and (max-width: 380px)":{"& *":{fontSize:9}}},messageText:{},messageIcon:{width:32,height:32,marginRight:8},messageColor_warn:{color:"#cb7642"},messageColor_error:{color:"#f5614d"},messageColor_info:{color:"#5abd29"},messageTitle_warn:e=>({background:"#cb7642",borderRadius:"3px",pl:"10px",fontWeight:"bold",color:"dark"===e.palette.mode?"black":"white"}),messageTitle_error:e=>({background:"#f5614d",borderRadius:"3px",pl:"10px",fontWeight:"bold",color:"dark"===e.palette.mode?"black":"white"}),messageTitle_info:e=>({background:"#5abd29",borderRadius:"3px",pl:"10px",fontWeight:"bold",color:"dark"===e.palette.mode?"black":"white"}),messageDialogText:{fontSize:18},messageDialogTitle:{},versionTime:{fontSize:"smaller",opacity:.5,marginLeft:4},dialogPaper:{maxWidth:880}};function x(e,t,n,s){let o=null;return e&&e.forEach((e=>{let r=!e.condition||!e.condition.rules;if(e.condition&&e.condition.rules){const o=(Array.isArray(e.condition.rules)?e.condition.rules:[e.condition.rules]).map((e=>{let o,r,l;if(e.includes("oldVersion"))o=t,e=e.substring(10);else if(e.includes("newVersion"))o=n,e=e.substring(10);else{if("installed"===e)return!!t;if("!"===e||"not-installed"===e)return!t;if(s){const t=e.match(/([a-z][-a-z_0-9]+)([!=<>]+)([.\d]+)/);if(t){const n=Object.keys(s).find((e=>{var n;return(null===(n=s[e])||void 0===n?void 0:n.name)===t[1]}));if(n){o=s[n].version,r=t[2],l=t[3];try{return"=="===r?i().eq(o,l):">"===r?i().gt(o,l):"<"===r?i().lt(o,l):">="===r?i().gte(o,l):"<="===r?i().lte(o,l):"!="===r?i().neq(o,l):(console.warn(`Unknown rule ${o}${e}`),!1)}catch{return console.warn(`Cannot compare ${o}${e}`),!1}}}else if(e.match(/^[!=<>]+/)){if(e.startsWith("!")){const t=e.substring(1);if(!Object.keys(s).find((e=>{var n;return(null===(n=s[e])||void 0===n?void 0:n.name)===t})))return!0}}else if(Object.keys(s).find((t=>{var n;return(null===(n=s[t])||void 0===n?void 0:n.name)===e})))return!0;return!1}}e[1]>="0"&&e[1]<="9"?(r=e[0],l=e.substring(1)):(r=e.substring(0,2),l=e.substring(2));try{if("=="===r)return i().eq(o,l);if(">"===r)return i().gt(o,l);if("<"===r)return i().lt(o,l);if(">="===r)return i().gte(o,l);if("<="===r)return i().lte(o,l);if("!="===r)return i().neq(o,l);console.warn(`Unknown rule ${o}${e}`)}catch{console.warn(`Cannot compare ${o}${e}`)}return!1}));r="or"===e.condition.operand?o.find((e=>e)):-1===o.findIndex((e=>!e))}r&&(o=o||[],o.push({title:e.title,text:e.text,link:e.link,linkText:e.linkText,buttons:e.buttons,level:e.level}))})),o}class v extends s.Component{constructor(e){var t,n;super(e),this.t=void 0,this.mobile=void 0,this.messages=void 0,this.lang=void 0,this.t=e.t,this.mobile=window.innerWidth<p.k,this.state={showMessageDialog:!1};this.messages=x((null===(t=this.props.adapterObject)||void 0===t?void 0:t.messages)||!1,this.props.installedVersion,null===(n=this.props.adapterObject)||void 0===n?void 0:n.version,this.props.instances),this.lang=c.I18n.getLanguage(),l().locale(this.lang)}getDependencies(){var e;const t=[];return null===(e=this.props.dependencies)||void 0===e||e.forEach((e=>{t.push((0,g.jsx)(h.A,{state:e.rightVersion,children:`${e.name}${e.version?` (${e.version})`:""}: ${e.installed?e.installedVersion:"-"}`},e.name))})),t}getNews(){var e;const t=[];return null===(e=this.props.news)||void 0===e||e.forEach((e=>{var n,s,o;const r=(e.news?e.news.split("\n"):[]).map((e=>e.trim().replace(/^\*\s*/,"").replace(/<!--[^>]*->/,"").replace(/<! -[^>]*->/,"").replace(/<!--|--!?>/g,"").trim())).filter((e=>!!e));null!==(n=this.props.adapterObject)&&void 0!==n&&n.version&&e.version&&i().gt(e.version,null===(s=this.props.adapterObject)||void 0===s?void 0:s.version)||t.push((0,g.jsxs)(a.Grid2,{children:[(0,g.jsxs)(a.Typography,{sx:u.version,children:[e.version,(null===(o=this.props.adapterObject)||void 0===o?void 0:o.version)===e.version?(0,g.jsxs)("span",{style:u.versionTime,children:["(",l()(this.props.adapterObject.versionDate).fromNow(),")"]}):""]}),r.map(((t,n)=>(0,g.jsx)(a.Typography,{component:"div",variant:"body2",children:`\u2022 ${t}`},`${e.version}-${n}`)))]},e.version))})),t}getText(e,t){return e&&"object"===typeof e?t?e.en:e[this.lang]||e.en:"object"===typeof e?"":e}renderOneMessage(e,t){return(0,g.jsxs)(a.Grid2,{children:[(0,g.jsx)(a.Typography,{sx:u[`messageTitle_${e.level||"warn"}`],children:this.getText(e.title,this.props.noTranslation)||""}),(0,g.jsx)(a.Typography,{component:"div",variant:"body2",style:u.messageText,children:this.getText(e.text,this.props.noTranslation)||""}),e.link?(0,g.jsx)(a.Button,{onClick:()=>{window.open(e.link,"_blank").focus()},startIcon:(0,g.jsx)(d.Public,{}),variant:"contained",color:"grey",children:this.getText(e.linkText,this.props.noTranslation)||this.props.t("More info")}):null]},t)}renderMessages(){return this.messages?(0,g.jsx)(a.Grid2,{container:!0,spacing:2,direction:"column",wrap:"nowrap",sx:{marginBottom:1},children:this.messages.map(((e,t)=>this.renderOneMessage(e,t)))}):null}renderMessageDialog(){var e;if(!this.state.showMessageDialog)return null;const t=this.messages.find((e=>e.buttons)),n=null===(e=this.props.adapterObject)||void 0===e?void 0:e.version;return(0,g.jsxs)(a.Dialog,{onClose:()=>this.setState({showMessageDialog:!1}),open:!0,children:[(0,g.jsx)(a.DialogTitle,{style:u.messageDialogTitle,children:this.getText(t.title,this.props.noTranslation)||this.props.t("Please confirm")}),(0,g.jsxs)(a.DialogContent,{style:u.messageDialogText,children:["warn"===t.level?(0,g.jsx)(d.Warning,{style:{...u.messageIcon,...u.messageColor_warn}}):null,"error"===t.level?(0,g.jsx)(d.Error,{style:{...u.messageIcon,...u.messageColor_error}}):null,"info"===t.level?(0,g.jsx)(d.Info,{style:{...u.messageIcon,...u.messageColor_info}}):null,this.getText(t.text,this.props.noTranslation)]}),(0,g.jsxs)(a.DialogActions,{children:[t.link?(0,g.jsx)(a.Button,{onClick:()=>{window.open(t.link,"_blank").focus()},startIcon:(0,g.jsx)(d.Public,{}),variant:"contained",color:"secondary",children:this.getText(t.linkText,this.props.noTranslation)||this.props.t("More info")}):null,t.link?(0,g.jsx)("div",{style:{flexGrow:1}}):null,t.buttons.map(((e,s)=>"ok"===e?(0,g.jsx)(a.Button,{variant:"contained",onClick:()=>this.setState({showMessageDialog:!1},(()=>this.props.onUpdate(n))),color:"primary",startIcon:(0,g.jsx)(d.Check,{}),children:this.t("Update")},s):"agree"===e?(0,g.jsx)(a.Button,{sx:u[`messageTitle_${t.level||"warn"}`],variant:"contained",onClick:()=>this.setState({showMessageDialog:!1},(()=>this.props.onUpdate(n))),color:"primary",startIcon:(0,g.jsx)(d.Check,{}),children:this.t("Agree")},s):"cancel"===e?(0,g.jsx)(a.Button,{variant:"contained",onClick:()=>this.setState({showMessageDialog:!1}),startIcon:(0,g.jsx)(d.Close,{}),color:"grey",children:this.t("Cancel")},s):null))]})]})}render(){var e,t;const n=null===(e=this.props.adapterObject)||void 0===e?void 0:e.version,s=null===(t=this.props.news)||void 0===t?void 0:t.every((e=>e.downloaded)),o=this.getNews();return(0,g.jsxs)(a.Dialog,{onClose:this.props.onClose,open:!0,sx:{"& .MuiDialog-paper":u.dialogPaper},children:[this.renderMessageDialog(),(0,g.jsx)(a.DialogTitle,{children:(0,g.jsxs)(a.Typography,{component:"h2",variant:"h6",sx:{"&.MuiTypography-root":u.typography},children:[(0,g.jsx)("div",{style:{width:"calc(100% - 60px)"},children:this.t('Update "%s" to v%s',this.props.adapter,n)}),(0,g.jsx)(a.IconButton,{size:"large",sx:u.closeButton,onClick:this.props.onClose,children:(0,g.jsx)(d.Close,{})}),"en"!==this.lang&&this.props.toggleTranslation&&!s?(0,g.jsx)(a.IconButton,{size:"large",style:c.Utils.getStyle(this.props.theme,u.languageButton,this.props.noTranslation&&u.languageButtonActive),onClick:this.props.toggleTranslation,title:c.I18n.t("Disable/Enable translation"),children:(0,g.jsx)(d.Language,{})}):null]})}),(0,g.jsxs)(a.DialogContent,{dividers:!0,children:[this.renderMessages(),(0,g.jsxs)(a.Grid2,{container:!0,direction:"column",spacing:2,wrap:"nowrap",children:[this.props.dependencies&&this.props.dependencies.length>0&&this.props.dependencies.find((e=>!e.rightVersion))&&(0,g.jsxs)(a.Grid2,{children:[(0,g.jsx)(a.Typography,{variant:"h6",gutterBottom:!0,children:this.t("Dependencies")}),this.getDependencies()]}),o.length?(0,g.jsxs)(a.Grid2,{children:[(0,g.jsx)(a.Typography,{variant:"h6",gutterBottom:!0,children:this.t("Change log")}),(0,g.jsx)(a.Grid2,{container:!0,spacing:2,direction:"column",wrap:"nowrap",children:o})]}):this.t("No change log available")]})]}),(0,g.jsxs)(a.DialogActions,{sx:u.wrapperButton,children:[!!this.props.rightDependencies&&this.props.onIgnore&&n&&(0,g.jsx)(a.Button,{id:"adapter-update-dialog-ignore",variant:"outlined",onClick:()=>this.props.onIgnore(n),color:"primary",children:this.t("Ignore version %s",n)}),(0,g.jsx)(a.Button,{variant:"contained",id:"adapter-update-dialog-ok",autoFocus:!0,disabled:!this.props.rightDependencies||!n||!this.props.adapterObject,onClick:()=>{var e;null!==(e=this.messages)&&void 0!==e&&e.find((e=>e.buttons))?this.setState({showMessageDialog:!0}):this.props.onUpdate(n)},color:"primary",startIcon:(0,g.jsx)(d.Check,{}),children:this.mobile?null:this.props.textUpdate?this.props.textUpdate:this.t("Update")}),this.props.textInstruction?(0,g.jsx)(a.Button,{id:"adapter-update-dialog-instructions",variant:"contained",autoFocus:!0,disabled:!this.props.rightDependencies||!n||!this.props.adapterObject,onClick:()=>{var e;null!==(e=this.messages)&&void 0!==e&&e.find((e=>e.buttons))?this.setState({showMessageDialog:!0}):this.props.onInstruction()},color:"primary",startIcon:(0,g.jsx)(d.Book,{}),children:this.mobile?null:this.props.textInstruction}):null,(0,g.jsx)(a.Button,{id:"adapter-update-dialog-cancel",variant:"contained",onClick:()=>this.props.onClose(),color:"grey",startIcon:(0,g.jsx)(d.Close,{}),children:this.mobile?null:this.t("Close")})]})]})}}const m=v}}]);
//# sourceMappingURL=3834.9fdf7ac5.chunk.js.map