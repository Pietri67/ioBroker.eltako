{"version":3,"file":"static/js/38.0fb71f1f.chunk.js","mappings":"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","sources":["../../../../node_modules/@mui/material/styles/defaultTheme.js","../../../../node_modules/@mui/material/styles/useTheme.js","../../../../node_modules/@mui/system/esm/useTheme/useTheme.js","../../../../node_modules/cropperjs/dist/cropper.js","../../../../node_modules/react-cropper/dist/react-cropper.es.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js","../../../../node_modules/@iobroker/socket-client/src/tools.ts","../../../../node_modules/@iobroker/socket-client/src/Connection.ts","../../../../node_modules/@iobroker/socket-client/src/DeferredPromise.ts","../../../../node_modules/@iobroker/socket-client/src/AdminConnection.ts","../../../../node_modules/react-colorful/src/hooks/useEventCallback.ts","../../../../node_modules/react-colorful/src/utils/clamp.ts","../../../../node_modules/react-colorful/src/components/common/Interactive.tsx","../../../../node_modules/react-colorful/src/utils/format.ts","../../../../node_modules/react-colorful/src/components/common/Pointer.tsx","../../../../node_modules/react-colorful/src/utils/round.ts","../../../../node_modules/react-colorful/src/utils/convert.ts","../../../../node_modules/react-colorful/src/components/common/Hue.tsx","../../../../node_modules/react-colorful/src/components/common/Saturation.tsx","../../../../node_modules/react-colorful/src/utils/compare.ts","../../../../node_modules/react-colorful/src/hooks/useColorManipulation.ts","../../../../node_modules/react-colorful/src/utils/nonce.ts","../../../../node_modules/react-colorful/src/hooks/useIsomorphicLayoutEffect.ts","../../../../node_modules/react-colorful/src/hooks/useStyleSheet.ts","../../../../node_modules/react-colorful/src/components/common/ColorPicker.tsx","../../../../node_modules/react-colorful/src/components/HexColorPicker.tsx","../../../../node_modules/react-from-dom/src/helpers.ts","../../../../node_modules/react-from-dom/src/index.ts","../../../../node_modules/react-inlinesvg/src/config.ts","../../../../node_modules/react-inlinesvg/src/modules/helpers.ts","../../../../node_modules/react-inlinesvg/src/modules/cache.ts","../../../../node_modules/react-inlinesvg/src/index.tsx","../../../../node_modules/react-inlinesvg/src/modules/hooks.tsx","../../../../node_modules/react-inlinesvg/src/modules/utils.ts"],"sourcesContent":["'use client';\n\nimport createTheme from \"./createTheme.js\";\nconst defaultTheme = createTheme();\nexport default defaultTheme;","'use client';\n\nimport * as React from 'react';\nimport { useTheme as useThemeSystem } from '@mui/system';\nimport defaultTheme from \"./defaultTheme.js\";\nimport THEME_ID from \"./identifier.js\";\nexport default function useTheme() {\n  const theme = useThemeSystem(defaultTheme);\n  if (process.env.NODE_ENV !== 'production') {\n    // TODO: uncomment once we enable eslint-plugin-react-compiler // eslint-disable-next-line react-compiler/react-compiler\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useDebugValue(theme);\n  }\n  return theme[THEME_ID] || theme;\n}","'use client';\n\nimport createTheme from \"../createTheme/index.js\";\nimport useThemeWithoutDefault from \"../useThemeWithoutDefault/index.js\";\nexport const systemDefaultTheme = createTheme();\nfunction useTheme(defaultTheme = systemDefaultTheme) {\n  return useThemeWithoutDefault(defaultTheme);\n}\nexport default useTheme;","/*!\n * Cropper.js v1.6.2\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2024-04-21T07:43:05.335Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Cropper = factory());\n})(this, (function () { 'use strict';\n\n  function ownKeys(e, r) {\n    var t = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var o = Object.getOwnPropertySymbols(e);\n      r && (o = o.filter(function (r) {\n        return Object.getOwnPropertyDescriptor(e, r).enumerable;\n      })), t.push.apply(t, o);\n    }\n    return t;\n  }\n  function _objectSpread2(e) {\n    for (var r = 1; r < arguments.length; r++) {\n      var t = null != arguments[r] ? arguments[r] : {};\n      r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n        _defineProperty(e, r, t[r]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n        Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n      });\n    }\n    return e;\n  }\n  function _toPrimitive(t, r) {\n    if (\"object\" != typeof t || !t) return t;\n    var e = t[Symbol.toPrimitive];\n    if (void 0 !== e) {\n      var i = e.call(t, r || \"default\");\n      if (\"object\" != typeof i) return i;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return (\"string\" === r ? String : Number)(t);\n  }\n  function _toPropertyKey(t) {\n    var i = _toPrimitive(t, \"string\");\n    return \"symbol\" == typeof i ? i : i + \"\";\n  }\n  function _typeof(o) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n      return typeof o;\n    } : function (o) {\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, _typeof(o);\n  }\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n    }\n  }\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n  function _defineProperty(obj, key, value) {\n    key = _toPropertyKey(key);\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n  }\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n    return arr2;\n  }\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'cropper';\n\n  // Actions\n  var ACTION_ALL = 'all';\n  var ACTION_CROP = 'crop';\n  var ACTION_MOVE = 'move';\n  var ACTION_ZOOM = 'zoom';\n  var ACTION_EAST = 'e';\n  var ACTION_WEST = 'w';\n  var ACTION_SOUTH = 's';\n  var ACTION_NORTH = 'n';\n  var ACTION_NORTH_EAST = 'ne';\n  var ACTION_NORTH_WEST = 'nw';\n  var ACTION_SOUTH_EAST = 'se';\n  var ACTION_SOUTH_WEST = 'sw';\n\n  // Classes\n  var CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\n  var CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\n  var CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\");\n\n  // Data keys\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n  var DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\");\n\n  // Drag modes\n  var DRAG_MODE_CROP = 'crop';\n  var DRAG_MODE_MOVE = 'move';\n  var DRAG_MODE_NONE = 'none';\n\n  // Events\n  var EVENT_CROP = 'crop';\n  var EVENT_CROP_END = 'cropend';\n  var EVENT_CROP_MOVE = 'cropmove';\n  var EVENT_CROP_START = 'cropstart';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_READY = 'ready';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_WHEEL = 'wheel';\n  var EVENT_ZOOM = 'zoom';\n\n  // Mime types\n  var MIME_TYPE_JPEG = 'image/jpeg';\n\n  // RegExps\n  var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;\n  var REGEXP_DATA_URL = /^data:/;\n  var REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n  var REGEXP_TAG_NAME = /^img|canvas$/i;\n\n  // Misc\n  // Inspired by the default width and height of a canvas element.\n  var MIN_CONTAINER_WIDTH = 200;\n  var MIN_CONTAINER_HEIGHT = 100;\n\n  var DEFAULTS = {\n    // Define the view mode of the cropper\n    viewMode: 0,\n    // 0, 1, 2, 3\n\n    // Define the dragging mode of the cropper\n    dragMode: DRAG_MODE_CROP,\n    // 'crop', 'move' or 'none'\n\n    // Define the initial aspect ratio of the crop box\n    initialAspectRatio: NaN,\n    // Define the aspect ratio of the crop box\n    aspectRatio: NaN,\n    // An object with the previous cropping result data\n    data: null,\n    // A selector for adding extra containers to preview\n    preview: '',\n    // Re-render the cropper when resize the window\n    responsive: true,\n    // Restore the cropped area after resize the window\n    restore: true,\n    // Check if the current image is a cross-origin image\n    checkCrossOrigin: true,\n    // Check the current image's Exif Orientation information\n    checkOrientation: true,\n    // Show the black modal\n    modal: true,\n    // Show the dashed lines for guiding\n    guides: true,\n    // Show the center indicator for guiding\n    center: true,\n    // Show the white modal to highlight the crop box\n    highlight: true,\n    // Show the grid background\n    background: true,\n    // Enable to crop the image automatically when initialize\n    autoCrop: true,\n    // Define the percentage of automatic cropping area when initializes\n    autoCropArea: 0.8,\n    // Enable to move the image\n    movable: true,\n    // Enable to rotate the image\n    rotatable: true,\n    // Enable to scale the image\n    scalable: true,\n    // Enable to zoom the image\n    zoomable: true,\n    // Enable to zoom the image by dragging touch\n    zoomOnTouch: true,\n    // Enable to zoom the image by wheeling mouse\n    zoomOnWheel: true,\n    // Define zoom ratio when zoom the image by wheeling mouse\n    wheelZoomRatio: 0.1,\n    // Enable to move the crop box\n    cropBoxMovable: true,\n    // Enable to resize the crop box\n    cropBoxResizable: true,\n    // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n    toggleDragModeOnDblclick: true,\n    // Size limitation\n    minCanvasWidth: 0,\n    minCanvasHeight: 0,\n    minCropBoxWidth: 0,\n    minCropBoxHeight: 0,\n    minContainerWidth: MIN_CONTAINER_WIDTH,\n    minContainerHeight: MIN_CONTAINER_HEIGHT,\n    // Shortcuts of events\n    ready: null,\n    cropstart: null,\n    cropmove: null,\n    cropend: null,\n    crop: null,\n    zoom: null\n  };\n\n  var TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n\n  /**\n   * Check if the given value is not a number.\n   */\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n\n  /**\n   * Check if the given value is a positive number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n   */\n  var isPositiveNumber = function isPositiveNumber(value) {\n    return value > 0 && value < Infinity;\n  };\n\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  var slice = Array.prototype.slice;\n\n  /**\n   * Convert array-like or iterable object to an array.\n   * @param {*} value - The value to convert.\n   * @returns {Array} Returns a new array.\n   */\n  function toArray(value) {\n    return Array.from ? Array.from(value) : slice.call(value);\n  }\n\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length) /* array-like */) {\n        toArray(data).forEach(function (value, key) {\n          callback.call(data, value, key, data);\n        });\n      } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n    return data;\n  }\n\n  /**\n   * Extend the given object.\n   * @param {*} target - The target object to extend.\n   * @param {*} args - The rest objects for merging to the target object.\n   * @returns {Object} The extended object.\n   */\n  var assign = Object.assign || function assign(target) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (isObject(target) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            target[key] = arg[key];\n          });\n        }\n      });\n    }\n    return target;\n  };\n  var REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n\n  /**\n   * Normalize decimal number.\n   * Check out {@link https://0.30000000000000004.com/}\n   * @param {number} value - The value to normalize.\n   * @param {number} [times=100000000000] - The times for normalizing.\n   * @returns {number} Returns the normalized number.\n   */\n  function normalizeDecimalNumber(value) {\n    var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n    return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n  }\n  var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value = \"\".concat(value, \"px\");\n      }\n      style[property] = value;\n    });\n  }\n\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n  function hasClass(element, value) {\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n  function addClass(element, value) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n    var className = element.className.trim();\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    }\n\n    // IE10-11 doesn't support the second parameter of `classList.toggle`\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n  function toParamCase(value) {\n    return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n  }\n\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n    return element.getAttribute(\"data-\".concat(toParamCase(name)));\n  }\n\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n    }\n  }\n\n  /**\n   * Remove data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to remove.\n   */\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      try {\n        delete element[name];\n      } catch (error) {\n        element[name] = undefined;\n      }\n    } else if (element.dataset) {\n      // #128 Safari not allows to delete dataset property\n      try {\n        delete element.dataset[name];\n      } catch (error) {\n        element.dataset[name] = undefined;\n      }\n    } else {\n      element.removeAttribute(\"data-\".concat(toParamCase(name)));\n    }\n  }\n  var REGEXP_SPACES = /\\s\\s*/;\n  var onceSupported = function () {\n    var supported = false;\n    if (IS_BROWSER) {\n      var once = false;\n      var listener = function listener() {};\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n    return supported;\n  }();\n\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n      element.removeEventListener(event, handler, options);\n    });\n  }\n\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n          listeners = _element$listeners === void 0 ? {} : _element$listeners;\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n          listener.apply(element, args);\n        };\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n      element.addEventListener(event, _handler, options);\n    });\n  }\n\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n  function dispatchEvent(element, type, data) {\n    var event;\n\n    // Event and CustomEvent on IE9-11 are global objects, not constructors\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, {\n        detail: data,\n        bubbles: true,\n        cancelable: true\n      });\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n    return element.dispatchEvent(event);\n  }\n\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  var location = WINDOW.location;\n  var REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n\n  /**\n   * Check if the given URL is a cross origin URL.\n   * @param {string} url - The target URL.\n   * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n   */\n  function isCrossOriginURL(url) {\n    var parts = url.match(REGEXP_ORIGINS);\n    return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n  }\n\n  /**\n   * Add timestamp to the given URL.\n   * @param {string} url - The target URL.\n   * @returns {string} The result URL.\n   */\n  function addTimestamp(url) {\n    var timestamp = \"timestamp=\".concat(new Date().getTime());\n    return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n  }\n\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      translateX = _ref.translateX,\n      translateY = _ref.translateY;\n    var values = [];\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    }\n\n    // Rotate should come first before scale to match orientation transform\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n    var maxRatio = 0;\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        if (Math.abs(ratio) > Math.abs(maxRatio)) {\n          maxRatio = ratio;\n        }\n      });\n    });\n    return maxRatio;\n  }\n\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n      pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n        startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  /**\n   * Get the max sizes in a rectangle under the given aspect ratio.\n   * @param {Object} data - The original sizes.\n   * @param {string} [type='contain'] - The adjust type.\n   * @returns {Object} The result sizes.\n   */\n  function getAdjustedSizes(_ref4) {\n    var aspectRatio = _ref4.aspectRatio,\n      height = _ref4.height,\n      width = _ref4.width;\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n    var isValidWidth = isPositiveNumber(width);\n    var isValidHeight = isPositiveNumber(height);\n    if (isValidWidth && isValidHeight) {\n      var adjustedWidth = height * aspectRatio;\n      if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n        height = width / aspectRatio;\n      } else {\n        width = height * aspectRatio;\n      }\n    } else if (isValidWidth) {\n      height = width / aspectRatio;\n    } else if (isValidHeight) {\n      width = height * aspectRatio;\n    }\n    return {\n      width: width,\n      height: height\n    };\n  }\n\n  /**\n   * Get the new sizes of a rectangle after rotated.\n   * @param {Object} data - The original sizes.\n   * @returns {Object} The result sizes.\n   */\n  function getRotatedSizes(_ref5) {\n    var width = _ref5.width,\n      height = _ref5.height,\n      degree = _ref5.degree;\n    degree = Math.abs(degree) % 180;\n    if (degree === 90) {\n      return {\n        width: height,\n        height: width\n      };\n    }\n    var arc = degree % 90 * Math.PI / 180;\n    var sinArc = Math.sin(arc);\n    var cosArc = Math.cos(arc);\n    var newWidth = width * cosArc + height * sinArc;\n    var newHeight = width * sinArc + height * cosArc;\n    return degree > 90 ? {\n      width: newHeight,\n      height: newWidth\n    } : {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n\n  /**\n   * Get a canvas which drew the given image.\n   * @param {HTMLImageElement} image - The image for drawing.\n   * @param {Object} imageData - The image data.\n   * @param {Object} canvasData - The canvas data.\n   * @param {Object} options - The options.\n   * @returns {HTMLCanvasElement} The result canvas.\n   */\n  function getSourceCanvas(image, _ref6, _ref7, _ref8) {\n    var imageAspectRatio = _ref6.aspectRatio,\n      imageNaturalWidth = _ref6.naturalWidth,\n      imageNaturalHeight = _ref6.naturalHeight,\n      _ref6$rotate = _ref6.rotate,\n      rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n      _ref6$scaleX = _ref6.scaleX,\n      scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n      _ref6$scaleY = _ref6.scaleY,\n      scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n    var aspectRatio = _ref7.aspectRatio,\n      naturalWidth = _ref7.naturalWidth,\n      naturalHeight = _ref7.naturalHeight;\n    var _ref8$fillColor = _ref8.fillColor,\n      fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n      _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n      imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n      _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n      imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n      _ref8$maxWidth = _ref8.maxWidth,\n      maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n      _ref8$maxHeight = _ref8.maxHeight,\n      maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n      _ref8$minWidth = _ref8.minWidth,\n      minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n      _ref8$minHeight = _ref8.minHeight,\n      minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n    var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight));\n\n    // Note: should always use image's natural sizes for drawing as\n    // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n    var destMaxSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var destMinSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n    var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n    var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = fillColor;\n    context.fillRect(0, 0, width, height);\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.rotate(rotate * Math.PI / 180);\n    context.scale(scaleX, scaleY);\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n    context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    context.restore();\n    return canvas;\n  }\n  var fromCharCode = String.fromCharCode;\n\n  /**\n   * Get string from char code in data view.\n   * @param {DataView} dataView - The data view for read.\n   * @param {number} start - The start index.\n   * @param {number} length - The read length.\n   * @returns {string} The read result.\n   */\n  function getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    length += start;\n    for (var i = start; i < length; i += 1) {\n      str += fromCharCode(dataView.getUint8(i));\n    }\n    return str;\n  }\n  var REGEXP_DATA_URL_HEAD = /^data:.*,/;\n\n  /**\n   * Transform Data URL to array buffer.\n   * @param {string} dataURL - The Data URL to transform.\n   * @returns {ArrayBuffer} The result array buffer.\n   */\n  function dataURLToArrayBuffer(dataURL) {\n    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n    var binary = atob(base64);\n    var arrayBuffer = new ArrayBuffer(binary.length);\n    var uint8 = new Uint8Array(arrayBuffer);\n    forEach(uint8, function (value, i) {\n      uint8[i] = binary.charCodeAt(i);\n    });\n    return arrayBuffer;\n  }\n\n  /**\n   * Transform array buffer to Data URL.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n   * @param {string} mimeType - The mime type of the Data URL.\n   * @returns {string} The result Data URL.\n   */\n  function arrayBufferToDataURL(arrayBuffer, mimeType) {\n    var chunks = [];\n\n    // Chunk Typed Array for better performance (#435)\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n    while (uint8.length > 0) {\n      // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n      // eslint-disable-next-line prefer-spread\n      chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n      uint8 = uint8.subarray(chunkSize);\n    }\n    return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n  }\n\n  /**\n   * Get orientation value from given array buffer.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n   * @returns {number} The read orientation value.\n   */\n  function resetAndGetOrientation(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var orientation;\n\n    // Ignores range error when the image does not have correct Exif information\n    try {\n      var littleEndian;\n      var app1Start;\n      var ifdStart;\n\n      // Only handle JPEG image (start by 0xFFD8)\n      if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n        var length = dataView.byteLength;\n        var offset = 2;\n        while (offset + 1 < length) {\n          if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n            app1Start = offset;\n            break;\n          }\n          offset += 1;\n        }\n      }\n      if (app1Start) {\n        var exifIDCode = app1Start + 4;\n        var tiffOffset = app1Start + 10;\n        if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n          var endianness = dataView.getUint16(tiffOffset);\n          littleEndian = endianness === 0x4949;\n          if (littleEndian || endianness === 0x4D4D /* bigEndian */) {\n            if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n              var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n              if (firstIFDOffset >= 0x00000008) {\n                ifdStart = tiffOffset + firstIFDOffset;\n              }\n            }\n          }\n        }\n      }\n      if (ifdStart) {\n        var _length = dataView.getUint16(ifdStart, littleEndian);\n        var _offset;\n        var i;\n        for (i = 0; i < _length; i += 1) {\n          _offset = ifdStart + i * 12 + 2;\n          if (dataView.getUint16(_offset, littleEndian) === 0x0112 /* Orientation */) {\n            // 8 is the offset of the current tag's value\n            _offset += 8;\n\n            // Get the original orientation value\n            orientation = dataView.getUint16(_offset, littleEndian);\n\n            // Override the orientation with its default value\n            dataView.setUint16(_offset, 1, littleEndian);\n            break;\n          }\n        }\n      }\n    } catch (error) {\n      orientation = 1;\n    }\n    return orientation;\n  }\n\n  /**\n   * Parse Exif Orientation value.\n   * @param {number} orientation - The orientation to parse.\n   * @returns {Object} The parsed result.\n   */\n  function parseOrientation(orientation) {\n    var rotate = 0;\n    var scaleX = 1;\n    var scaleY = 1;\n    switch (orientation) {\n      // Flip horizontal\n      case 2:\n        scaleX = -1;\n        break;\n\n      // Rotate left 180\n      case 3:\n        rotate = -180;\n        break;\n\n      // Flip vertical\n      case 4:\n        scaleY = -1;\n        break;\n\n      // Flip vertical and rotate right 90\n      case 5:\n        rotate = 90;\n        scaleY = -1;\n        break;\n\n      // Rotate right 90\n      case 6:\n        rotate = 90;\n        break;\n\n      // Flip horizontal and rotate right 90\n      case 7:\n        rotate = 90;\n        scaleX = -1;\n        break;\n\n      // Rotate left 90\n      case 8:\n        rotate = -90;\n        break;\n    }\n    return {\n      rotate: rotate,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initCanvas();\n      this.initCropBox();\n      this.renderCanvas();\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    },\n    initContainer: function initContainer() {\n      var element = this.element,\n        options = this.options,\n        container = this.container,\n        cropper = this.cropper;\n      var minWidth = Number(options.minContainerWidth);\n      var minHeight = Number(options.minContainerHeight);\n      addClass(cropper, CLASS_HIDDEN);\n      removeClass(element, CLASS_HIDDEN);\n      var containerData = {\n        width: Math.max(container.offsetWidth, minWidth >= 0 ? minWidth : MIN_CONTAINER_WIDTH),\n        height: Math.max(container.offsetHeight, minHeight >= 0 ? minHeight : MIN_CONTAINER_HEIGHT)\n      };\n      this.containerData = containerData;\n      setStyle(cropper, {\n        width: containerData.width,\n        height: containerData.height\n      });\n      addClass(element, CLASS_HIDDEN);\n      removeClass(cropper, CLASS_HIDDEN);\n    },\n    // Canvas (image wrapper)\n    initCanvas: function initCanvas() {\n      var containerData = this.containerData,\n        imageData = this.imageData;\n      var viewMode = this.options.viewMode;\n      var rotated = Math.abs(imageData.rotate) % 180 === 90;\n      var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n      var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var canvasWidth = containerData.width;\n      var canvasHeight = containerData.height;\n      if (containerData.height * aspectRatio > containerData.width) {\n        if (viewMode === 3) {\n          canvasWidth = containerData.height * aspectRatio;\n        } else {\n          canvasHeight = containerData.width / aspectRatio;\n        }\n      } else if (viewMode === 3) {\n        canvasHeight = containerData.width / aspectRatio;\n      } else {\n        canvasWidth = containerData.height * aspectRatio;\n      }\n      var canvasData = {\n        aspectRatio: aspectRatio,\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        width: canvasWidth,\n        height: canvasHeight\n      };\n      this.canvasData = canvasData;\n      this.limited = viewMode === 1 || viewMode === 2;\n      this.limitCanvas(true, true);\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      canvasData.left = (containerData.width - canvasData.width) / 2;\n      canvasData.top = (containerData.height - canvasData.height) / 2;\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      this.initialCanvasData = assign({}, canvasData);\n    },\n    limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n      var options = this.options,\n        containerData = this.containerData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var viewMode = options.viewMode;\n      var aspectRatio = canvasData.aspectRatio;\n      var cropped = this.cropped && cropBoxData;\n      if (sizeLimited) {\n        var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n        var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n          minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (viewMode > 0) {\n          if (minCanvasWidth) {\n            minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n          } else if (minCanvasHeight) {\n            minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n          } else if (cropped) {\n            minCanvasWidth = cropBoxData.width;\n            minCanvasHeight = cropBoxData.height;\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        }\n        var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: minCanvasWidth,\n          height: minCanvasHeight\n        });\n        minCanvasWidth = _getAdjustedSizes.width;\n        minCanvasHeight = _getAdjustedSizes.height;\n        canvasData.minWidth = minCanvasWidth;\n        canvasData.minHeight = minCanvasHeight;\n        canvasData.maxWidth = Infinity;\n        canvasData.maxHeight = Infinity;\n      }\n      if (positionLimited) {\n        if (viewMode > (cropped ? 0 : 1)) {\n          var newCanvasLeft = containerData.width - canvasData.width;\n          var newCanvasTop = containerData.height - canvasData.height;\n          canvasData.minLeft = Math.min(0, newCanvasLeft);\n          canvasData.minTop = Math.min(0, newCanvasTop);\n          canvasData.maxLeft = Math.max(0, newCanvasLeft);\n          canvasData.maxTop = Math.max(0, newCanvasTop);\n          if (cropped && this.limited) {\n            canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n            canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n            canvasData.maxLeft = cropBoxData.left;\n            canvasData.maxTop = cropBoxData.top;\n            if (viewMode === 2) {\n              if (canvasData.width >= containerData.width) {\n                canvasData.minLeft = Math.min(0, newCanvasLeft);\n                canvasData.maxLeft = Math.max(0, newCanvasLeft);\n              }\n              if (canvasData.height >= containerData.height) {\n                canvasData.minTop = Math.min(0, newCanvasTop);\n                canvasData.maxTop = Math.max(0, newCanvasTop);\n              }\n            }\n          }\n        } else {\n          canvasData.minLeft = -canvasData.width;\n          canvasData.minTop = -canvasData.height;\n          canvasData.maxLeft = containerData.width;\n          canvasData.maxTop = containerData.height;\n        }\n      }\n    },\n    renderCanvas: function renderCanvas(changed, transformed) {\n      var canvasData = this.canvasData,\n        imageData = this.imageData;\n      if (transformed) {\n        var _getRotatedSizes = getRotatedSizes({\n            width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n            height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n            degree: imageData.rotate || 0\n          }),\n          naturalWidth = _getRotatedSizes.width,\n          naturalHeight = _getRotatedSizes.height;\n        var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n        var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n        canvasData.left -= (width - canvasData.width) / 2;\n        canvasData.top -= (height - canvasData.height) / 2;\n        canvasData.width = width;\n        canvasData.height = height;\n        canvasData.aspectRatio = naturalWidth / naturalHeight;\n        canvasData.naturalWidth = naturalWidth;\n        canvasData.naturalHeight = naturalHeight;\n        this.limitCanvas(true, false);\n      }\n      if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n        canvasData.left = canvasData.oldLeft;\n      }\n      if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n        canvasData.top = canvasData.oldTop;\n      }\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      this.limitCanvas(false, true);\n      canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n      canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      setStyle(this.canvas, assign({\n        width: canvasData.width,\n        height: canvasData.height\n      }, getTransforms({\n        translateX: canvasData.left,\n        translateY: canvasData.top\n      })));\n      this.renderImage(changed);\n      if (this.cropped && this.limited) {\n        this.limitCropBox(true, true);\n      }\n    },\n    renderImage: function renderImage(changed) {\n      var canvasData = this.canvasData,\n        imageData = this.imageData;\n      var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n      var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n      assign(imageData, {\n        width: width,\n        height: height,\n        left: (canvasData.width - width) / 2,\n        top: (canvasData.height - height) / 2\n      });\n      setStyle(this.image, assign({\n        width: imageData.width,\n        height: imageData.height\n      }, getTransforms(assign({\n        translateX: imageData.left,\n        translateY: imageData.top\n      }, imageData))));\n      if (changed) {\n        this.output();\n      }\n    },\n    initCropBox: function initCropBox() {\n      var options = this.options,\n        canvasData = this.canvasData;\n      var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n      var autoCropArea = Number(options.autoCropArea) || 0.8;\n      var cropBoxData = {\n        width: canvasData.width,\n        height: canvasData.height\n      };\n      if (aspectRatio) {\n        if (canvasData.height * aspectRatio > canvasData.width) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n      this.cropBoxData = cropBoxData;\n      this.limitCropBox(true, true);\n\n      // Initialize auto crop area\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n\n      // The width/height of auto crop area must large than \"minWidth/Height\"\n      cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n      cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n      cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n      cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      this.initialCropBoxData = assign({}, cropBoxData);\n    },\n    limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n      var options = this.options,\n        containerData = this.containerData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData,\n        limited = this.limited;\n      var aspectRatio = options.aspectRatio;\n      if (sizeLimited) {\n        var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n        var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n        var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n        var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height;\n\n        // The min/maxCropBoxWidth/Height must be less than container's width/height\n        minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n        minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n        if (aspectRatio) {\n          if (minCropBoxWidth && minCropBoxHeight) {\n            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n              minCropBoxHeight = minCropBoxWidth / aspectRatio;\n            } else {\n              minCropBoxWidth = minCropBoxHeight * aspectRatio;\n            }\n          } else if (minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else if (minCropBoxHeight) {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n          } else {\n            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n          }\n        }\n\n        // The minWidth/Height must be less than maxWidth/Height\n        cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n        cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n        cropBoxData.maxWidth = maxCropBoxWidth;\n        cropBoxData.maxHeight = maxCropBoxHeight;\n      }\n      if (positionLimited) {\n        if (limited) {\n          cropBoxData.minLeft = Math.max(0, canvasData.left);\n          cropBoxData.minTop = Math.max(0, canvasData.top);\n          cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n          cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n        } else {\n          cropBoxData.minLeft = 0;\n          cropBoxData.minTop = 0;\n          cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n          cropBoxData.maxTop = containerData.height - cropBoxData.height;\n        }\n      }\n    },\n    renderCropBox: function renderCropBox() {\n      var options = this.options,\n        containerData = this.containerData,\n        cropBoxData = this.cropBoxData;\n      if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n        cropBoxData.left = cropBoxData.oldLeft;\n      }\n      if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n        cropBoxData.top = cropBoxData.oldTop;\n      }\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n      this.limitCropBox(false, true);\n      cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n      cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      if (options.movable && options.cropBoxMovable) {\n        // Turn to move the canvas when the crop box is equal to the container\n        setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n      }\n      setStyle(this.cropBox, assign({\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      }, getTransforms({\n        translateX: cropBoxData.left,\n        translateY: cropBoxData.top\n      })));\n      if (this.cropped && this.limited) {\n        this.limitCanvas(true, true);\n      }\n      if (!this.disabled) {\n        this.output();\n      }\n    },\n    output: function output() {\n      this.preview();\n      dispatchEvent(this.element, EVENT_CROP, this.getData());\n    }\n  };\n\n  var preview = {\n    initPreview: function initPreview() {\n      var element = this.element,\n        crossOrigin = this.crossOrigin;\n      var preview = this.options.preview;\n      var url = crossOrigin ? this.crossOriginUrl : this.url;\n      var alt = element.alt || 'The image to preview';\n      var image = document.createElement('img');\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n      image.src = url;\n      image.alt = alt;\n      this.viewBox.appendChild(image);\n      this.viewBoxImage = image;\n      if (!preview) {\n        return;\n      }\n      var previews = preview;\n      if (typeof preview === 'string') {\n        previews = element.ownerDocument.querySelectorAll(preview);\n      } else if (preview.querySelector) {\n        previews = [preview];\n      }\n      this.previews = previews;\n      forEach(previews, function (el) {\n        var img = document.createElement('img');\n\n        // Save the original size for recover\n        setData(el, DATA_PREVIEW, {\n          width: el.offsetWidth,\n          height: el.offsetHeight,\n          html: el.innerHTML\n        });\n        if (crossOrigin) {\n          img.crossOrigin = crossOrigin;\n        }\n        img.src = url;\n        img.alt = alt;\n\n        /**\n         * Override img element styles\n         * Add `display:block` to avoid margin top issue\n         * Add `height:auto` to override `height` attribute on IE8\n         * (Occur only when margin-top <= -height)\n         */\n        img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n        el.innerHTML = '';\n        el.appendChild(img);\n      });\n    },\n    resetPreview: function resetPreview() {\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        setStyle(element, {\n          width: data.width,\n          height: data.height\n        });\n        element.innerHTML = data.html;\n        removeData(element, DATA_PREVIEW);\n      });\n    },\n    preview: function preview() {\n      var imageData = this.imageData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var cropBoxWidth = cropBoxData.width,\n        cropBoxHeight = cropBoxData.height;\n      var width = imageData.width,\n        height = imageData.height;\n      var left = cropBoxData.left - canvasData.left - imageData.left;\n      var top = cropBoxData.top - canvasData.top - imageData.top;\n      if (!this.cropped || this.disabled) {\n        return;\n      }\n      setStyle(this.viewBoxImage, assign({\n        width: width,\n        height: height\n      }, getTransforms(assign({\n        translateX: -left,\n        translateY: -top\n      }, imageData))));\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        var originalWidth = data.width;\n        var originalHeight = data.height;\n        var newWidth = originalWidth;\n        var newHeight = originalHeight;\n        var ratio = 1;\n        if (cropBoxWidth) {\n          ratio = originalWidth / cropBoxWidth;\n          newHeight = cropBoxHeight * ratio;\n        }\n        if (cropBoxHeight && newHeight > originalHeight) {\n          ratio = originalHeight / cropBoxHeight;\n          newWidth = cropBoxWidth * ratio;\n          newHeight = originalHeight;\n        }\n        setStyle(element, {\n          width: newWidth,\n          height: newHeight\n        });\n        setStyle(element.getElementsByTagName('img')[0], assign({\n          width: width * ratio,\n          height: height * ratio\n        }, getTransforms(assign({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, imageData))));\n      });\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var element = this.element,\n        options = this.options,\n        cropper = this.cropper;\n      if (isFunction(options.cropstart)) {\n        addListener(element, EVENT_CROP_START, options.cropstart);\n      }\n      if (isFunction(options.cropmove)) {\n        addListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n      if (isFunction(options.cropend)) {\n        addListener(element, EVENT_CROP_END, options.cropend);\n      }\n      if (isFunction(options.crop)) {\n        addListener(element, EVENT_CROP, options.crop);\n      }\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom);\n      }\n      addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleDragModeOnDblclick) {\n        addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n      addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n      addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n      if (options.responsive) {\n        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var element = this.element,\n        options = this.options,\n        cropper = this.cropper;\n      if (isFunction(options.cropstart)) {\n        removeListener(element, EVENT_CROP_START, options.cropstart);\n      }\n      if (isFunction(options.cropmove)) {\n        removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n      if (isFunction(options.cropend)) {\n        removeListener(element, EVENT_CROP_END, options.cropend);\n      }\n      if (isFunction(options.crop)) {\n        removeListener(element, EVENT_CROP, options.crop);\n      }\n      if (isFunction(options.zoom)) {\n        removeListener(element, EVENT_ZOOM, options.zoom);\n      }\n      removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(cropper, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleDragModeOnDblclick) {\n        removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n      }\n      removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n      removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n      if (options.responsive) {\n        removeListener(window, EVENT_RESIZE, this.onResize);\n      }\n    }\n  };\n\n  var handlers = {\n    resize: function resize() {\n      if (this.disabled) {\n        return;\n      }\n      var options = this.options,\n        container = this.container,\n        containerData = this.containerData;\n      var ratioX = container.offsetWidth / containerData.width;\n      var ratioY = container.offsetHeight / containerData.height;\n      var ratio = Math.abs(ratioX - 1) > Math.abs(ratioY - 1) ? ratioX : ratioY;\n\n      // Resize when width changed or height changed\n      if (ratio !== 1) {\n        var canvasData;\n        var cropBoxData;\n        if (options.restore) {\n          canvasData = this.getCanvasData();\n          cropBoxData = this.getCropBoxData();\n        }\n        this.render();\n        if (options.restore) {\n          this.setCanvasData(forEach(canvasData, function (n, i) {\n            canvasData[i] = n * ratio;\n          }));\n          this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n            cropBoxData[i] = n * ratio;\n          }));\n        }\n      }\n    },\n    dblclick: function dblclick() {\n      if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n        return;\n      }\n      this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n    },\n    wheel: function wheel(event) {\n      var _this = this;\n      var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n      var delta = 1;\n      if (this.disabled) {\n        return;\n      }\n      event.preventDefault();\n\n      // Limit wheel speed to prevent zoom too fast (#21)\n      if (this.wheeling) {\n        return;\n      }\n      this.wheeling = true;\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n      this.zoom(-delta * ratio, event);\n    },\n    cropStart: function cropStart(event) {\n      var buttons = event.buttons,\n        button = event.button;\n      if (this.disabled\n\n      // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && (\n      // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0\n\n      // Open context menu\n      || event.ctrlKey)) {\n        return;\n      }\n      var options = this.options,\n        pointers = this.pointers;\n      var action;\n      if (event.changedTouches) {\n        // Handle touch event\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        // Handle mouse event and pointer event\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n      if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n        action = ACTION_ZOOM;\n      } else {\n        action = getData(event.target, DATA_ACTION);\n      }\n      if (!REGEXP_ACTIONS.test(action)) {\n        return;\n      }\n      if (dispatchEvent(this.element, EVENT_CROP_START, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n\n      // This line is required for preventing page zooming in iOS browsers\n      event.preventDefault();\n      this.action = action;\n      this.cropping = false;\n      if (action === ACTION_CROP) {\n        this.cropping = true;\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n    },\n    cropMove: function cropMove(event) {\n      var action = this.action;\n      if (this.disabled || !action) {\n        return;\n      }\n      var pointers = this.pointers;\n      event.preventDefault();\n      if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          // The first parameter should not be undefined (#432)\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n      this.change(event);\n    },\n    cropEnd: function cropEnd(event) {\n      if (this.disabled) {\n        return;\n      }\n      var action = this.action,\n        pointers = this.pointers;\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          delete pointers[touch.identifier];\n        });\n      } else {\n        delete pointers[event.pointerId || 0];\n      }\n      if (!action) {\n        return;\n      }\n      event.preventDefault();\n      if (!Object.keys(pointers).length) {\n        this.action = '';\n      }\n      if (this.cropping) {\n        this.cropping = false;\n        toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n      }\n      dispatchEvent(this.element, EVENT_CROP_END, {\n        originalEvent: event,\n        action: action\n      });\n    }\n  };\n\n  var change = {\n    change: function change(event) {\n      var options = this.options,\n        canvasData = this.canvasData,\n        containerData = this.containerData,\n        cropBoxData = this.cropBoxData,\n        pointers = this.pointers;\n      var action = this.action;\n      var aspectRatio = options.aspectRatio;\n      var left = cropBoxData.left,\n        top = cropBoxData.top,\n        width = cropBoxData.width,\n        height = cropBoxData.height;\n      var right = left + width;\n      var bottom = top + height;\n      var minLeft = 0;\n      var minTop = 0;\n      var maxWidth = containerData.width;\n      var maxHeight = containerData.height;\n      var renderable = true;\n      var offset;\n\n      // Locking aspect ratio in \"free mode\" by holding shift key\n      if (!aspectRatio && event.shiftKey) {\n        aspectRatio = width && height ? width / height : 1;\n      }\n      if (this.limited) {\n        minLeft = cropBoxData.minLeft;\n        minTop = cropBoxData.minTop;\n        maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n        maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n      }\n      var pointer = pointers[Object.keys(pointers)[0]];\n      var range = {\n        x: pointer.endX - pointer.startX,\n        y: pointer.endY - pointer.startY\n      };\n      var check = function check(side) {\n        switch (side) {\n          case ACTION_EAST:\n            if (right + range.x > maxWidth) {\n              range.x = maxWidth - right;\n            }\n            break;\n          case ACTION_WEST:\n            if (left + range.x < minLeft) {\n              range.x = minLeft - left;\n            }\n            break;\n          case ACTION_NORTH:\n            if (top + range.y < minTop) {\n              range.y = minTop - top;\n            }\n            break;\n          case ACTION_SOUTH:\n            if (bottom + range.y > maxHeight) {\n              range.y = maxHeight - bottom;\n            }\n            break;\n        }\n      };\n      switch (action) {\n        // Move crop box\n        case ACTION_ALL:\n          left += range.x;\n          top += range.y;\n          break;\n\n        // Resize crop box\n        case ACTION_EAST:\n          if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_EAST);\n          width += range.x;\n          if (width < 0) {\n            action = ACTION_WEST;\n            width = -width;\n            left -= width;\n          }\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n          break;\n        case ACTION_NORTH:\n          if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n          if (height < 0) {\n            action = ACTION_SOUTH;\n            height = -height;\n            top -= height;\n          }\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n          break;\n        case ACTION_WEST:\n          if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n          if (width < 0) {\n            action = ACTION_EAST;\n            width = -width;\n            left -= width;\n          }\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n          break;\n        case ACTION_SOUTH:\n          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_SOUTH);\n          height += range.y;\n          if (height < 0) {\n            action = ACTION_NORTH;\n            height = -height;\n            top -= height;\n          }\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n          break;\n        case ACTION_NORTH_EAST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_EAST);\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_NORTH_WEST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n            left += cropBoxData.width - width;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_WEST);\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_SOUTH_WEST:\n          if (aspectRatio) {\n            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_WEST);\n            width -= range.x;\n            left += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_WEST);\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_SOUTH_EAST:\n          if (aspectRatio) {\n            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_EAST);\n            width += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_EAST);\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            top -= height;\n          }\n          break;\n\n        // Move canvas\n        case ACTION_MOVE:\n          this.move(range.x, range.y);\n          renderable = false;\n          break;\n\n        // Zoom canvas\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), event);\n          renderable = false;\n          break;\n\n        // Create crop box\n        case ACTION_CROP:\n          if (!range.x || !range.y) {\n            renderable = false;\n            break;\n          }\n          offset = getOffset(this.cropper);\n          left = pointer.startX - offset.left;\n          top = pointer.startY - offset.top;\n          width = cropBoxData.minWidth;\n          height = cropBoxData.minHeight;\n          if (range.x > 0) {\n            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n          } else if (range.x < 0) {\n            left -= width;\n            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n          }\n          if (range.y < 0) {\n            top -= height;\n          }\n\n          // Show the crop box if is hidden\n          if (!this.cropped) {\n            removeClass(this.cropBox, CLASS_HIDDEN);\n            this.cropped = true;\n            if (this.limited) {\n              this.limitCropBox(true, true);\n            }\n          }\n          break;\n      }\n      if (renderable) {\n        cropBoxData.width = width;\n        cropBoxData.height = height;\n        cropBoxData.left = left;\n        cropBoxData.top = top;\n        this.action = action;\n        this.renderCropBox();\n      }\n\n      // Override\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    }\n  };\n\n  var methods = {\n    // Show the crop box manually\n    crop: function crop() {\n      if (this.ready && !this.cropped && !this.disabled) {\n        this.cropped = true;\n        this.limitCropBox(true, true);\n        if (this.options.modal) {\n          addClass(this.dragBox, CLASS_MODAL);\n        }\n        removeClass(this.cropBox, CLASS_HIDDEN);\n        this.setCropBoxData(this.initialCropBoxData);\n      }\n      return this;\n    },\n    // Reset the image and crop box to their initial states\n    reset: function reset() {\n      if (this.ready && !this.disabled) {\n        this.imageData = assign({}, this.initialImageData);\n        this.canvasData = assign({}, this.initialCanvasData);\n        this.cropBoxData = assign({}, this.initialCropBoxData);\n        this.renderCanvas();\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n      return this;\n    },\n    // Clear the crop box\n    clear: function clear() {\n      if (this.cropped && !this.disabled) {\n        assign(this.cropBoxData, {\n          left: 0,\n          top: 0,\n          width: 0,\n          height: 0\n        });\n        this.cropped = false;\n        this.renderCropBox();\n        this.limitCanvas(true, true);\n\n        // Render canvas after crop box rendered\n        this.renderCanvas();\n        removeClass(this.dragBox, CLASS_MODAL);\n        addClass(this.cropBox, CLASS_HIDDEN);\n      }\n      return this;\n    },\n    /**\n     * Replace the image's src and rebuild the cropper\n     * @param {string} url - The new URL.\n     * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n     * @returns {Cropper} this\n     */\n    replace: function replace(url) {\n      var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!this.disabled && url) {\n        if (this.isImg) {\n          this.element.src = url;\n        }\n        if (hasSameSize) {\n          this.url = url;\n          this.image.src = url;\n          if (this.ready) {\n            this.viewBoxImage.src = url;\n            forEach(this.previews, function (element) {\n              element.getElementsByTagName('img')[0].src = url;\n            });\n          }\n        } else {\n          if (this.isImg) {\n            this.replaced = true;\n          }\n          this.options.data = null;\n          this.uncreate();\n          this.load(url);\n        }\n      }\n      return this;\n    },\n    // Enable (unfreeze) the cropper\n    enable: function enable() {\n      if (this.ready && this.disabled) {\n        this.disabled = false;\n        removeClass(this.cropper, CLASS_DISABLED);\n      }\n      return this;\n    },\n    // Disable (freeze) the cropper\n    disable: function disable() {\n      if (this.ready && !this.disabled) {\n        this.disabled = true;\n        addClass(this.cropper, CLASS_DISABLED);\n      }\n      return this;\n    },\n    /**\n     * Destroy the cropper and remove the instance from the image\n     * @returns {Cropper} this\n     */\n    destroy: function destroy() {\n      var element = this.element;\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n      element[NAMESPACE] = undefined;\n      if (this.isImg && this.replaced) {\n        element.src = this.originalUrl;\n      }\n      this.uncreate();\n      return this;\n    },\n    /**\n     * Move the canvas with relative offsets\n     * @param {number} offsetX - The relative offset distance on the x-axis.\n     * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n     * @returns {Cropper} this\n     */\n    move: function move(offsetX) {\n      var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n      var _this$canvasData = this.canvasData,\n        left = _this$canvasData.left,\n        top = _this$canvasData.top;\n      return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n    },\n    /**\n     * Move the canvas to an absolute point\n     * @param {number} x - The x-axis coordinate.\n     * @param {number} [y=x] - The y-axis coordinate.\n     * @returns {Cropper} this\n     */\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var canvasData = this.canvasData;\n      var changed = false;\n      x = Number(x);\n      y = Number(y);\n      if (this.ready && !this.disabled && this.options.movable) {\n        if (isNumber(x)) {\n          canvasData.left = x;\n          changed = true;\n        }\n        if (isNumber(y)) {\n          canvasData.top = y;\n          changed = true;\n        }\n        if (changed) {\n          this.renderCanvas(true);\n        }\n      }\n      return this;\n    },\n    /**\n     * Zoom the canvas with a relative ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoom: function zoom(ratio, _originalEvent) {\n      var canvasData = this.canvasData;\n      ratio = Number(ratio);\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n      return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n    },\n    /**\n     * Zoom the canvas to an absolute ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Object} pivot - The zoom pivot point coordinate.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n      var options = this.options,\n        canvasData = this.canvasData;\n      var width = canvasData.width,\n        height = canvasData.height,\n        naturalWidth = canvasData.naturalWidth,\n        naturalHeight = canvasData.naturalHeight;\n      ratio = Number(ratio);\n      if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n        if (dispatchEvent(this.element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: width / naturalWidth,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n        if (_originalEvent) {\n          var pointers = this.pointers;\n          var offset = getOffset(this.cropper);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          };\n\n          // Zoom from the triggering point of the event\n          canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n        } else {\n          // Zoom from the center of the canvas\n          canvasData.left -= (newWidth - width) / 2;\n          canvasData.top -= (newHeight - height) / 2;\n        }\n        canvasData.width = newWidth;\n        canvasData.height = newHeight;\n        this.renderCanvas(true);\n      }\n      return this;\n    },\n    /**\n     * Rotate the canvas with a relative degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotate: function rotate(degree) {\n      return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n    },\n    /**\n     * Rotate the canvas to an absolute degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotateTo: function rotateTo(degree) {\n      degree = Number(degree);\n      if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n        this.imageData.rotate = degree % 360;\n        this.renderCanvas(true, true);\n      }\n      return this;\n    },\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Cropper} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      var scaleY = this.imageData.scaleY;\n      return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n    },\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      var scaleX = this.imageData.scaleX;\n      return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n    },\n    /**\n     * Scale the image\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var imageData = this.imageData;\n      var transformed = false;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n      if (this.ready && !this.disabled && this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          transformed = true;\n        }\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          transformed = true;\n        }\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n      }\n      return this;\n    },\n    /**\n     * Get the cropped area position and size data (base on the original image)\n     * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n     * @returns {Object} The result cropped data.\n     */\n    getData: function getData() {\n      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var options = this.options,\n        imageData = this.imageData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var data;\n      if (this.ready && this.cropped) {\n        data = {\n          x: cropBoxData.left - canvasData.left,\n          y: cropBoxData.top - canvasData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n        var ratio = imageData.width / imageData.naturalWidth;\n        forEach(data, function (n, i) {\n          data[i] = n / ratio;\n        });\n        if (rounded) {\n          // In case rounding off leads to extra 1px in right or bottom border\n          // we should round the top-left corner and the dimension (#343).\n          var bottom = Math.round(data.y + data.height);\n          var right = Math.round(data.x + data.width);\n          data.x = Math.round(data.x);\n          data.y = Math.round(data.y);\n          data.width = right - data.x;\n          data.height = bottom - data.y;\n        }\n      } else {\n        data = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      if (options.rotatable) {\n        data.rotate = imageData.rotate || 0;\n      }\n      if (options.scalable) {\n        data.scaleX = imageData.scaleX || 1;\n        data.scaleY = imageData.scaleY || 1;\n      }\n      return data;\n    },\n    /**\n     * Set the cropped area position and size with new data\n     * @param {Object} data - The new data.\n     * @returns {Cropper} this\n     */\n    setData: function setData(data) {\n      var options = this.options,\n        imageData = this.imageData,\n        canvasData = this.canvasData;\n      var cropBoxData = {};\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        var transformed = false;\n        if (options.rotatable) {\n          if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n            imageData.rotate = data.rotate;\n            transformed = true;\n          }\n        }\n        if (options.scalable) {\n          if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n            imageData.scaleX = data.scaleX;\n            transformed = true;\n          }\n          if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n            imageData.scaleY = data.scaleY;\n            transformed = true;\n          }\n        }\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n        var ratio = imageData.width / imageData.naturalWidth;\n        if (isNumber(data.x)) {\n          cropBoxData.left = data.x * ratio + canvasData.left;\n        }\n        if (isNumber(data.y)) {\n          cropBoxData.top = data.y * ratio + canvasData.top;\n        }\n        if (isNumber(data.width)) {\n          cropBoxData.width = data.width * ratio;\n        }\n        if (isNumber(data.height)) {\n          cropBoxData.height = data.height * ratio;\n        }\n        this.setCropBoxData(cropBoxData);\n      }\n      return this;\n    },\n    /**\n     * Get the container size data.\n     * @returns {Object} The result container data.\n     */\n    getContainerData: function getContainerData() {\n      return this.ready ? assign({}, this.containerData) : {};\n    },\n    /**\n     * Get the image position and size data.\n     * @returns {Object} The result image data.\n     */\n    getImageData: function getImageData() {\n      return this.sized ? assign({}, this.imageData) : {};\n    },\n    /**\n     * Get the canvas position and size data.\n     * @returns {Object} The result canvas data.\n     */\n    getCanvasData: function getCanvasData() {\n      var canvasData = this.canvasData;\n      var data = {};\n      if (this.ready) {\n        forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n          data[n] = canvasData[n];\n        });\n      }\n      return data;\n    },\n    /**\n     * Set the canvas position and size with new data.\n     * @param {Object} data - The new canvas data.\n     * @returns {Cropper} this\n     */\n    setCanvasData: function setCanvasData(data) {\n      var canvasData = this.canvasData;\n      var aspectRatio = canvasData.aspectRatio;\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          canvasData.left = data.left;\n        }\n        if (isNumber(data.top)) {\n          canvasData.top = data.top;\n        }\n        if (isNumber(data.width)) {\n          canvasData.width = data.width;\n          canvasData.height = data.width / aspectRatio;\n        } else if (isNumber(data.height)) {\n          canvasData.height = data.height;\n          canvasData.width = data.height * aspectRatio;\n        }\n        this.renderCanvas(true);\n      }\n      return this;\n    },\n    /**\n     * Get the crop box position and size data.\n     * @returns {Object} The result crop box data.\n     */\n    getCropBoxData: function getCropBoxData() {\n      var cropBoxData = this.cropBoxData;\n      var data;\n      if (this.ready && this.cropped) {\n        data = {\n          left: cropBoxData.left,\n          top: cropBoxData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n      }\n      return data || {};\n    },\n    /**\n     * Set the crop box position and size with new data.\n     * @param {Object} data - The new crop box data.\n     * @returns {Cropper} this\n     */\n    setCropBoxData: function setCropBoxData(data) {\n      var cropBoxData = this.cropBoxData;\n      var aspectRatio = this.options.aspectRatio;\n      var widthChanged;\n      var heightChanged;\n      if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          cropBoxData.left = data.left;\n        }\n        if (isNumber(data.top)) {\n          cropBoxData.top = data.top;\n        }\n        if (isNumber(data.width) && data.width !== cropBoxData.width) {\n          widthChanged = true;\n          cropBoxData.width = data.width;\n        }\n        if (isNumber(data.height) && data.height !== cropBoxData.height) {\n          heightChanged = true;\n          cropBoxData.height = data.height;\n        }\n        if (aspectRatio) {\n          if (widthChanged) {\n            cropBoxData.height = cropBoxData.width / aspectRatio;\n          } else if (heightChanged) {\n            cropBoxData.width = cropBoxData.height * aspectRatio;\n          }\n        }\n        this.renderCropBox();\n      }\n      return this;\n    },\n    /**\n     * Get a canvas drawn the cropped image.\n     * @param {Object} [options={}] - The config options.\n     * @returns {HTMLCanvasElement} - The result canvas.\n     */\n    getCroppedCanvas: function getCroppedCanvas() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!this.ready || !window.HTMLCanvasElement) {\n        return null;\n      }\n      var canvasData = this.canvasData;\n      var source = getSourceCanvas(this.image, this.imageData, canvasData, options);\n\n      // Returns the source canvas if it is not cropped.\n      if (!this.cropped) {\n        return source;\n      }\n      var _this$getData = this.getData(options.rounded),\n        initialX = _this$getData.x,\n        initialY = _this$getData.y,\n        initialWidth = _this$getData.width,\n        initialHeight = _this$getData.height;\n      var ratio = source.width / Math.floor(canvasData.naturalWidth);\n      if (ratio !== 1) {\n        initialX *= ratio;\n        initialY *= ratio;\n        initialWidth *= ratio;\n        initialHeight *= ratio;\n      }\n      var aspectRatio = initialWidth / initialHeight;\n      var maxSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.maxWidth || Infinity,\n        height: options.maxHeight || Infinity\n      });\n      var minSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.minWidth || 0,\n        height: options.minHeight || 0\n      }, 'cover');\n      var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: options.width || (ratio !== 1 ? source.width : initialWidth),\n          height: options.height || (ratio !== 1 ? source.height : initialHeight)\n        }),\n        width = _getAdjustedSizes.width,\n        height = _getAdjustedSizes.height;\n      width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n      height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = normalizeDecimalNumber(width);\n      canvas.height = normalizeDecimalNumber(height);\n      context.fillStyle = options.fillColor || 'transparent';\n      context.fillRect(0, 0, width, height);\n      var _options$imageSmoothi = options.imageSmoothingEnabled,\n        imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n        imageSmoothingQuality = options.imageSmoothingQuality;\n      context.imageSmoothingEnabled = imageSmoothingEnabled;\n      if (imageSmoothingQuality) {\n        context.imageSmoothingQuality = imageSmoothingQuality;\n      }\n\n      // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n      var sourceWidth = source.width;\n      var sourceHeight = source.height;\n\n      // Source canvas parameters\n      var srcX = initialX;\n      var srcY = initialY;\n      var srcWidth;\n      var srcHeight;\n\n      // Destination canvas parameters\n      var dstX;\n      var dstY;\n      var dstWidth;\n      var dstHeight;\n      if (srcX <= -initialWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n        dstWidth = srcWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n        dstWidth = srcWidth;\n      }\n      if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n        dstHeight = srcHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n        dstHeight = srcHeight;\n      }\n      var params = [srcX, srcY, srcWidth, srcHeight];\n\n      // Avoid \"IndexSizeError\"\n      if (dstWidth > 0 && dstHeight > 0) {\n        var scale = width / initialWidth;\n        params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n      }\n\n      // All the numerical parameters should be integer for `drawImage`\n      // https://github.com/fengyuanchen/cropper/issues/476\n      context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n        return Math.floor(normalizeDecimalNumber(param));\n      }))));\n      return canvas;\n    },\n    /**\n     * Change the aspect ratio of the crop box.\n     * @param {number} aspectRatio - The new aspect ratio.\n     * @returns {Cropper} this\n     */\n    setAspectRatio: function setAspectRatio(aspectRatio) {\n      var options = this.options;\n      if (!this.disabled && !isUndefined(aspectRatio)) {\n        // 0 -> NaN\n        options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n        if (this.ready) {\n          this.initCropBox();\n          if (this.cropped) {\n            this.renderCropBox();\n          }\n        }\n      }\n      return this;\n    },\n    /**\n     * Change the drag mode.\n     * @param {string} mode - The new drag mode.\n     * @returns {Cropper} this\n     */\n    setDragMode: function setDragMode(mode) {\n      var options = this.options,\n        dragBox = this.dragBox,\n        face = this.face;\n      if (this.ready && !this.disabled) {\n        var croppable = mode === DRAG_MODE_CROP;\n        var movable = options.movable && mode === DRAG_MODE_MOVE;\n        mode = croppable || movable ? mode : DRAG_MODE_NONE;\n        options.dragMode = mode;\n        setData(dragBox, DATA_ACTION, mode);\n        toggleClass(dragBox, CLASS_CROP, croppable);\n        toggleClass(dragBox, CLASS_MOVE, movable);\n        if (!options.cropBoxMovable) {\n          // Sync drag mode to crop box when it is not movable\n          setData(face, DATA_ACTION, mode);\n          toggleClass(face, CLASS_CROP, croppable);\n          toggleClass(face, CLASS_MOVE, movable);\n        }\n      }\n      return this;\n    }\n  };\n\n  var AnotherCropper = WINDOW.Cropper;\n  var Cropper = /*#__PURE__*/function () {\n    /**\n     * Create a new Cropper.\n     * @param {Element} element - The target element for cropping.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Cropper(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      _classCallCheck(this, Cropper);\n      if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n        throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n      }\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.cropped = false;\n      this.disabled = false;\n      this.pointers = {};\n      this.ready = false;\n      this.reloading = false;\n      this.replaced = false;\n      this.sized = false;\n      this.sizing = false;\n      this.init();\n    }\n    return _createClass(Cropper, [{\n      key: \"init\",\n      value: function init() {\n        var element = this.element;\n        var tagName = element.tagName.toLowerCase();\n        var url;\n        if (element[NAMESPACE]) {\n          return;\n        }\n        element[NAMESPACE] = this;\n        if (tagName === 'img') {\n          this.isImg = true;\n\n          // e.g.: \"img/picture.jpg\"\n          url = element.getAttribute('src') || '';\n          this.originalUrl = url;\n\n          // Stop when it's a blank image\n          if (!url) {\n            return;\n          }\n\n          // e.g.: \"https://example.com/img/picture.jpg\"\n          url = element.src;\n        } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n          url = element.toDataURL();\n        }\n        this.load(url);\n      }\n    }, {\n      key: \"load\",\n      value: function load(url) {\n        var _this = this;\n        if (!url) {\n          return;\n        }\n        this.url = url;\n        this.imageData = {};\n        var element = this.element,\n          options = this.options;\n        if (!options.rotatable && !options.scalable) {\n          options.checkOrientation = false;\n        }\n\n        // Only IE10+ supports Typed Arrays\n        if (!options.checkOrientation || !window.ArrayBuffer) {\n          this.clone();\n          return;\n        }\n\n        // Detect the mime type of the image directly if it is a Data URL\n        if (REGEXP_DATA_URL.test(url)) {\n          // Read ArrayBuffer from Data URL of JPEG images directly for better performance\n          if (REGEXP_DATA_URL_JPEG.test(url)) {\n            this.read(dataURLToArrayBuffer(url));\n          } else {\n            // Only a JPEG image may contains Exif Orientation information,\n            // the rest types of Data URLs are not necessary to check orientation at all.\n            this.clone();\n          }\n          return;\n        }\n\n        // 1. Detect the mime type of the image by a XMLHttpRequest.\n        // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.\n        var xhr = new XMLHttpRequest();\n        var clone = this.clone.bind(this);\n        this.reloading = true;\n        this.xhr = xhr;\n\n        // 1. Cross origin requests are only supported for protocol schemes:\n        // http, https, data, chrome, chrome-extension.\n        // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy\n        // in some browsers as IE11 and Safari.\n        xhr.onabort = clone;\n        xhr.onerror = clone;\n        xhr.ontimeout = clone;\n        xhr.onprogress = function () {\n          // Abort the request directly if it not a JPEG image for better performance\n          if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n            xhr.abort();\n          }\n        };\n        xhr.onload = function () {\n          _this.read(xhr.response);\n        };\n        xhr.onloadend = function () {\n          _this.reloading = false;\n          _this.xhr = null;\n        };\n\n        // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n        if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n          url = addTimestamp(url);\n        }\n\n        // The third parameter is required for avoiding side-effect (#682)\n        xhr.open('GET', url, true);\n        xhr.responseType = 'arraybuffer';\n        xhr.withCredentials = element.crossOrigin === 'use-credentials';\n        xhr.send();\n      }\n    }, {\n      key: \"read\",\n      value: function read(arrayBuffer) {\n        var options = this.options,\n          imageData = this.imageData;\n\n        // Reset the orientation value to its default value 1\n        // as some iOS browsers will render image with its orientation\n        var orientation = resetAndGetOrientation(arrayBuffer);\n        var rotate = 0;\n        var scaleX = 1;\n        var scaleY = 1;\n        if (orientation > 1) {\n          // Generate a new URL which has the default orientation value\n          this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n          var _parseOrientation = parseOrientation(orientation);\n          rotate = _parseOrientation.rotate;\n          scaleX = _parseOrientation.scaleX;\n          scaleY = _parseOrientation.scaleY;\n        }\n        if (options.rotatable) {\n          imageData.rotate = rotate;\n        }\n        if (options.scalable) {\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n        }\n        this.clone();\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        var element = this.element,\n          url = this.url;\n        var crossOrigin = element.crossOrigin;\n        var crossOriginUrl = url;\n        if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n          if (!crossOrigin) {\n            crossOrigin = 'anonymous';\n          }\n\n          // Bust cache when there is not a \"crossOrigin\" property (#519)\n          crossOriginUrl = addTimestamp(url);\n        }\n        this.crossOrigin = crossOrigin;\n        this.crossOriginUrl = crossOriginUrl;\n        var image = document.createElement('img');\n        if (crossOrigin) {\n          image.crossOrigin = crossOrigin;\n        }\n        image.src = crossOriginUrl || url;\n        image.alt = element.alt || 'The image to crop';\n        this.image = image;\n        image.onload = this.start.bind(this);\n        image.onerror = this.stop.bind(this);\n        addClass(image, CLASS_HIDE);\n        element.parentNode.insertBefore(image, element.nextSibling);\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this2 = this;\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        this.sizing = true;\n\n        // Match all browsers that use WebKit as the layout engine in iOS devices,\n        // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n        var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);\n        var done = function done(naturalWidth, naturalHeight) {\n          assign(_this2.imageData, {\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            aspectRatio: naturalWidth / naturalHeight\n          });\n          _this2.initialImageData = assign({}, _this2.imageData);\n          _this2.sizing = false;\n          _this2.sized = true;\n          _this2.build();\n        };\n\n        // Most modern browsers (excepts iOS WebKit)\n        if (image.naturalWidth && !isIOSWebKit) {\n          done(image.naturalWidth, image.naturalHeight);\n          return;\n        }\n        var sizingImage = document.createElement('img');\n        var body = document.body || document.documentElement;\n        this.sizingImage = sizingImage;\n        sizingImage.onload = function () {\n          done(sizingImage.width, sizingImage.height);\n          if (!isIOSWebKit) {\n            body.removeChild(sizingImage);\n          }\n        };\n        sizingImage.src = image.src;\n\n        // iOS WebKit will convert the image automatically\n        // with its orientation once append it into DOM (#279)\n        if (!isIOSWebKit) {\n          sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n          body.appendChild(sizingImage);\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (!this.sized || this.ready) {\n          return;\n        }\n        var element = this.element,\n          options = this.options,\n          image = this.image;\n\n        // Create cropper elements\n        var container = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n        var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n        var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n        this.container = container;\n        this.cropper = cropper;\n        this.canvas = canvas;\n        this.dragBox = dragBox;\n        this.cropBox = cropBox;\n        this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n        this.face = face;\n        canvas.appendChild(image);\n\n        // Hide the original image\n        addClass(element, CLASS_HIDDEN);\n\n        // Inserts the cropper after to the current image\n        container.insertBefore(cropper, element.nextSibling);\n\n        // Show the hidden image\n        removeClass(image, CLASS_HIDE);\n        this.initPreview();\n        this.bind();\n        options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n        options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n        options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n        addClass(cropBox, CLASS_HIDDEN);\n        if (!options.guides) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n        }\n        if (!options.center) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n        }\n        if (options.background) {\n          addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n        }\n        if (!options.highlight) {\n          addClass(face, CLASS_INVISIBLE);\n        }\n        if (options.cropBoxMovable) {\n          addClass(face, CLASS_MOVE);\n          setData(face, DATA_ACTION, ACTION_ALL);\n        }\n        if (!options.cropBoxResizable) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n        }\n        this.render();\n        this.ready = true;\n        this.setDragMode(options.dragMode);\n        if (options.autoCrop) {\n          this.crop();\n        }\n        this.setData(options.data);\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n        dispatchEvent(element, EVENT_READY);\n      }\n    }, {\n      key: \"unbuild\",\n      value: function unbuild() {\n        if (!this.ready) {\n          return;\n        }\n        this.ready = false;\n        this.unbind();\n        this.resetPreview();\n        var parentNode = this.cropper.parentNode;\n        if (parentNode) {\n          parentNode.removeChild(this.cropper);\n        }\n        removeClass(this.element, CLASS_HIDDEN);\n      }\n    }, {\n      key: \"uncreate\",\n      value: function uncreate() {\n        if (this.ready) {\n          this.unbuild();\n          this.ready = false;\n          this.cropped = false;\n        } else if (this.sizing) {\n          this.sizingImage.onload = null;\n          this.sizing = false;\n          this.sized = false;\n        } else if (this.reloading) {\n          this.xhr.onabort = null;\n          this.xhr.abort();\n        } else if (this.image) {\n          this.stop();\n        }\n      }\n\n      /**\n       * Get the no conflict cropper class.\n       * @returns {Cropper} The cropper class.\n       */\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Cropper = AnotherCropper;\n        return Cropper;\n      }\n\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n  }();\n  assign(Cropper.prototype, render, preview, events, handlers, change, methods);\n\n  return Cropper;\n\n}));\n","import e,{useRef as r,useEffect as o}from\"react\";import t from\"cropperjs\";var n=function(){return n=Object.assign||function(e){for(var r,o=1,t=arguments.length;o<t;o++)for(var n in r=arguments[o])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e},n.apply(this,arguments)};function a(e,r){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]])}return o}var c=[\"aspectRatio\",\"autoCrop\",\"autoCropArea\",\"background\",\"center\",\"checkCrossOrigin\",\"checkOrientation\",\"cropBoxMovable\",\"cropBoxResizable\",\"data\",\"dragMode\",\"guides\",\"highlight\",\"initialAspectRatio\",\"minCanvasHeight\",\"minCanvasWidth\",\"minContainerHeight\",\"minContainerWidth\",\"minCropBoxHeight\",\"minCropBoxWidth\",\"modal\",\"movable\",\"preview\",\"responsive\",\"restore\",\"rotatable\",\"scalable\",\"toggleDragModeOnDblclick\",\"viewMode\",\"wheelZoomRatio\",\"zoomOnTouch\",\"zoomOnWheel\",\"zoomable\",\"cropstart\",\"cropmove\",\"cropend\",\"crop\",\"zoom\",\"ready\"],i={opacity:0,maxWidth:\"100%\"},l=e.forwardRef((function(l,s){var u=a(l,[]),p=u.dragMode,d=void 0===p?\"crop\":p,v=u.src,f=u.style,m=u.className,g=u.crossOrigin,y=u.scaleX,b=u.scaleY,h=u.enable,O=u.zoomTo,T=u.rotateTo,z=u.alt,C=void 0===z?\"picture\":z,w=u.ready,x=u.onInitialized,j=a(u,[\"dragMode\",\"src\",\"style\",\"className\",\"crossOrigin\",\"scaleX\",\"scaleY\",\"enable\",\"zoomTo\",\"rotateTo\",\"alt\",\"ready\",\"onInitialized\"]),M={scaleY:b,scaleX:y,enable:h,zoomTo:O,rotateTo:T},E=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];var n=r(null);return e.useEffect((function(){o.forEach((function(e){e&&(\"function\"==typeof e?e(n.current):e.current=n.current)}))}),[o]),n}(s,r(null));o((function(){var e;(null===(e=E.current)||void 0===e?void 0:e.cropper)&&\"number\"==typeof O&&E.current.cropper.zoomTo(O)}),[u.zoomTo]),o((function(){var e;(null===(e=E.current)||void 0===e?void 0:e.cropper)&&void 0!==v&&E.current.cropper.reset().clear().replace(v)}),[v]),o((function(){if(null!==E.current){var e=new t(E.current,n(n({dragMode:d},j),{ready:function(e){null!==e.currentTarget&&function(e,r){void 0===r&&(r={});var o=r.enable,t=void 0===o||o,n=r.scaleX,a=void 0===n?1:n,c=r.scaleY,i=void 0===c?1:c,l=r.zoomTo,s=void 0===l?0:l,u=r.rotateTo;t?e.enable():e.disable(),e.scaleX(a),e.scaleY(i),void 0!==u&&e.rotateTo(u),s>0&&e.zoomTo(s)}(e.currentTarget.cropper,M),w&&w(e)}}));x&&x(e)}return function(){var e,r;null===(r=null===(e=E.current)||void 0===e?void 0:e.cropper)||void 0===r||r.destroy()}}),[E]);var R=function(e){return c.reduce((function(e,r){var o=e,t=r;return o[t],a(o,[\"symbol\"==typeof t?t:t+\"\"])}),e)}(n(n({},j),{crossOrigin:g,src:v,alt:C}));return e.createElement(\"div\",{style:f,className:m},e.createElement(\"img\",n({},R,{style:i,ref:E})))}));export{l as Cropper,l as default};\n","function _classPrivateFieldBase(e, t) {\n  if (!{}.hasOwnProperty.call(e, t)) throw new TypeError(\"attempted to use private field on non-instance\");\n  return e;\n}\nexport { _classPrivateFieldBase as default };","var id = 0;\nfunction _classPrivateFieldKey(e) {\n  return \"__private_\" + id++ + \"_\" + e;\n}\nexport { _classPrivateFieldKey as default };","export function getObjectViewResultToArray<T extends ioBroker.Object>(\n    doc:\n        | {\n              rows: ioBroker.GetObjectViewItem<T>[];\n          }\n        | undefined,\n): T[] {\n    return doc?.rows.map(item => item.value).filter((val): val is T => !!val) ?? [];\n}\n\n/** Makes sure that a host id starts with \"system.host.\" */\nexport function normalizeHostId(host: string): string {\n    if (!host?.startsWith('system.host.')) {\n        host = `system.host.${host}`;\n    }\n    return host;\n}\n\nexport function objectIdToHostname(id: string): string {\n    if (id?.startsWith('system.host.')) {\n        id = id.substring('system.host.'.length);\n    }\n    return id;\n}\n\n/**\n * Creates a promise that waits for the specified time and then resolves\n */\nexport function wait(ms: number): Promise<void> {\n    return new Promise<void>(resolve => {\n        setTimeout(resolve, ms);\n    });\n}\n\n/** Converts ioB pattern into regex */\nexport function pattern2RegEx(pattern: string): string {\n    pattern = (pattern || '').toString();\n\n    const startsWithWildcard = pattern[0] === '*';\n    const endsWithWildcard = pattern[pattern.length - 1] === '*';\n\n    pattern = pattern.replace(/[-/\\\\^$+?.()|[\\]{}]/g, '\\\\$&').replace(/\\*/g, '.*');\n\n    return (startsWithWildcard ? '' : '^') + pattern + (endsWithWildcard ? '' : '$');\n}\n","import type { ConnectionProps, LogMessage } from './ConnectionProps.js';\nimport { createDeferredPromise } from './DeferredPromise.js';\nimport type { EmitEventHandler, ListenEventHandler, SocketClient } from './SocketClient.js';\nimport { getObjectViewResultToArray, normalizeHostId, pattern2RegEx, wait } from './tools.js';\n\n/** Possible progress states. */\nexport enum PROGRESS {\n    /** The socket is connecting. */\n    CONNECTING = 0,\n    /** The socket is successfully connected. */\n    CONNECTED = 1,\n    /** All objects are loaded. */\n    OBJECTS_LOADED = 2,\n    /** The socket is ready for use. */\n    READY = 3,\n}\n\nexport enum ERRORS {\n    PERMISSION_ERROR = 'permissionError',\n    NOT_CONNECTED = 'notConnectedError',\n    TIMEOUT = 'timeout',\n    NOT_ADMIN = 'Allowed only in admin',\n    NOT_SUPPORTED = 'Not supported',\n}\n\n/** @deprecated Use {@link ERRORS.PERMISSION_ERROR} instead */\nexport const PERMISSION_ERROR = ERRORS.PERMISSION_ERROR;\n/** @deprecated Use {@link ERRORS.NOT_CONNECTED} instead */\nexport const NOT_CONNECTED = ERRORS.NOT_CONNECTED;\n\n// Options to use for the backend request wrapper\n/**\n * @internal\n */\nexport interface RequestOptions<T> {\n    /** The key that is used to cache the results for later requests of the same kind */\n    cacheKey?: string;\n    /** Used to bypass the cache */\n    forceUpdate?: boolean;\n    /** Can be used to identify the request method in error messages */\n    requestName?: string;\n    /**\n     * The timeout in milliseconds after which the call will reject with a timeout error.\n     * If no timeout is given, the default is used. Set this to `false` to explicitly disable the timeout.\n     */\n    commandTimeout?: number | false;\n    /** Will be called when the timeout elapses */\n    onTimeout?: () => void;\n    /** Whether the call should only be allowed in the admin adapter */\n    requireAdmin?: boolean;\n    /** Require certain features to be supported for this call */\n    requireFeatures?: string[];\n    /** The function that does the actual work */\n    executor: (\n        resolve: (value: T | PromiseLike<T> | Promise<T>) => void,\n        reject: (reason?: any) => void,\n        /** Can be used to check in the executor whether the request has timed out and/or stop it from timing out */\n        timeout: Readonly<{ elapsed: boolean; clearTimeout: () => void }>,\n    ) => void | Promise<void>;\n}\n\nexport type BinaryStateChangeHandler = (id: string, base64: string | null) => void;\n\nexport type FileChangeHandler = (\n    id: string,\n    fileName: string,\n    size: number | null, // null if deleted\n) => void;\n\nexport interface OldObject {\n    _id: string;\n    type: string;\n}\n\nexport type ObjectChangeHandler = (\n    id: string,\n    obj: ioBroker.Object | null | undefined,\n    oldObj?: OldObject,\n) => void | Promise<void>;\n\nexport type InstanceMessageCallback = (data: any, sourceInstance: string, messageType: string) => void | Promise<void>;\n\nexport type InstanceSubscribe = {\n    messageType: string;\n    callback: InstanceMessageCallback;\n};\n\nconst ADAPTERS = ['material', 'echarts', 'vis'];\n\nexport class Connection<\n    CustomListenEvents extends Record<keyof CustomListenEvents, ListenEventHandler> = Record<string, never>,\n    CustomEmitEvents extends Record<keyof CustomEmitEvents, EmitEventHandler> = Record<string, never>,\n> {\n    constructor(props: Partial<ConnectionProps>) {\n        this.props = this.applyDefaultProps(props);\n\n        this.waitForSocketLib()\n            .then(() => this.startSocket())\n            .catch(e => {\n                alert(`Socket connection could not be initialized: ${e}`);\n            });\n    }\n\n    private applyDefaultProps(props: Partial<ConnectionProps>): ConnectionProps {\n        return {\n            ...props,\n            // Define default props that always need to be set\n            protocol: props.protocol || window.location.protocol,\n            host: props.host || window.location.hostname,\n            port: props.port || (window.location.port === '3000' ? 8081 : window.location.port),\n            ioTimeout: Math.max(props.ioTimeout || 20000, 20000),\n            cmdTimeout: Math.max(props.cmdTimeout || 5000, 5000),\n            admin5only: props.admin5only || false,\n            autoSubscribes: props.autoSubscribes ?? [],\n            autoSubscribeLog: props.autoSubscribeLog ?? false,\n            doNotLoadACL: props.doNotLoadACL ?? true,\n            doNotLoadAllObjects: props.doNotLoadAllObjects ?? true,\n        };\n    }\n\n    private readonly props: ConnectionProps;\n\n    private ignoreState: string = '';\n    private connected: boolean = false;\n    private subscribed: boolean = false;\n    private firstConnect: boolean = true;\n    public waitForRestart: boolean = false;\n    public loaded: boolean = false;\n    private simStates: Record<string, ioBroker.State> = {};\n\n    private readonly statesSubscribes: Record<\n        string,\n        {\n            reg: RegExp;\n            cbs: (ioBroker.StateChangeHandler | BinaryStateChangeHandler)[];\n        }\n    > = {};\n    private readonly filesSubscribes: Record<\n        string,\n        {\n            regId: RegExp;\n            regFilePattern: RegExp;\n            cbs: FileChangeHandler[];\n        }\n    > = {};\n    private readonly objectsSubscribes: Record<string, { reg: RegExp; cbs: ObjectChangeHandler[] }> = {};\n    private objects: Record<string, ioBroker.Object> = {};\n    private states: Record<string, ioBroker.State> = {};\n\n    public acl: any = null;\n    public isSecure: boolean = false;\n    // Do not inform about readiness two times\n    public onReadyDone: boolean = false;\n\n    private readonly onConnectionHandlers: ((connected: boolean) => void)[] = [];\n    private readonly onLogHandlers: ((message: LogMessage) => void)[] = [];\n\n    private onCmdStdoutHandler?: (id: string, text: string) => void;\n    private onCmdStderrHandler?: (id: string, text: string) => void;\n    private onCmdExitHandler?: (id: string, exitCode: number) => void;\n    private onError(error: any): void {\n        (this.props.onError ?? console.error)(error);\n    }\n\n    /** The socket instance */\n    protected _socket!: SocketClient<CustomListenEvents, CustomEmitEvents>;\n\n    private _waitForSocketPromise?: Promise<void>;\n    private readonly _waitForFirstConnectionPromise = createDeferredPromise();\n\n    /** array with all subscriptions to instances */\n    private _instanceSubscriptions: Record<string, InstanceSubscribe[]> = {};\n\n    /** Cache for server requests */\n    private readonly _promises: Record<string, Promise<any>> = {};\n\n    protected _authTimer: any;\n\n    protected _systemConfig?: ioBroker.SystemConfigObject;\n    /** The \"system.config\" object */\n    public get systemConfig(): Readonly<ioBroker.SystemConfigObject> | undefined {\n        return this._systemConfig;\n    }\n\n    /** System language. It could be changed during runtime */\n    public systemLang: ioBroker.Languages = 'en';\n\n    /**\n     * Checks if this connection is running in a web adapter and not in an admin.\n     *\n     * @returns True if running in a web adapter or in a socketio adapter.\n     */\n    static isWeb(): boolean {\n        return window.socketUrl !== undefined;\n    }\n\n    private waitForSocketLib(): Promise<void> {\n        // Only wait once\n        if (this._waitForSocketPromise) {\n            return this._waitForSocketPromise;\n        }\n\n        // eslint-disable-next-line no-async-promise-executor\n        this._waitForSocketPromise = new Promise(async (resolve, reject) => {\n            // If socket io is not yet loaded, we need to wait for it\n            if (typeof window.io === 'undefined' && typeof window.iob === 'undefined') {\n                // If the registerSocketOnLoad function is defined in index.html,\n                // we can use it to know when the socket library was loaded\n                if (typeof window.registerSocketOnLoad === 'function') {\n                    window.registerSocketOnLoad(() => resolve());\n                } else {\n                    // otherwise, we need to poll\n                    for (let i = 1; i <= 30; i++) {\n                        if (window.io || window.iob) {\n                            return resolve();\n                        }\n                        await wait(100);\n                    }\n\n                    reject(new Error('Socket library could not be loaded!'));\n                }\n            } else {\n                resolve();\n            }\n        });\n        return this._waitForSocketPromise;\n    }\n\n    /**\n     * Starts the socket.io connection.\n     */\n    async startSocket(): Promise<void> {\n        if (this._socket) {\n            return;\n        }\n\n        let host = this.props.host;\n        let port = this.props.port;\n        let protocol = (this.props.protocol || window.location.protocol).replace(':', '');\n        let path = window.location.pathname;\n\n        if (window.location.hostname === 'iobroker.net' || window.location.hostname === 'iobroker.pro') {\n            path = '';\n        } else {\n            // if web adapter, socket io could be on another port or even host\n            if (window.socketUrl) {\n                const parsed = new URL(window.socketUrl);\n                host = parsed.hostname;\n                port = parsed.port;\n                protocol = parsed.protocol.replace(':', '');\n            }\n            // get a current path\n            const pos = path.lastIndexOf('/');\n            if (pos !== -1) {\n                path = path.substring(0, pos + 1);\n            }\n\n            if (Connection.isWeb()) {\n                // remove one level, like echarts, vis, .... We have here: '/echarts/'\n                const parts = path.split('/');\n                if (parts.length > 2) {\n                    parts.pop();\n                    parts.pop();\n                    // material can have paths like this '/material/1.3.0/', so remove one more level\n                    if (ADAPTERS.includes(parts[parts.length - 1])) {\n                        parts.pop();\n                    }\n                    path = parts.join('/');\n                    if (!path.endsWith('/')) {\n                        path += '/';\n                    }\n                }\n            }\n        }\n\n        const url = port ? `${protocol}://${host}:${port}` : `${protocol}://${host}`;\n\n        this._socket = (window.io || window.iob).connect(url, {\n            path: path.endsWith('/') ? `${path}socket.io` : `${path}/socket.io`,\n            query: 'ws=true',\n            name: this.props.name,\n            timeout: this.props.ioTimeout,\n            uuid: this.props.uuid,\n            token: this.props.token,\n        });\n\n        this._socket.on('connect', noTimeout => {\n            this.onReadyDone = false;\n            // If the user is not admin, it takes some time to install the handlers, because all rights must be checked\n            if (noTimeout !== true) {\n                this.connected = true;\n                setTimeout(\n                    () =>\n                        this.getVersion()\n                            .then(info => {\n                                const [major, minor, patch] = info.version.split('.');\n                                const v = parseInt(major, 10) * 10000 + parseInt(minor, 10) * 100 + parseInt(patch, 10);\n                                if (v < 40102) {\n                                    this._authTimer = null;\n                                    // possible this is an old version of admin\n                                    this.onPreConnect(false, false);\n                                } else {\n                                    this._socket.emit('authenticate', (isOk, isSecure) =>\n                                        this.onPreConnect(isOk, isSecure),\n                                    );\n                                }\n                            })\n                            .catch(e =>\n                                this.onError({\n                                    message: e.toString(),\n                                    operation: 'getVersion',\n                                }),\n                            ),\n                    500,\n                );\n            } else {\n                // iobroker websocket waits, till all handlers are installed\n                this._socket.emit('authenticate', (isOk, isSecure) => {\n                    this.onPreConnect(isOk, isSecure);\n                });\n            }\n        });\n\n        this._socket.on('reconnect', () => {\n            this.onReadyDone = false;\n            this.props.onProgress?.(PROGRESS.READY);\n            this.connected = true;\n\n            if (this.waitForRestart) {\n                window.location.reload();\n            } else {\n                this._subscribe(true);\n                this.onConnectionHandlers.forEach(cb => cb(true));\n            }\n        });\n\n        this._socket.on('disconnect', () => {\n            this.onReadyDone = false;\n            this.connected = false;\n            this.subscribed = false;\n            this.props.onProgress?.(PROGRESS.CONNECTING);\n            this.onConnectionHandlers.forEach(cb => cb(false));\n        });\n\n        this._socket.on('reauthenticate', () => this.authenticate());\n\n        this._socket.on('log', (message: LogMessage) => {\n            this.props.onLog?.(message);\n            this.onLogHandlers.forEach(cb => cb(message));\n        });\n\n        this._socket.on('error', (err: any) => {\n            let _err: string;\n\n            if (err == undefined) {\n                _err = '';\n            } else if (typeof err.toString === 'function') {\n                _err = err.toString();\n            } else {\n                _err = JSON.stringify(err);\n                console.error(`Received strange error: ${_err}`);\n            }\n\n            if (_err.includes('User not authorized')) {\n                this.authenticate();\n            } else if (_err.includes('websocket error')) {\n                console.error(`Socket Error => reload: ${err}`);\n                window.location.reload();\n            } else {\n                console.error(`Socket Error: ${err}`);\n            }\n        });\n\n        this._socket.on('connect_error', (err: any) => console.error(`Connect error: ${err}`));\n\n        this._socket.on('permissionError', err =>\n            this.onError({\n                message: 'no permission',\n                operation: err.operation,\n                type: err.type,\n                id: err.id || '',\n            }),\n        );\n\n        this._socket.on('objectChange', (id, obj) => {\n            setTimeout(() => this.objectChange(id, obj), 0);\n        });\n\n        this._socket.on('stateChange', (id, state) => {\n            setTimeout(() => this.stateChange(id, state), 0);\n        });\n\n        // instance message\n        this._socket.on('im', (messageType, from, data) => {\n            setTimeout(() => this.instanceMessage(messageType, from, data), 0);\n        });\n\n        this._socket.on('fileChange', (id, fileName, size) => {\n            setTimeout(() => this.fileChange(id, fileName, size), 0);\n        });\n\n        this._socket.on('cmdStdout', (id, text) => {\n            this.onCmdStdoutHandler?.(id, text);\n        });\n\n        this._socket.on('cmdStderr', (id, text) => {\n            this.onCmdStderrHandler?.(id, text);\n        });\n\n        this._socket.on('cmdExit', (id, exitCode) => {\n            this.onCmdExitHandler?.(id, exitCode);\n        });\n\n        return Promise.resolve();\n    }\n\n    /**\n     * Called internally.\n     */\n    private onPreConnect(_isOk: boolean, isSecure: boolean): void {\n        if (this._authTimer) {\n            clearTimeout(this._authTimer);\n            this._authTimer = null;\n        }\n\n        this.connected = true;\n        this.isSecure = isSecure;\n\n        if (this.waitForRestart) {\n            window.location.reload();\n        } else {\n            if (this.firstConnect) {\n                void this.loadData().catch(e => console.error(`Cannot load data: ${e}`));\n            } else {\n                this.props.onProgress?.(PROGRESS.READY);\n            }\n\n            this._subscribe(true);\n            this.onConnectionHandlers.forEach(cb => cb(true));\n        }\n\n        this._waitForFirstConnectionPromise.resolve();\n    }\n\n    /**\n     * Checks if running in ioBroker cloud\n     */\n    static isCloud(): boolean {\n        if (window.location.hostname.includes('amazonaws.com') || window.location.hostname.includes('iobroker.in')) {\n            return true;\n        }\n        if (typeof window.socketUrl === 'undefined') {\n            return false;\n        }\n        return window.socketUrl.includes('iobroker.in') || window.socketUrl.includes('amazonaws');\n    }\n\n    /**\n     * Checks if the socket is connected.\n     *\n     * @returns true if connected.\n     */\n    isConnected(): boolean {\n        return this.connected;\n    }\n\n    /**\n     * Returns a promise which is resolved when the socket is connected.\n     */\n    waitForFirstConnection(): Promise<void> {\n        return this._waitForFirstConnectionPromise;\n    }\n\n    /**\n     * Called internally.\n     */\n    private async getUserPermissions(): Promise<any> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('getUserPermissions', (err, acl) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(acl);\n                    }\n                });\n            },\n        });\n    }\n\n    /** Loads the important data and retries a couple of times if it takes too long */\n    private async loadData(): Promise<void> {\n        if (this.loaded) {\n            return;\n        }\n        const maxAttempts = 10;\n        for (let i = 1; i <= maxAttempts; i++) {\n            void this.doLoadData().catch(e => console.error(`Cannot load data: ${e}`));\n            if (this.loaded) {\n                return;\n            }\n            // give more time via remote connection\n            await wait(Connection.isCloud() ? 5000 : 1000);\n        }\n    }\n\n    /**\n     * Called after the socket is connected. Loads the necessary data.\n     */\n    private async doLoadData(): Promise<void> {\n        if (this.loaded) {\n            return;\n        }\n\n        // Load ACL if not disabled\n        if (!this.props.doNotLoadACL) {\n            try {\n                this.acl = await this.getUserPermissions();\n            } catch (e) {\n                this.onError(`Cannot read user permissions: ${e}`);\n                return;\n            }\n        }\n\n        // Load system config if not disabled\n        try {\n            if (\n                this.props.admin5only &&\n                !Connection.isWeb() &&\n                (!window.vendorPrefix || window.vendorPrefix === '@@vendorPrefix@@')\n            ) {\n                this._systemConfig = await this.getCompactSystemConfig();\n            } else {\n                this._systemConfig = await this.getSystemConfig();\n            }\n        } catch (e) {\n            this.onError(`Cannot read system config: ${e}`);\n            return;\n        }\n\n        // Detect the system language\n        if (this._systemConfig) {\n            this.systemLang = this._systemConfig.common?.language;\n            if (!this.systemLang) {\n                this.systemLang = (window.navigator.userLanguage || window.navigator.language) as any;\n                // Browsers may report languages like \"de-DE\", \"en-US\", etc.\n                // ioBroker expects \"de\", \"en\", ...\n                if (/^(en|de|ru|pt|nl|fr|it|es|pl|uk)-?/.test(this.systemLang)) {\n                    this.systemLang = this.systemLang.substring(0, 2) as any;\n                } else if (!/^(en|de|ru|pt|nl|fr|it|es|pl|uk|zh-cn)$/.test(this.systemLang)) {\n                    this.systemLang = 'en';\n                }\n                this._systemConfig.common.language = this.systemLang;\n            }\n        }\n        this.props.onLanguage?.(this.systemLang);\n\n        // We are now connected\n        this.loaded = true;\n        this.props.onProgress?.(PROGRESS.CONNECTED);\n        this.firstConnect = false;\n\n        // Load all objects if desired\n        if (!this.props.doNotLoadAllObjects) {\n            this.objects = await this.getObjects();\n        } else if (this.props.admin5only) {\n            this.objects = {};\n        } else {\n            this.objects = { 'system.config': this._systemConfig };\n        }\n\n        this.props.onProgress?.(PROGRESS.READY);\n        if (!this.onReadyDone) {\n            this.onReadyDone = true;\n            this.props.onReady?.(this.objects);\n        }\n    }\n\n    /**\n     * Called internally.\n     */\n    private authenticate(): void {\n        if (window.location.search.includes('&href=')) {\n            window.location.href = `${window.location.protocol}//${window.location.host}${window.location.pathname}${window.location.search}${window.location.hash}`;\n        } else {\n            window.location.href = `${window.location.protocol}//${window.location.host}${window.location.pathname}?login&href=${window.location.search}${window.location.hash}`;\n        }\n    }\n\n    /**\n     * Subscribe to the changes of the given state.\n     * In compare to the subscribeObject method,\n     * this method calls the handler with the current state value immediately after subscribing.\n     *\n     * @param id The ioBroker state ID or array of state IDs.\n     * @param binary Set to true if the given state is binary and requires Base64 decoding.\n     * @param cb The callback.\n     */\n    subscribeState(id: string | string[], binary: true, cb: BinaryStateChangeHandler): Promise<void>;\n\n    subscribeState(id: string | string[], binary: false, cb: ioBroker.StateChangeHandler): Promise<void>;\n\n    subscribeState(id: string | string[], cb: ioBroker.StateChangeHandler): Promise<void>;\n\n    async subscribeState(\n        ...args:\n            | [id: string | string[], binary: true, cb: BinaryStateChangeHandler]\n            | [id: string | string[], binary: false, cb: ioBroker.StateChangeHandler]\n            | [id: string | string[], cb: ioBroker.StateChangeHandler]\n    ): Promise<void> {\n        let id: string | string[];\n        let binary: boolean;\n        let cb: ioBroker.StateChangeHandler | BinaryStateChangeHandler;\n        if (args.length === 3) {\n            [id, binary, cb] = args;\n        } else {\n            [id, cb] = args;\n            binary = false;\n        }\n        let ids: string[];\n        if (!Array.isArray(id)) {\n            ids = [id];\n        } else {\n            ids = id;\n        }\n\n        if (typeof cb !== 'function') {\n            throw new Error('The state change handler must be a function!');\n        }\n        const toSubscribe: string[] = [];\n        for (let i = 0; i < ids.length; i++) {\n            const _id = ids[i];\n            if (!this.statesSubscribes[_id]) {\n                this.statesSubscribes[_id] = {\n                    reg: new RegExp(pattern2RegEx(_id)),\n                    cbs: [cb],\n                };\n                if (id !== this.ignoreState) {\n                    toSubscribe.push(_id);\n                }\n            } else {\n                !this.statesSubscribes[_id].cbs.includes(cb) && this.statesSubscribes[_id].cbs.push(cb);\n            }\n        }\n\n        if (!this.connected) {\n            return;\n        }\n\n        if (toSubscribe.length) {\n            // no answer from server required\n            this._socket.emit('subscribe', toSubscribe);\n        }\n\n        // Try to get the current value(s) of the state(s) and call the change handlers\n        if (binary) {\n            let base64: string | undefined;\n            for (let i = 0; i < ids.length; i++) {\n                try {\n                    // binary states are deprecated\n                    base64 = await this.getBinaryState(ids[i]);\n                } catch (e) {\n                    console.error(`Cannot getBinaryState \"${ids[i]}\": ${JSON.stringify(e)}`);\n                    base64 = undefined;\n                }\n                if (base64 != undefined) {\n                    (cb as BinaryStateChangeHandler)(ids[i], base64);\n                }\n            }\n        } else if (ids.find(_id => _id.includes('*'))) {\n            let states: Record<string, ioBroker.State> | undefined;\n            for (let i = 0; i < ids.length; i++) {\n                try {\n                    states = await this.getForeignStates(ids[i]);\n                } catch (e) {\n                    console.error(`Cannot getForeignStates \"${ids[i]}\": ${JSON.stringify(e)}`);\n                    return;\n                }\n                if (states) {\n                    for (const [id, state] of Object.entries(states)) {\n                        const mayBePromise = (cb as ioBroker.StateChangeHandler)(id, state);\n                        if (mayBePromise instanceof Promise) {\n                            void mayBePromise.catch(e => console.error(`Cannot call state change handler: ${e}`));\n                        }\n                    }\n                }\n            }\n        } else {\n            try {\n                const states = await (Connection.isWeb() ? this.getStates(ids) : this.getForeignStates(ids));\n                if (states) {\n                    for (const [id, state] of Object.entries(states)) {\n                        const mayBePromise = (cb as ioBroker.StateChangeHandler)(id, state);\n                        if (mayBePromise instanceof Promise) {\n                            void mayBePromise.catch(e => console.error(`Cannot call state change handler: ${e}`));\n                        }\n                    }\n                }\n            } catch (e) {\n                console.error(`Cannot getState \"${ids.join(', ')}\": ${e.message}`);\n                return;\n            }\n        }\n    }\n\n    /**\n     * Subscribe to the changes of the given state and wait for answer.\n     *\n     * @param id The ioBroker state ID.\n     * @param cb The callback.\n     */\n    async subscribeStateAsync(id: string | string[], cb: ioBroker.StateChangeHandler): Promise<void> {\n        return this.subscribeState(id, cb);\n    }\n\n    /**\n     * Unsubscribes the given callback from changes of the given state.\n     *\n     * @param id The ioBroker state ID or array of state IDs.\n     * @param cb The callback.\n     */\n    unsubscribeState(id: string | string[], cb?: ioBroker.StateChangeHandler): void {\n        let ids: string[];\n        if (!Array.isArray(id)) {\n            ids = [id];\n        } else {\n            ids = id;\n        }\n        const toUnsubscribe = [];\n        for (let i = 0; i < ids.length; i++) {\n            const _id = ids[i];\n\n            if (this.statesSubscribes[_id]) {\n                const sub = this.statesSubscribes[_id];\n                if (cb) {\n                    const pos = sub.cbs.indexOf(cb);\n                    pos !== -1 && sub.cbs.splice(pos, 1);\n                } else {\n                    sub.cbs = [];\n                }\n\n                if (!sub.cbs?.length) {\n                    delete this.statesSubscribes[_id];\n                    if (_id !== this.ignoreState) {\n                        toUnsubscribe.push(_id);\n                    }\n                }\n            }\n        }\n        if (this.connected && toUnsubscribe.length) {\n            this._socket.emit('unsubscribe', ids);\n        }\n    }\n\n    /**\n     * Subscribe to changes of the given object.\n     * In compare to the subscribeState method,\n     * this method does not call the handler with the current value immediately after subscribe.\n     *\n     * the current value.\n     *\n     * @param id The ioBroker object ID.\n     * @param cb The callback.\n     */\n    subscribeObject(id: string | string[], cb: ObjectChangeHandler): Promise<void> {\n        let ids: string[];\n        if (!Array.isArray(id)) {\n            ids = [id];\n        } else {\n            ids = id;\n        }\n\n        if (typeof cb !== 'function') {\n            throw new Error('The object change handler must be a function!');\n        }\n\n        const toSubscribe: string[] = [];\n        for (let i = 0; i < ids.length; i++) {\n            const _id = ids[i];\n            if (!this.objectsSubscribes[_id]) {\n                this.objectsSubscribes[_id] = {\n                    reg: new RegExp(pattern2RegEx(_id)),\n                    cbs: [cb],\n                };\n                toSubscribe.push(_id);\n            } else {\n                !this.objectsSubscribes[_id].cbs.includes(cb) && this.objectsSubscribes[_id].cbs.push(cb);\n            }\n        }\n\n        if (this.connected && toSubscribe.length) {\n            this._socket.emit('subscribeObjects', toSubscribe);\n        }\n\n        return Promise.resolve();\n    }\n\n    /**\n     * Unsubscribes all callbacks from changes of the given object.\n     *\n     * @param id The ioBroker object ID.\n     */\n    /**\n     * Unsubscribes the given callback from changes of the given object.\n     *\n     * @param id The ioBroker object ID.\n     * @param cb The callback.\n     */\n    unsubscribeObject(id: string | string[], cb?: ObjectChangeHandler): Promise<void> {\n        let ids: string[];\n        if (!Array.isArray(id)) {\n            ids = [id];\n        } else {\n            ids = id;\n        }\n        const toUnsubscribe: string[] = [];\n        for (let i = 0; i < ids.length; i++) {\n            const _id = ids[i];\n            if (this.objectsSubscribes[_id]) {\n                const sub = this.objectsSubscribes[_id];\n                if (cb) {\n                    const pos = sub.cbs.indexOf(cb);\n                    pos !== -1 && sub.cbs.splice(pos, 1);\n                } else {\n                    sub.cbs = [];\n                }\n\n                if (!sub.cbs?.length) {\n                    delete this.objectsSubscribes[_id];\n                    toUnsubscribe.push(_id);\n                }\n            }\n        }\n        if (this.connected && toUnsubscribe.length) {\n            this._socket.emit('unsubscribeObjects', toUnsubscribe);\n        }\n        return Promise.resolve();\n    }\n\n    /**\n     * Called internally.\n     *\n     * @param id The ioBroker object ID.\n     * @param obj The new object.\n     */\n    private objectChange(id: string, obj: ioBroker.Object | null | undefined): void {\n        // update main.objects cache\n\n        // Remember the id and type of th old object\n        let oldObj: OldObject | undefined;\n        if (this.objects[id]) {\n            oldObj = { _id: id, type: this.objects[id].type };\n        }\n\n        let changed = false;\n        if (obj) {\n            // The object was added, updated or changed\n\n            // Copy the _rev property (whatever that is)\n            if ((obj as any)._rev && this.objects[id]) {\n                (this.objects[id] as any)._rev = (obj as any)._rev;\n            }\n\n            // Detect if there was a change\n            if (!this.objects[id] || JSON.stringify(this.objects[id]) !== JSON.stringify(obj)) {\n                this.objects[id] = obj;\n                changed = true;\n            }\n        } else if (this.objects[id]) {\n            // The object was deleted\n            delete this.objects[id];\n            changed = true;\n        }\n\n        // Notify all subscribed listeners\n        for (const [_id, sub] of Object.entries(this.objectsSubscribes)) {\n            if (_id === id || sub.reg.test(id)) {\n                sub.cbs.forEach(cb => {\n                    try {\n                        const mayBePromise = cb(id, obj, oldObj);\n                        if (mayBePromise instanceof Promise) {\n                            void mayBePromise.catch(e => console.error(`Cannot call object change handler: ${e}`));\n                        }\n                    } catch (e) {\n                        console.error(`Error by callback of objectChange: ${e}`);\n                    }\n                });\n            }\n        }\n\n        // Notify the default listener on change\n        if (changed) {\n            const mayBePromise = this.props.onObjectChange?.(id, obj);\n            if (mayBePromise instanceof Promise) {\n                void mayBePromise.catch(e => console.error(`Cannot call object change handler: ${e}`));\n            }\n        }\n    }\n\n    /**\n     * Called internally.\n     *\n     * @param id The ioBroker state ID.\n     * @param state The new state value.\n     */\n    private stateChange(id: string, state: ioBroker.State | null | undefined): void {\n        for (const sub of Object.values(this.statesSubscribes)) {\n            if (sub.reg.test(id)) {\n                for (const cb of sub.cbs) {\n                    try {\n                        const mayBePromise = cb(id, (state ?? null) as any);\n                        if (mayBePromise instanceof Promise) {\n                            void mayBePromise.catch(e => console.error(`Cannot call state change handler: ${e}`));\n                        }\n                    } catch (e) {\n                        console.error(`Error by callback of stateChanged: ${e}`);\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Called internally.\n     *\n     * @param messageType The message type from the instance\n     * @param sourceInstance The source instance\n     * @param data The message data\n     */\n    private instanceMessage(messageType: string, sourceInstance: string, data: any): void {\n        this._instanceSubscriptions[sourceInstance]?.forEach(sub => {\n            if (sub.messageType === messageType) {\n                const mayBePromise = sub.callback(data, sourceInstance, messageType);\n                if (mayBePromise instanceof Promise) {\n                    void mayBePromise.catch(e => console.error(`Cannot call instance message handler: ${e}`));\n                }\n            }\n        });\n    }\n\n    /**\n     * Called internally.\n     *\n     * @param id The ioBroker object ID of type 'meta'.\n     * @param fileName - file name\n     * @param size - size of the file\n     */\n    private fileChange(id: string, fileName: string, size: number | null): void {\n        for (const sub of Object.values(this.filesSubscribes)) {\n            if (sub.regId.test(id) && sub.regFilePattern.test(fileName)) {\n                for (const cb of sub.cbs) {\n                    try {\n                        cb(id, fileName, size);\n                    } catch (e) {\n                        console.error(`Error by callback of fileChange: ${e}`);\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Subscribe to changes of the files.\n     *\n     * @param id The ioBroker state ID for a \"meta\" object. Could be a pattern\n     * @param filePattern Pattern or file name, like 'main/*' or 'main/visViews.json`\n     * @param cb The callback.\n     */\n    async subscribeFiles(id: string, filePattern: string | string[], cb: FileChangeHandler): Promise<void> {\n        if (typeof cb !== 'function') {\n            throw new Error('The state change handler must be a function!');\n        }\n\n        let filePatterns: string[];\n        if (Array.isArray(filePattern)) {\n            filePatterns = filePattern;\n        } else {\n            filePatterns = [filePattern];\n        }\n\n        const toSubscribe = [];\n        for (let f = 0; f < filePatterns.length; f++) {\n            const pattern = filePatterns[f];\n            const key = `${id}$%$${pattern}`;\n\n            if (!this.filesSubscribes[key]) {\n                this.filesSubscribes[key] = {\n                    regId: new RegExp(pattern2RegEx(id)),\n                    regFilePattern: new RegExp(pattern2RegEx(pattern)),\n                    cbs: [cb],\n                };\n                toSubscribe.push(pattern);\n            } else {\n                !this.filesSubscribes[key].cbs.includes(cb) && this.filesSubscribes[key].cbs.push(cb);\n            }\n        }\n        if (this.connected && toSubscribe.length) {\n            this._socket.emit('subscribeFiles', id, toSubscribe);\n        }\n\n        return Promise.resolve();\n    }\n\n    /**\n     * Unsubscribes the given callback from changes of files.\n     *\n     * @param id The ioBroker state ID.\n     * @param filePattern Pattern or file name, like 'main/*' or 'main/visViews.json`\n     * @param cb The callback.\n     */\n    unsubscribeFiles(id: string, filePattern: string | string[], cb?: FileChangeHandler): void {\n        let filePatterns: string[];\n        if (Array.isArray(filePattern)) {\n            filePatterns = filePattern;\n        } else {\n            filePatterns = [filePattern];\n        }\n        const toUnsubscribe = [];\n        for (let f = 0; f < filePatterns.length; f++) {\n            const pattern = filePatterns[f];\n            const key = `${id}$%$${pattern}`;\n            if (this.filesSubscribes[key]) {\n                const sub = this.filesSubscribes[key];\n                if (cb) {\n                    const pos = sub.cbs.indexOf(cb);\n                    pos !== -1 && sub.cbs.splice(pos, 1);\n                } else {\n                    sub.cbs = [];\n                }\n\n                if (!sub.cbs?.length) {\n                    delete this.filesSubscribes[key];\n                    toUnsubscribe.push(pattern);\n                }\n            }\n        }\n        if (this.connected && toUnsubscribe.length) {\n            this._socket.emit('unsubscribeFiles', id, toUnsubscribe);\n        }\n    }\n\n    /** Requests data from the server or reads it from the cache */\n    protected async request<T>({\n        cacheKey,\n        forceUpdate,\n        commandTimeout,\n        onTimeout,\n        requireAdmin,\n        requireFeatures,\n        // requestName,\n        executor,\n    }: RequestOptions<T>): Promise<T> {\n        // TODO: mention requestName in errors\n\n        // If the command requires the admin adapter, enforce it\n        if (requireAdmin && Connection.isWeb()) {\n            return Promise.reject(new Error(ERRORS.NOT_ADMIN));\n        }\n\n        // Return the cached value if allowed\n        if (cacheKey && !forceUpdate && cacheKey in this._promises) {\n            return this._promises[cacheKey];\n        }\n\n        // Require the socket to be connected\n        if (!this.connected) {\n            return Promise.reject(new Error(ERRORS.NOT_CONNECTED));\n        }\n\n        // Check if all required features are supported\n        if (requireFeatures?.length) {\n            for (const feature of requireFeatures) {\n                if (!(await this.checkFeatureSupported(feature))) {\n                    throw new Error(ERRORS.NOT_SUPPORTED);\n                }\n            }\n        }\n\n        // eslint-disable-next-line no-async-promise-executor\n        const promise = new Promise<T>(async (resolve, reject) => {\n            const timeoutControl = {\n                elapsed: false,\n                clearTimeout: () => {\n                    // no-op unless there is a timeout\n                },\n            };\n            let timeout: NodeJS.Timeout | undefined;\n            if (commandTimeout !== false) {\n                timeout = setTimeout(() => {\n                    timeoutControl.elapsed = true;\n                    // Let the caller know that the timeout elapsed\n                    onTimeout?.();\n\n                    // do not cache responses with timeout or no connection\n                    if (cacheKey && this._promises[cacheKey] instanceof Promise) {\n                        delete this._promises[cacheKey];\n                    }\n                    reject(new Error(ERRORS.TIMEOUT));\n                }, commandTimeout ?? this.props.cmdTimeout);\n                timeoutControl.clearTimeout = () => {\n                    clearTimeout(timeout);\n                };\n            }\n            // Call the actual function - awaiting it allows us to catch sync and async errors\n            // no matter if the executor is async or not\n            try {\n                await executor(resolve, reject, timeoutControl);\n            } catch (e) {\n                // do not cache responses with timeout or no connection\n                if (cacheKey && this._promises[cacheKey] instanceof Promise) {\n                    delete this._promises[cacheKey];\n                }\n                reject(new Error(e.toString()));\n            }\n        });\n        if (cacheKey) {\n            this._promises[cacheKey] = promise;\n        }\n        return promise;\n    }\n\n    /**\n     * Deletes cached promise.\n     * So next time the information will be requested anew\n     */\n    resetCache(key: string, isAll?: boolean): void {\n        if (isAll) {\n            Object.keys(this._promises)\n                .filter(k => k.startsWith(key))\n                .forEach(k => {\n                    delete this._promises[k];\n                });\n        } else {\n            delete this._promises[key];\n        }\n    }\n\n    /**\n     * Gets all states.\n     *\n     * @param pattern Pattern of states or array of IDs\n     */\n    getStates(pattern?: string | string[]): Promise<Record<string, ioBroker.State>> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('getStates', pattern, (err, res) => {\n                    this.states = res ?? {};\n\n                    // if (!disableProgressUpdate) {\n                    // \tthis.props.onProgress?.(PROGRESS.STATES_LOADED);\n                    // }\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(this.states);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Gets the given state.\n     *\n     * @param id The state ID.\n     */\n    getState(id: string): Promise<ioBroker.State | null | undefined> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                if (id && id === this.ignoreState) {\n                    resolve(this.simStates[id] || { val: null, ack: true });\n                    return;\n                }\n                this._socket.emit('getState', id, (err, state) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(state);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Gets the given binary state Base64 encoded.\n     *\n     * @deprecated since js-controller 5.0. Use files instead.\n     * @param id The state ID.\n     */\n    getBinaryState(id: string): Promise<string | undefined> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('getBinaryState', id, (err, state) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(state);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Sets the given binary state.\n     *\n     * @deprecated since js-controller 5.0. Use files instead.\n     * @param id The state ID.\n     * @param base64 The Base64 encoded binary data.\n     */\n    setBinaryState(id: string, base64: string): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('setBinaryState', id, base64, err => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve();\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Sets the given state value.\n     *\n     * @param id The state ID.\n     * @param val The state value.\n     * @param ack Acknowledgement flag.\n     */\n    setState(\n        id: string,\n        val: ioBroker.State | ioBroker.StateValue | ioBroker.SettableState,\n        ack?: boolean,\n    ): Promise<void> {\n        if (typeof ack === 'boolean') {\n            val = { val: val as ioBroker.StateValue, ack };\n        }\n\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                // extra handling for \"nothing_selected\" state for vis\n                if (id && id === this.ignoreState) {\n                    let state: ioBroker.State;\n\n                    if (typeof ack === 'boolean') {\n                        state = val as ioBroker.State;\n                    } else if (typeof val === 'object' && (val as ioBroker.State).val !== undefined) {\n                        state = val as ioBroker.State;\n                    } else {\n                        state = {\n                            val: val as ioBroker.StateValue,\n                            ack: false,\n                            ts: Date.now(),\n                            lc: Date.now(),\n                            from: 'system.adapter.vis.0',\n                        };\n                    }\n\n                    this.simStates[id] = state;\n\n                    // inform subscribers about changes\n                    if (this.statesSubscribes[id]) {\n                        for (const cb of this.statesSubscribes[id].cbs) {\n                            try {\n                                const mayBePromise = cb(id, state as any);\n                                if (mayBePromise instanceof Promise) {\n                                    void mayBePromise.catch(e =>\n                                        console.error(`Cannot call state change handler: ${e}`),\n                                    );\n                                }\n                            } catch (e) {\n                                console.error(`Error by callback of stateChanged: ${e}`);\n                            }\n                        }\n                    }\n                    resolve();\n                    return;\n                }\n                this._socket.emit('setState', id, val, err => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve();\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Gets all objects.\n     *\n     * @param update Callback that is executed when all objects are retrieved.\n     */\n    /**\n     * Gets all objects.\n     *\n     * @param update Set to true to retrieve all objects from the server (instead of using the local cache).\n     * @param disableProgressUpdate don't call onProgress() when done\n     */\n    getObjects(update?: boolean, disableProgressUpdate?: boolean): Promise<Record<string, ioBroker.Object>> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                if (!update && this.objects) {\n                    resolve(this.objects);\n                    return;\n                }\n\n                this._socket.emit(Connection.isWeb() ? 'getObjects' : 'getAllObjects', (err, res) => {\n                    if (!disableProgressUpdate) {\n                        this.props.onProgress?.(PROGRESS.OBJECTS_LOADED);\n                    }\n                    if (err) {\n                        reject(err);\n                    } else {\n                        this.objects = res ?? {};\n                        resolve(this.objects);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Gets the list of objects by ID.\n     *\n     * @param list array of IDs to retrieve\n     */\n    getObjectsById(list: string[]): Promise<Record<string, ioBroker.Object> | undefined> {\n        return this.request({\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('getObjects', list, (err, res) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(res);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Called internally.\n     *\n     * @param isEnable Set to true if subscribing, false to unsubscribe.\n     */\n    private _subscribe(isEnable: boolean): void {\n        if (isEnable && !this.subscribed) {\n            this.subscribed = true;\n            if (this.props.autoSubscribes?.length) {\n                this._socket.emit('subscribeObjects', this.props.autoSubscribes);\n            }\n            // re subscribe objects\n            const ids = Object.keys(this.objectsSubscribes);\n            if (ids.length) {\n                this._socket.emit('subscribeObjects', ids);\n            }\n            Object.keys(this.objectsSubscribes).forEach(id => this._socket.emit('subscribeObjects', id));\n            // re-subscribe logs\n            this.props.autoSubscribeLog && this._socket.emit('requireLog', true);\n            // re subscribe states\n            Object.keys(this.statesSubscribes).forEach(id => this._socket.emit('subscribe', id));\n            // re-subscribe files\n            Object.keys(this.filesSubscribes).forEach(key => {\n                const [id, filePattern] = key.split('$%$');\n                this._socket.emit('subscribeFiles', id, filePattern);\n            });\n        } else if (!isEnable && this.subscribed) {\n            this.subscribed = false;\n            // un-subscribe objects\n            if (this.props.autoSubscribes?.length) {\n                this._socket.emit('unsubscribeObjects', this.props.autoSubscribes);\n            }\n            const ids = Object.keys(this.objectsSubscribes);\n            if (ids.length) {\n                this._socket.emit('unsubscribeObjects', ids);\n            }\n            // un-subscribe logs\n            this.props.autoSubscribeLog && this._socket.emit('requireLog', false);\n\n            // un-subscribe states\n            Object.keys(this.statesSubscribes).forEach(id => this._socket.emit('unsubscribe', id));\n            // re-subscribe files\n            Object.keys(this.filesSubscribes).forEach(key => {\n                const [id, filePattern] = key.split('$%$');\n                this._socket.emit('unsubscribeFiles', id, filePattern);\n            });\n        }\n    }\n\n    /**\n     * Requests log updates.\n     *\n     * @param isEnabled Set to true to get logs.\n     */\n    requireLog(isEnabled: boolean): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('requireLog', isEnabled, err => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve();\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Deletes the given object.\n     *\n     * @param id The object ID.\n     * @param maintenance Force deletion of non conform IDs.\n     */\n    delObject(id: string, maintenance: boolean = false): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('delObject', id, { maintenance }, err => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve();\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Deletes the given object and all its children.\n     *\n     * @param id The object ID.\n     * @param maintenance Force deletion of non conform IDs.\n     */\n    delObjects(id: string, maintenance: boolean): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('delObjects', id, { maintenance }, err => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve();\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Sets the object.\n     *\n     * @param id The object ID.\n     * @param obj The object.\n     */\n    setObject(id: string, obj: ioBroker.SettableObject): Promise<void> {\n        if (!obj) {\n            return Promise.reject(new Error('Null object is not allowed'));\n        }\n\n        obj = JSON.parse(JSON.stringify(obj));\n        delete obj.from;\n        delete obj.user;\n        delete obj.ts;\n\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('setObject', id, obj, err => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve();\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Gets the object with the given id from the server.\n     *\n     * @param id The object ID.\n     * @returns The object.\n     */\n    getObject<T extends string>(id: T): ioBroker.GetObjectPromise<T> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                if (id && id === this.ignoreState) {\n                    resolve({\n                        _id: this.ignoreState,\n                        type: 'state',\n                        common: {\n                            name: 'ignored state',\n                            type: 'mixed',\n                        },\n                    } as any);\n                    return;\n                }\n                this._socket.emit('getObject', id, (err, obj) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(obj as any);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Sends a message to a specific instance or all instances of some specific adapter.\n     *\n     * @param instance The instance to send this message to.\n     * @param command Command name of the target instance.\n     * @param data The message data to send.\n     */\n    sendTo<T = any>(instance: string, command: string, data?: any): Promise<T> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: resolve => {\n                this._socket.emit('sendTo', instance, command, data, (result: any) => {\n                    resolve(result);\n                });\n            },\n        });\n    }\n\n    /**\n     * Extend an object and create it if it might not exist.\n     *\n     * @param id The id.\n     * @param obj The object.\n     */\n    extendObject(id: string, obj: ioBroker.PartialObject): Promise<void> {\n        if (!obj) {\n            return Promise.reject(new Error('Null object is not allowed'));\n        }\n\n        obj = JSON.parse(JSON.stringify(obj));\n        delete obj.from;\n        delete obj.user;\n        delete obj.ts;\n\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('extendObject', id, obj, err => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve();\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Register a handler for log messages.\n     *\n     * @param handler The handler.\n     */\n    registerLogHandler(handler: (message: LogMessage) => void): void {\n        if (!this.onLogHandlers.includes(handler)) {\n            this.onLogHandlers.push(handler);\n        }\n    }\n\n    /**\n     * Unregister a handler for log messages.\n     *\n     * @param handler The handler.\n     */\n    unregisterLogHandler(handler: (message: LogMessage) => void): void {\n        const pos = this.onLogHandlers.indexOf(handler);\n        pos !== -1 && this.onLogHandlers.splice(pos, 1);\n    }\n\n    /**\n     * Register a handler for the connection state.\n     *\n     * @param handler The handler.\n     */\n    registerConnectionHandler(handler: (connected: boolean) => void): void {\n        if (!this.onConnectionHandlers.includes(handler)) {\n            this.onConnectionHandlers.push(handler);\n        }\n    }\n\n    /**\n     * Unregister a handler for the connection state.\n     *\n     * @param handler The handler.\n     */\n    unregisterConnectionHandler(handler: (connected: boolean) => void): void {\n        const pos = this.onConnectionHandlers.indexOf(handler);\n        pos !== -1 && this.onConnectionHandlers.splice(pos, 1);\n    }\n\n    /**\n     * Set the handler for standard output of a command.\n     *\n     * @param handler The handler.\n     */\n    registerCmdStdoutHandler(handler: (id: string, text: string) => void): void {\n        this.onCmdStdoutHandler = handler;\n    }\n\n    /**\n     * Unset the handler for standard output of a command.\n     */\n    unregisterCmdStdoutHandler(): void {\n        this.onCmdStdoutHandler = undefined;\n    }\n\n    /**\n     * Set the handler for standard error of a command.\n     *\n     * @param handler The handler.\n     */\n    registerCmdStderrHandler(handler: (id: string, text: string) => void): void {\n        this.onCmdStderrHandler = handler;\n    }\n\n    /**\n     * Unset the handler for standard error of a command.\n     */\n    unregisterCmdStderrHandler(): void {\n        this.onCmdStderrHandler = undefined;\n    }\n\n    /**\n     * Set the handler for exit of a command.\n     *\n     * @param handler The handler.\n     */\n    registerCmdExitHandler(handler: (id: string, exitCode: number) => void): void {\n        this.onCmdExitHandler = handler;\n    }\n\n    /**\n     * Unset the handler for exit of a command.\n     */\n    unregisterCmdExitHandler(): void {\n        this.onCmdExitHandler = undefined;\n    }\n\n    /**\n     * Get all enums with the given name.\n     *\n     * @param _enum The name of the enum, like `rooms` or `functions`\n     * @param update Force update.\n     */\n    getEnums(_enum?: string, update?: boolean): Promise<Record<string, ioBroker.EnumObject>> {\n        return this.request({\n            cacheKey: `enums_${_enum || 'all'}`,\n            forceUpdate: update,\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit(\n                    'getObjectView',\n                    'system',\n                    'enum',\n                    {\n                        startkey: `enum.${_enum || ''}`,\n                        endkey: _enum ? `enum.${_enum}.\\u9999` : `enum.\\u9999`,\n                    },\n                    (err, res) => {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            const _res: Record<string, ioBroker.EnumObject> = {};\n                            if (res) {\n                                for (let i = 0; i < res.rows.length; i++) {\n                                    if (_enum && res.rows[i].id === `enum.${_enum}`) {\n                                        continue;\n                                    }\n                                    _res[res.rows[i].id] = res.rows[i].value as ioBroker.EnumObject;\n                                }\n                            }\n                            resolve(_res);\n                        }\n                    },\n                );\n            },\n        });\n    }\n\n    /**\n     * @deprecated since version 1.1.15, cause parameter order does not match backend\n     * Query a predefined object view.\n     * @param start The start ID.\n     * @param end The end ID.\n     * @param type The type of object.\n     */\n    getObjectView<T extends ioBroker.ObjectType>(\n        start: string | undefined,\n        end: string | undefined,\n        type: T,\n    ): Promise<Record<string, ioBroker.AnyObject & { type: T }>> {\n        return this.getObjectViewCustom('system', type, start, end);\n    }\n\n    /**\n     * Query a predefined object view.\n     *\n     * @param type The type of object.\n     * @param start The start ID.\n     * @param [end] The end ID.\n     */\n    getObjectViewSystem<T extends ioBroker.ObjectType>(\n        type: T,\n        start?: string,\n        end?: string,\n    ): Promise<Record<string, ioBroker.AnyObject & { type: T }>> {\n        return this.getObjectViewCustom('system', type, start, end);\n    }\n\n    /**\n     * Query a predefined object view.\n     *\n     * @param design design - 'system' or other designs like `custom`.\n     * @param type The type of object.\n     * @param start The start ID.\n     * @param [end] The end ID.\n     */\n    getObjectViewCustom<T extends ioBroker.ObjectType>(\n        design: string,\n        type: T,\n        start?: string,\n        end?: string,\n    ): Promise<Record<string, ioBroker.AnyObject & { type: T }>> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                start = start || '';\n                end = end || '\\u9999';\n\n                this._socket.emit('getObjectView', design, type, { startkey: start, endkey: end }, (err, res) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        const _res: Record<string, ioBroker.AnyObject & { type: T }> = {};\n                        if (res && res.rows) {\n                            for (let i = 0; i < res.rows.length; i++) {\n                                _res[res.rows[i].id] = res.rows[i].value;\n                            }\n                        }\n                        resolve(_res);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Read the meta items.\n     */\n    readMetaItems(): Promise<ioBroker.Object[]> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit(\n                    'getObjectView',\n                    'system',\n                    'meta',\n                    { startkey: '', endkey: '\\u9999' },\n                    (err, objs) => {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            resolve(objs!.rows?.map(obj => obj.value).filter((val): val is ioBroker.Object => !!val));\n                        }\n                    },\n                );\n            },\n        });\n    }\n\n    /**\n     * Read the directory of an adapter.\n     *\n     * @param namespace (this may be the adapter name, the instance name or the name of a storage object within the adapter).\n     * @param path The directory name.\n     */\n    readDir(namespace: string | null, path: string): Promise<ioBroker.ReadDirResult[]> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('readDir', namespace, path, (err, files) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(files!);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Read a file of an adapter.\n     *\n     * @param namespace (this may be the adapter name, the instance name or the name of a storage object within the adapter).\n     * @param fileName The file name.\n     * @param base64 If it must be a base64 format\n     */\n    readFile(\n        namespace: string | null,\n        fileName: string,\n        base64?: boolean,\n    ): Promise<{ file: string; mimeType: string }> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit(base64 ? 'readFile64' : 'readFile', namespace, fileName, (err, data, type) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve({ file: data as string, mimeType: type! });\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Write a file of an adapter.\n     *\n     * @param namespace (this may be the adapter name, the instance name or the name of a storage object within the adapter).\n     * @param fileName The file name.\n     * @param data The data (if it's a Buffer, it will be converted to Base64).\n     */\n    writeFile64(namespace: string, fileName: string, data: Buffer | string): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                if (typeof data === 'string') {\n                    this._socket.emit('writeFile', namespace, fileName, data, err => {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            resolve();\n                        }\n                    });\n                } else {\n                    const base64 = btoa(\n                        new Uint8Array(data).reduce((data, byte) => data + String.fromCharCode(byte), ''),\n                    );\n\n                    this._socket.emit('writeFile64', namespace, fileName, base64, err => {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            resolve();\n                        }\n                    });\n                }\n            },\n        });\n    }\n\n    /**\n     * Delete a file of an adapter.\n     *\n     * @param namespace (this may be the adapter name, the instance name or the name of a storage object within the adapter).\n     * @param fileName The file name.\n     */\n    deleteFile(namespace: string, fileName: string): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('deleteFile', namespace, fileName, err => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve();\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Delete a folder of an adapter.\n     *\n     * @param namespace (this may be the adapter name, the instance name or the name of a storage object within the adapter).\n     * @param folderName The folder name.\n     */\n    deleteFolder(namespace: string, folderName: string): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('deleteFolder', namespace, folderName, err => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve();\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Rename file or folder in ioBroker DB\n     *\n     * @param namespace (this may be the adapter name, the instance name or the name of a storage object within the adapter).\n     * @param oldName current file name, e.g., main/vis-views.json\n     * @param newName new file name, e.g., main/vis-views-new.json\n     */\n    rename(namespace: string, oldName: string, newName: string): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('rename', namespace, oldName, newName, err => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve();\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Rename file in ioBroker DB\n     *\n     * @param namespace (this may be the adapter name, the instance name or the name of a storage object within the adapter).\n     * @param oldName current file name, e.g., main/vis-views.json\n     * @param newName new file name, e.g., main/vis-views-new.json\n     */\n    renameFile(namespace: string, oldName: string, newName: string): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('renameFile', namespace, oldName, newName, err => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve();\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Execute a command on a host.\n     */\n    cmdExec(\n        /** Host name */\n        host: string,\n        /** Command to execute */\n        cmd: string,\n        /** Command ID */\n        cmdId: number,\n        /** Timeout of command in ms */\n        cmdTimeout?: number,\n    ): Promise<void> {\n        return this.request({\n            commandTimeout: cmdTimeout,\n            executor: (resolve, reject, timeout) => {\n                host = normalizeHostId(host);\n\n                this._socket.emit('cmdExec', host, cmdId, cmd, err => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve();\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Gets the system configuration.\n     *\n     * @param update Force update.\n     */\n    getSystemConfig(update?: boolean): Promise<ioBroker.SystemConfigObject> {\n        return this.request({\n            cacheKey: 'systemConfig',\n            forceUpdate: update,\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: async resolve => {\n                let systemConfig = await this.getObject('system.config');\n                (systemConfig as any) ??= {};\n                (systemConfig as any).common ??= {};\n                (systemConfig as any).native ??= {};\n\n                resolve(systemConfig!);\n            },\n        });\n    }\n\n    // returns very optimized information for adapters to minimize a connection load\n    getCompactSystemConfig(update?: boolean): Promise<ioBroker.SystemConfigObject> {\n        return this.request({\n            cacheKey: 'systemConfigCommon',\n            forceUpdate: update,\n            // TODO: check if this should time out\n            commandTimeout: false,\n            requireAdmin: true,\n            executor: (resolve, reject) => {\n                this._socket.emit('getCompactSystemConfig', (err, systemConfig) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        (systemConfig as any) ??= {};\n                        (systemConfig as any).common ??= {};\n                        (systemConfig as any).native ??= {};\n                        resolve(systemConfig!);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Read all states (which might not belong to this adapter) which match the given pattern.\n     *\n     * @param pattern The pattern to match.\n     */\n    getForeignStates(pattern?: string | string[] | null): ioBroker.GetStatesPromise {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('getForeignStates', pattern || '*', (err, states) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(states ?? {});\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Get foreign objects by pattern, by specific type and resolve their enums.\n     *\n     * @param pattern The pattern to match.\n     * @param type The type of the object.\n     */\n    getForeignObjects<T extends ioBroker.ObjectType>(\n        pattern: string | null | undefined,\n        type: T,\n    ): Promise<Record<string, ioBroker.AnyObject & { type: T }>> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('getForeignObjects', pattern || '*', type, (err, objects) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(objects as any);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Sets the system configuration.\n     *\n     * @param obj The new system configuration.\n     */\n    setSystemConfig(obj: ioBroker.SystemConfigObject): Promise<void> {\n        return this.setObject('system.config', obj);\n    }\n\n    /**\n     * Get the raw socket.io socket.\n     */\n    getRawSocket(): any {\n        return this._socket;\n    }\n\n    /**\n     * Get the history of a given state.\n     *\n     * @param id The state ID.\n     * @param options The query options.\n     */\n    getHistory(id: string, options: ioBroker.GetHistoryOptions): Promise<ioBroker.GetHistoryResult> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('getHistory', id, options, (err, values) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(values!);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Get the history of a given state.\n     *\n     * @param id The state ID.\n     * @param options The query options.\n     */\n    getHistoryEx(\n        id: string,\n        options: ioBroker.GetHistoryOptions,\n    ): Promise<{\n        values: ioBroker.GetHistoryResult;\n        sessionId: string;\n        stepIgnore: number;\n    }> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('getHistory', id, options, (err, values, stepIgnore, sessionId) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve({\n                            values: values!,\n                            sessionId: sessionId!,\n                            // TODO: WTF is up with the ignore thing?\n                            stepIgnore: stepIgnore!,\n                        });\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Get the IP addresses of the given host.\n     *\n     * @param host The host name.\n     * @param update Force update.\n     */\n    getIpAddresses(host: string, update?: boolean): Promise<string[]> {\n        host = normalizeHostId(host);\n        return this.request({\n            cacheKey: `IPs_${host}`,\n            forceUpdate: update,\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: async resolve => {\n                const obj = await this.getObject(host);\n                resolve(obj?.common.address ?? []);\n            },\n        });\n    }\n\n    /**\n     * Gets the version.\n     */\n    getVersion(update?: boolean): Promise<{ version: string; serverName: string }> {\n        return this.request({\n            cacheKey: 'version',\n            forceUpdate: update,\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('getVersion', (err, version, serverName) => {\n                    // Old socket.io had no error parameter\n                    if (err && !version && typeof err === 'string' && err.match(/\\d+\\.\\d+\\.\\d+/)) {\n                        resolve({ version: err, serverName: 'socketio' });\n                    } else {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            resolve({\n                                version: version!,\n                                serverName: serverName!,\n                            });\n                        }\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Gets the web server name.\n     */\n    getWebServerName(): Promise<string> {\n        return this.request({\n            cacheKey: 'webName',\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('getAdapterName', (err, name) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(name!);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Check if the file exists\n     *\n     * @param adapter adapter name\n     * @param filename file name with the full path. it could be like vis.0/*\n     */\n    fileExists(adapter: string, filename: string): Promise<boolean> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('fileExists', adapter, filename, (err, exists) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(!!exists);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Read current user\n     */\n    getCurrentUser(): Promise<string> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: resolve => {\n                this._socket.emit('authEnabled', (_isSecure, user) => {\n                    resolve(user);\n                });\n            },\n        });\n    }\n\n    /**\n     * Get uuid\n     */\n    getUuid(): Promise<string> {\n        return this.request({\n            cacheKey: 'uuid',\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: async resolve => {\n                const obj = await this.getObject('system.meta.uuid');\n                resolve(obj?.native?.uuid);\n            },\n        });\n    }\n\n    /**\n     * Checks if a given feature is supported.\n     *\n     * @param feature The feature to check.\n     * @param update Force update.\n     */\n    checkFeatureSupported(feature: string, update?: boolean): Promise<any> {\n        return this.request({\n            cacheKey: `supportedFeatures_${feature}`,\n            forceUpdate: update,\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('checkFeatureSupported', feature, (err, features) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(features);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Get all adapter instances.\n     *\n     * @param update Force update.\n     */\n    /**\n     * Get all instances of the given adapter.\n     *\n     * @param adapter The name of the adapter.\n     * @param update Force update.\n     */\n    getAdapterInstances(adapter?: string | boolean, update?: boolean): Promise<ioBroker.InstanceObject[]> {\n        if (typeof adapter === 'boolean') {\n            update = adapter;\n            adapter = '';\n        }\n        adapter = adapter || '';\n\n        return this.request({\n            cacheKey: `instances_${adapter}`,\n            forceUpdate: update,\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: async resolve => {\n                const startKey = adapter ? `system.adapter.${adapter}.` : 'system.adapter.';\n                const endKey = `${startKey}\\u9999`;\n\n                const instances = await this.getObjectViewSystem('instance', startKey, endKey);\n                const instanceObjects = Object.values(instances);\n                if (adapter) {\n                    resolve(instanceObjects.filter(o => o.common.name === adapter));\n                } else {\n                    resolve(instanceObjects);\n                }\n            },\n        });\n    }\n\n    /**\n     * Get adapters with the given name.\n     *\n     * @param adapter The name of the adapter.\n     * @param update Force update.\n     */\n    getAdapters(adapter?: string, update?: boolean): Promise<ioBroker.AdapterObject[]> {\n        if (typeof adapter === 'boolean') {\n            update = adapter;\n            adapter = '';\n        }\n        adapter = adapter || '';\n\n        return this.request({\n            cacheKey: `adapter_${adapter}`,\n            forceUpdate: update,\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: async resolve => {\n                const adapters = await this.getObjectViewSystem(\n                    'adapter',\n                    `system.adapter.${adapter || ''}`,\n                    `system.adapter.${adapter || '\\u9999'}`,\n                );\n                const adapterObjects = Object.values(adapters);\n                if (adapter) {\n                    resolve(adapterObjects.filter(o => o.common.name === adapter));\n                } else {\n                    resolve(adapterObjects);\n                }\n            },\n        });\n    }\n\n    /**\n     * Get the list of all groups.\n     *\n     * @param update Force update.\n     */\n    getGroups(update?: boolean): Promise<ioBroker.GroupObject[]> {\n        return this.request({\n            cacheKey: 'groups',\n            forceUpdate: update,\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit(\n                    'getObjectView',\n                    'system',\n                    'group',\n                    {\n                        startkey: 'system.group.',\n                        endkey: 'system.group.\\u9999',\n                    },\n                    (err, doc) => {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            resolve(getObjectViewResultToArray<ioBroker.GroupObject>(doc));\n                        }\n                    },\n                );\n            },\n        });\n    }\n\n    /**\n     * Logout current user\n     */\n    logout(): Promise<string | null> {\n        return this.request({\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('logout', err => {\n                    err ? reject(err) : resolve(null);\n                });\n            },\n        });\n    }\n\n    /**\n     * Subscribe on instance message\n     *\n     * @param targetInstance instance, like 'cameras.0'\n     * @param messageType message type like 'startCamera/cam3'\n     * @param data optional data object\n     * @param callback message handler\n     */\n    subscribeOnInstance(\n        targetInstance: string,\n        messageType: string,\n        data: any,\n        callback: InstanceMessageCallback,\n    ): Promise<{\n        error?: string;\n        accepted?: boolean;\n        heartbeat?: number;\n    } | null> {\n        return this.request({\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('clientSubscribe', targetInstance, messageType, data, (err, subscribeResult) => {\n                    if (err) {\n                        reject(err);\n                    } else if (subscribeResult) {\n                        if (subscribeResult.error) {\n                            reject(subscribeResult.error);\n                        } else {\n                            if (!targetInstance.startsWith('system.adapter.')) {\n                                targetInstance = `system.adapter.${targetInstance}`;\n                            }\n                            // save callback\n                            this._instanceSubscriptions[targetInstance] =\n                                this._instanceSubscriptions[targetInstance] || [];\n\n                            if (\n                                !this._instanceSubscriptions[targetInstance].find(\n                                    subscription =>\n                                        subscription.messageType === messageType && subscription.callback === callback,\n                                )\n                            ) {\n                                this._instanceSubscriptions[targetInstance].push({\n                                    messageType,\n                                    callback,\n                                });\n                            }\n                            resolve(subscribeResult);\n                        }\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Unsubscribe from instance message\n     *\n     * @param targetInstance instance, like 'cameras.0'\n     * @param messageType message type like 'startCamera/cam3'\n     * @param callback message handler\n     */\n    unsubscribeFromInstance(\n        targetInstance: string,\n        messageType: string,\n        callback: InstanceMessageCallback,\n    ): Promise<boolean> {\n        if (!targetInstance.startsWith('system.adapter.')) {\n            targetInstance = `system.adapter.${targetInstance}`;\n        }\n\n        let deleted;\n        const promiseResults = [];\n        do {\n            deleted = false;\n            const index = this._instanceSubscriptions[targetInstance]?.findIndex(\n                sub => (!messageType || sub.messageType === messageType) && (!callback || sub.callback === callback),\n            );\n\n            if (index !== undefined && index !== null && index !== -1) {\n                deleted = true;\n                // remember messageType\n                const _messageType = this._instanceSubscriptions[targetInstance][index].messageType;\n\n                this._instanceSubscriptions[targetInstance].splice(index, 1);\n                if (!this._instanceSubscriptions[targetInstance].length) {\n                    delete this._instanceSubscriptions[targetInstance];\n                }\n\n                // try to find another subscription for this instance and messageType\n                const found =\n                    this._instanceSubscriptions[targetInstance] &&\n                    this._instanceSubscriptions[targetInstance].find(sub => sub.messageType === _messageType);\n\n                if (!found) {\n                    promiseResults.push(\n                        this.request({\n                            commandTimeout: false,\n                            executor: (resolve, reject) => {\n                                this._socket.emit(\n                                    'clientUnsubscribe',\n                                    targetInstance,\n                                    messageType,\n                                    (err, wasSubscribed) => (err ? reject(err) : resolve(wasSubscribed)),\n                                );\n                            },\n                        }),\n                    );\n                }\n            }\n        } while (deleted && (!callback || !messageType));\n\n        if (promiseResults.length) {\n            return Promise.all(promiseResults).then(results => !!results.find(result => result));\n        }\n\n        return Promise.resolve(false);\n    }\n\n    /**\n     * Send log to ioBroker log\n     *\n     * @param text Log text\n     * @param level `info`, `debug`, `warn`, `error` or `silly`\n     */\n    log(text: string, level?: string): Promise<null> {\n        return text\n            ? this.request({\n                  commandTimeout: false,\n                  executor: resolve => {\n                      this._socket.emit('log', text, level);\n                      return resolve(null);\n                  },\n              })\n            : Promise.resolve(null);\n    }\n\n    /**\n     * This is a special method for vis.\n     * It is used to not send to server the changes about \"nothing_selected\" state\n     *\n     * @param id The state that has to be ignored by communication\n     */\n    setStateToIgnore(id: string): void {\n        this.ignoreState = id;\n    }\n}\n","export interface DeferredPromise<T> extends Promise<T> {\n    resolve(value: T | PromiseLike<T>): void;\n    reject(reason?: any): void;\n}\n\nexport function createDeferredPromise<T = void>(): DeferredPromise<T> {\n    let res: (value: T | PromiseLike<T>) => void;\n    let rej: (reason?: any) => void;\n\n    const promise = new Promise<T>((resolve, reject) => {\n        res = resolve;\n        rej = reject;\n    }) as DeferredPromise<T>;\n\n    promise.resolve = res!;\n    promise.reject = rej!;\n\n    return promise;\n}\n","import { Connection, ERRORS, type RequestOptions } from './Connection.js';\nimport type { ConnectionProps } from './ConnectionProps.js';\nimport type {\n    AdminEmitEvents,\n    AdminListenEvents,\n    CompactAdapterInfo,\n    CompactHost,\n    CompactInstalledInfo,\n    CompactInstanceInfo,\n    CompactRepository,\n    CompactSystemRepository,\n    License,\n    LogFile,\n} from './SocketEvents.js';\nimport { getObjectViewResultToArray, normalizeHostId, objectIdToHostname } from './tools.js';\n\ninterface Certificate {\n    name: string;\n    type: 'public' | 'private' | 'chained';\n}\n\n// taken from \"@iobroker/js-controller-common-db/build/lib/common/notificationHandler\"\nexport type MultilingualObject = Exclude<ioBroker.StringOrTranslated, string>;\nexport type Severity = 'info' | 'notify' | 'alert';\nexport interface NotificationMessageObject {\n    message: string;\n    ts: number;\n}\n\nexport interface FilteredNotificationInformation {\n    [scope: string]: {\n        description: MultilingualObject;\n        name: MultilingualObject;\n        categories: {\n            [category: string]: {\n                description: MultilingualObject;\n                name: MultilingualObject;\n                severity: Severity;\n                instances: {\n                    [instance: string]: {\n                        messages: NotificationMessageObject[];\n                    };\n                };\n            };\n        };\n    };\n}\n\nfunction parseCertificate(name: string, cert: string): Certificate | void {\n    if (!cert) {\n        return;\n    }\n\n    let type: Certificate['type'];\n    // If it is a filename, it could be everything\n    if (cert.length < 700 && (cert.indexOf('/') !== -1 || cert.indexOf('\\\\') !== -1)) {\n        if (name.toLowerCase().includes('private')) {\n            type = 'private';\n        } else if (cert.toLowerCase().includes('private')) {\n            type = 'private';\n        } else if (name.toLowerCase().includes('public')) {\n            type = 'public';\n        } else if (cert.toLowerCase().includes('public')) {\n            type = 'public';\n        } else if (name.toLowerCase().includes('chain')) {\n            type = 'chained';\n        } else if (cert.toLowerCase().includes('chain')) {\n            type = 'chained';\n        } else {\n            // TODO: is this correct?\n            return;\n        }\n    } else {\n        type =\n            cert.substring(0, '-----BEGIN RSA PRIVATE KEY'.length) === '-----BEGIN RSA PRIVATE KEY' ||\n            cert.substring(0, '-----BEGIN PRIVATE KEY'.length) === '-----BEGIN PRIVATE KEY'\n                ? 'private'\n                : 'public';\n\n        if (type === 'public') {\n            const m = cert.split('-----END CERTIFICATE-----');\n            if (m.filter(t => t.replace(/\\r\\n|\\r|\\n/, '').trim()).length > 1) {\n                type = 'chained';\n            }\n        }\n    }\n    return { name, type };\n}\n\nexport interface IPAddress {\n    name: string;\n    address: string;\n    family: 'ipv4' | 'ipv6';\n    internal?: boolean;\n}\n\ninterface IPAddresses {\n    IPs4: IPAddress[];\n    IPs6: IPAddress[];\n}\n\nfunction parseIPAddresses(host: ioBroker.HostObject): IPAddresses {\n    const IPs4: IPAddress[] = [\n        {\n            name: '[IPv4] 0.0.0.0 - Listen on all IPs',\n            address: '0.0.0.0',\n            family: 'ipv4',\n        },\n    ];\n    const IPs6: IPAddress[] = [\n        {\n            name: '[IPv6] :: - Listen on all IPs',\n            address: '::',\n            family: 'ipv6',\n        },\n    ];\n    if (host.native?.hardware?.networkInterfaces) {\n        for (const [eth, iface] of Object.entries(host.native.hardware.networkInterfaces)) {\n            if (!iface) {\n                continue;\n            }\n\n            for (const ip of iface) {\n                if (ip.family !== 'IPv6') {\n                    IPs4.push({\n                        name: `[${ip.family}] ${ip.address} - ${eth}`,\n                        address: ip.address,\n                        family: 'ipv4',\n                    });\n                } else {\n                    IPs6.push({\n                        name: `[${ip.family}] ${ip.address} - ${eth}`,\n                        address: ip.address,\n                        family: 'ipv6',\n                    });\n                }\n            }\n        }\n    }\n    return { IPs4, IPs6 };\n}\n\nexport class AdminConnection extends Connection<AdminListenEvents, AdminEmitEvents> {\n    constructor(props: ConnectionProps) {\n        super(props);\n    }\n\n    // We overload the request method here because the admin connection's methods all have `requireAdmin: true`\n    protected request<T>(options: RequestOptions<T>): Promise<T> {\n        return super.request<T>({ requireAdmin: true, ...options });\n    }\n\n    /**\n     * Get the stored certificates.\n     *\n     * @param update Force update.\n     */\n    getCertificates(update?: boolean): Promise<Certificate[]> {\n        return this.request({\n            cacheKey: 'cert',\n            forceUpdate: update,\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: async resolve => {\n                const obj = await this.getObject('system.certificates');\n                if (obj?.native?.certificates) {\n                    resolve(\n                        Object.entries<string>(obj.native.certificates)\n                            .map(([name, cert]) => parseCertificate(name, cert))\n                            .filter((cert): cert is Certificate => !!cert),\n                    );\n                } else {\n                    resolve([]);\n                }\n            },\n        });\n    }\n\n    /**\n     * Get the logs from a host (only for admin connection).\n     */\n    getLogs(host: string, linesNumber: number = 200): Promise<(string | number)[] | string | { error: string }> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: resolve => {\n                this._socket.emit('sendToHost', host, 'getLogs', linesNumber || 200, (lines: any) => {\n                    resolve(lines);\n                });\n            },\n        });\n    }\n\n    /**\n     * Upgrade adapter with webserver.\n     */\n    upgradeAdapterWithWebserver(\n        host: string,\n        options: {\n            version: string;\n            adapterName: string;\n            port: number;\n            useHttps?: boolean;\n            certPublicName?: string;\n            certPrivateName?: string;\n        },\n    ): Promise<{ result: boolean }> {\n        return this.request({\n            commandTimeout: false,\n            executor: resolve => {\n                this._socket.emit(\n                    'sendToHost',\n                    host,\n                    'upgradeAdapterWithWebserver',\n                    options as any,\n                    (result: unknown) => {\n                        resolve(result as { result: boolean });\n                    },\n                );\n            },\n        });\n    }\n\n    /**\n     * Upgrade controller\n     */\n    upgradeController(host: string, version: string, adminInstance: number): Promise<string> {\n        return this.request({\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit(\n                    'sendToHost',\n                    host,\n                    'upgradeController',\n                    {\n                        version,\n                        adminInstance,\n                    } as any,\n                    (result: unknown) => {\n                        const _result = result as {\n                            result: string;\n                            error?: string;\n                        };\n                        if (_result.error) {\n                            reject(_result.error);\n                        } else {\n                            resolve(_result.result);\n                        }\n                    },\n                );\n            },\n        });\n    }\n\n    /**\n     * Read licenses from ioBroker.net anew\n     */\n    updateLicenses(\n        /** login for ioBroker.net */\n        login: string,\n        /** password for ioBroker.net */\n        password: string,\n    ): Promise<License[] | undefined> {\n        return this.request({\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('updateLicenses', login, password, (err, licenses?: License[]) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(licenses);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Upgrade controller\n     */\n    upgradeOsPackages(\n        host: string,\n        packages: { name: string; version?: string }[],\n        restart?: boolean,\n    ): Promise<{ success: boolean; error?: string }> {\n        return this.request({\n            commandTimeout: false,\n            executor: resolve => {\n                this._socket.emit(\n                    'sendToHost',\n                    host,\n                    'upgradeOsPackages',\n                    {\n                        packages,\n                        restart: !!restart,\n                    } as any,\n                    (result: unknown) => {\n                        resolve(result as { success: boolean; error?: string });\n                    },\n                );\n            },\n        });\n    }\n\n    /**\n     * Get the log files (only for admin connection).\n     */\n    getLogsFiles(host: string): Promise<LogFile[]> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('readLogs', host, (err, files) => {\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve(files!);\n                });\n            },\n        });\n    }\n\n    /**\n     * Delete the logs from a host (only for admin connection).\n     */\n    delLogs(host: string): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('sendToHost', host, 'delLogs', null, err => {\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve();\n                });\n            },\n        });\n    }\n\n    /**\n     * Delete a file of an adapter.\n     *\n     * @param adapter The adapter name.\n     * @param fileName The file name.\n     */\n    deleteFile(adapter: string, fileName: string): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('deleteFile', adapter, fileName, err => {\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve();\n                });\n            },\n        });\n    }\n\n    /**\n     * Delete a folder of an adapter.\n     *\n     * @param adapter The adapter name.\n     * @param folderName The folder name.\n     */\n    deleteFolder(adapter: string, folderName: string): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('deleteFolder', adapter, folderName, err => {\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve();\n                });\n            },\n        });\n    }\n    /**\n     * Rename file or folder in ioBroker DB\n     *\n     * @param adapter instance name\n     * @param oldName current file name, e.g., main/vis-views.json\n     * @param newName new file name, e.g., main/vis-views-new.json\n     */\n    rename(adapter: string, oldName: string, newName: string): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('rename', adapter, oldName, newName, err => {\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve();\n                });\n            },\n        });\n    }\n\n    /**\n     * Rename file in ioBroker DB\n     *\n     * @param adapter instance name\n     * @param oldName current file name, e.g., main/vis-views.json\n     * @param newName new file name, e.g., main/vis-views-new.json\n     */\n    renameFile(adapter: string, oldName: string, newName: string): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit('renameFile', adapter, oldName, newName, err => {\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve();\n                });\n            },\n        });\n    }\n\n    /**\n     * Get the list of all hosts.\n     *\n     * @param update Force update.\n     */\n    getHosts(update?: boolean): Promise<ioBroker.HostObject[]> {\n        return this.request({\n            cacheKey: 'hosts',\n            forceUpdate: update,\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit(\n                    'getObjectView',\n                    'system',\n                    'host',\n                    { startkey: 'system.host.', endkey: 'system.host.\\u9999' },\n                    (err, doc) => {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            resolve(getObjectViewResultToArray<ioBroker.HostObject>(doc));\n                        }\n                    },\n                );\n            },\n        });\n    }\n\n    /**\n     * Get the list of all users.\n     *\n     * @param update Force update.\n     */\n    getUsers(update?: boolean): Promise<ioBroker.UserObject[]> {\n        return this.request({\n            cacheKey: 'users',\n            forceUpdate: update,\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: (resolve, reject) => {\n                this._socket.emit(\n                    'getObjectView',\n                    'system',\n                    'user',\n                    { startkey: 'system.user.', endkey: 'system.user.\\u9999' },\n                    (err, doc) => {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            resolve(getObjectViewResultToArray<ioBroker.UserObject>(doc));\n                        }\n                    },\n                );\n            },\n        });\n    }\n\n    /**\n     * Rename a group.\n     *\n     * @param id The id.\n     * @param newId The new id.\n     * @param newName The new name.\n     */\n    renameGroup(id: string, newId: string, newName: ioBroker.StringOrTranslated): Promise<void> {\n        return this.request({\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: async resolve => {\n                const groups = await this.getGroups(true);\n                // renaming a group happens by re-creating the object under a different ID\n                const subGroups = groups.filter(g => g._id.startsWith(`${id}.`));\n                // First, do this for all sub-groups\n                for (const group of subGroups) {\n                    const oldGroupId = group._id;\n                    const newGroupId = (newId + group._id.substring(id.length)) as ioBroker.ObjectIDs.Group;\n                    group._id = newGroupId;\n\n                    // Create a new object, then delete the old one if it worked\n                    await this.setObject(newGroupId, group);\n                    await this.delObject(oldGroupId);\n                }\n                // Then for the parent group\n                const parentGroup = groups.find(g => g._id === id);\n                if (parentGroup) {\n                    const oldGroupId = parentGroup._id;\n                    parentGroup._id = newId as ioBroker.ObjectIDs.Group;\n                    if (newName !== undefined) {\n                        (parentGroup.common as any) ??= {};\n                        parentGroup.common.name = newName as any;\n                    }\n\n                    // Create a new object, then delete the old one if it worked\n                    await this.setObject(newId, parentGroup);\n                    await this.delObject(oldGroupId);\n                }\n\n                resolve();\n            },\n        });\n    }\n\n    /**\n     * Get the host information.\n     *\n     * @param host host name\n     * @param update Force update.\n     * @param timeoutMs optional read timeout.\n     */\n    getHostInfo(host: string, update?: boolean, timeoutMs?: number): Promise<any> {\n        host = normalizeHostId(host);\n        return this.request({\n            cacheKey: `hostInfo_${host}`,\n            forceUpdate: update,\n            commandTimeout: timeoutMs,\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('sendToHost', host, 'getHostInfo', null, data => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (data === ERRORS.PERMISSION_ERROR) {\n                        reject('May not read \"getHostInfo\"');\n                    } else if (!data) {\n                        reject('Cannot read \"getHostInfo\"');\n                    } else {\n                        resolve(data);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Get the host information (short version).\n     *\n     * @param host host name\n     * @param update Force update.\n     * @param timeoutMs optional read timeout.\n     */\n    getHostInfoShort(host: string, update?: boolean, timeoutMs?: number): Promise<any> {\n        host = normalizeHostId(host);\n        return this.request({\n            cacheKey: `hostInfoShort_${host}`,\n            forceUpdate: update,\n            commandTimeout: timeoutMs,\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('sendToHost', host, 'getHostInfoShort', null, data => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (data === ERRORS.PERMISSION_ERROR) {\n                        reject('May not read \"getHostInfoShort\"');\n                    } else if (!data) {\n                        reject('Cannot read \"getHostInfoShort\"');\n                    } else {\n                        resolve(data);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Get the repository.\n     *\n     * @param host The host name.\n     * @param args The arguments.\n     * @param update Force update.\n     * @param timeoutMs timeout in ms.\n     */\n    getRepository(\n        host: string,\n        args?: { update?: boolean; repo?: string | string[] } | string | null,\n        update?: boolean,\n        timeoutMs?: number,\n    ): Promise<any> {\n        return this.request({\n            cacheKey: `repository_${host}`,\n            forceUpdate: update,\n            commandTimeout: timeoutMs,\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('sendToHost', host, 'getRepository', args, data => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (data === ERRORS.PERMISSION_ERROR) {\n                        reject('May not read \"getRepository\"');\n                    } else if (!data) {\n                        reject('Cannot read \"getRepository\"');\n                    } else {\n                        resolve(data);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Get the installed.\n     *\n     * @param host The host name.\n     * @param update Force update.\n     * @param cmdTimeout timeout in ms\n     */\n    getInstalled(host: string, update?: boolean, cmdTimeout?: number): Promise<any> {\n        host = normalizeHostId(host);\n\n        return this.request({\n            cacheKey: `installed_${host}`,\n            forceUpdate: update,\n            commandTimeout: cmdTimeout,\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('sendToHost', host, 'getInstalled', null, data => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (data === ERRORS.PERMISSION_ERROR) {\n                        reject('May not read \"getInstalled\"');\n                    } else if (!data) {\n                        reject('Cannot read \"getInstalled\"');\n                    } else {\n                        resolve(data);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Execute a command on a host.\n     */\n    cmdExec(\n        /** The host name. */\n        host: string,\n        /** The command to execute. */\n        cmd: string,\n        /** The command ID. */\n        cmdId: number,\n        /** Timeout of command in ms */\n        cmdTimeout?: number,\n    ): Promise<void> {\n        return this.request({\n            commandTimeout: cmdTimeout,\n            executor: (resolve, reject, timeout) => {\n                host = normalizeHostId(host);\n\n                this._socket.emit('cmdExec', host, cmdId, cmd, err => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve();\n                });\n            },\n        });\n    }\n\n    /**\n     * Read the base settings of a given host.\n     *\n     * @param host The host name.\n     */\n    readBaseSettings(host: string): Promise<{ config?: ioBroker.IoBrokerJson; isActive?: boolean }> {\n        // Make sure we deal with a hostname, not an object ID\n        host = objectIdToHostname(host);\n\n        return this.request({\n            requireFeatures: ['CONTROLLER_READWRITE_BASE_SETTINGS'],\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('sendToHost', host, 'readBaseSettings', null, data => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n\n                    if (data === ERRORS.PERMISSION_ERROR) {\n                        reject('May not read \"BaseSettings\"');\n                    } else if (!data) {\n                        reject('Cannot read \"BaseSettings\"');\n                    } else if ((data as { error?: string }).error) {\n                        reject(new Error((data as { error?: string }).error));\n                    } else {\n                        resolve(data as { config: ioBroker.IoBrokerJson; isActive: boolean });\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Write the base settings of a given host.\n     *\n     * @param host The host name.\n     * @param config The configuration to write.\n     */\n    writeBaseSettings(host: string, config: ioBroker.IoBrokerJson): Promise<{ error?: any; result?: 'ok' }> {\n        // Make sure we deal with a hostname, not an object ID\n        host = objectIdToHostname(host);\n\n        return this.request({\n            requireFeatures: ['CONTROLLER_READWRITE_BASE_SETTINGS'],\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('sendToHost', host, 'writeBaseSettings', config, data => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n\n                    if (data === ERRORS.PERMISSION_ERROR) {\n                        reject('May not write \"BaseSettings\"');\n                    } else if (!data) {\n                        reject('Cannot write \"BaseSettings\"');\n                    } else {\n                        resolve(data);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Send command to restart the iobroker on host\n     *\n     * @param host The host name.\n     */\n    restartController(host: string): Promise<true> {\n        // Make sure we deal with a hostname, not an object ID\n        host = objectIdToHostname(host);\n\n        return this.request({\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('sendToHost', host, 'restartController', null, () => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    resolve(true);\n                });\n            },\n        });\n    }\n\n    /**\n     * Read statistics information from host\n     *\n     * @param host The host name.\n     * @param typeOfDiag one of none, normal, no-city, extended\n     */\n    getDiagData(host: string, typeOfDiag: string): Promise<Record<string, any> | null> {\n        // Make sure we deal with a hostname, not an object ID\n        host = objectIdToHostname(host);\n\n        return this.request({\n            executor: (resolve, _reject, timeout) => {\n                this._socket.emit('sendToHost', host, 'getDiagData', typeOfDiag, result => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (!result) {\n                        resolve(null);\n                    } else {\n                        resolve(result as Promise<Record<string, any>>);\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Change the password of the given user.\n     *\n     * @param user The user name.\n     * @param password The new password.\n     */\n    changePassword(user: string, password: string): Promise<void> {\n        return this.request({\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('changePassword', user, password, err => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve();\n                });\n            },\n        });\n    }\n\n    /**\n     * Get the IP addresses of the given host.\n     *\n     * @param host The host name.\n     * @param update Force update.\n     */\n    getIpAddresses(host: string, update?: boolean): Promise<string[]> {\n        host = normalizeHostId(host);\n        return this.request({\n            cacheKey: `IPs_${host}`,\n            forceUpdate: update,\n            // TODO: check if this should time out\n            commandTimeout: false,\n            executor: async resolve => {\n                const obj = await this.getObject(host);\n                resolve(obj?.common.address ?? []);\n            },\n        });\n    }\n\n    /**\n     * Get the IP addresses with interface names of the given host or find host by IP.\n     *\n     * @param ipOrHostName The IP address or host name.\n     * @param update Force update.\n     */\n    getHostByIp(ipOrHostName: string, update?: boolean): Promise<IPAddress[]> {\n        // Make sure we deal with a hostname, not an object ID\n        ipOrHostName = objectIdToHostname(ipOrHostName);\n\n        return this.request({\n            cacheKey: `rIPs_${ipOrHostName}`,\n            forceUpdate: update,\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('getHostByIp', ipOrHostName, (ip, host) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n\n                    const { IPs4, IPs6 } = parseIPAddresses(host);\n                    resolve([...IPs4, ...IPs6]);\n                });\n            },\n        });\n    }\n\n    /**\n     * Encrypt a text\n     *\n     * @param plaintext The text to encrypt.\n     */\n    encrypt(plaintext: string): Promise<string> {\n        return this.request({\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('encrypt', plaintext, (err, ciphertext) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve(ciphertext!);\n                });\n            },\n        });\n    }\n\n    /**\n     * Decrypt a text\n     *\n     * @param ciphertext The text to decrypt.\n     */\n    decrypt(ciphertext: string): Promise<string> {\n        return this.request({\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('decrypt', ciphertext, (err, plaintext) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve(plaintext!);\n                });\n            },\n        });\n    }\n\n    /**\n     * Change access rights for file\n     *\n     * @param adapter adapter name\n     * @param path file name with a full path. It could be like 'vis.0/*'\n     * @param options like {mode: 0x644}\n     * @param options.mode The new mode for the file\n     */\n    chmodFile(\n        adapter: string | null,\n        path: string,\n        options?: { mode: number | string },\n    ): Promise<ioBroker.ChownFileResult[]> {\n        return this.request({\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('chmodFile', adapter, path, options, (err, processed) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve(processed!);\n                });\n            },\n        });\n    }\n\n    /**\n     * Change an owner or/and owner group for file\n     *\n     * @param adapter adapter name\n     * @param filename file name with a full path. it could be like vis.0/*\n     * @param options like {owner: \"newOwner\", ownerGroup: \"newGroup\"}\n     * @param options.owner The new owner for the file\n     * @param options.ownerGroup The new owner group for the file\n     */\n    chownFile(\n        adapter: string,\n        filename: string,\n        options?: { owner?: string; ownerGroup?: string },\n    ): Promise<ioBroker.ChownFileResult[]> {\n        return this.request({\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('chownFile', adapter, filename, options, (err, processed) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve(processed!);\n                });\n            },\n        });\n    }\n\n    /**\n     * Get the alarm notifications from a host (only for admin connection).\n     *\n     * @param host The host name.\n     * @param category - optional\n     */\n    getNotifications(host: string, category?: string): Promise<void | { result: FilteredNotificationInformation }> {\n        return this.request({\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('sendToHost', host, 'getNotifications', { category }, notifications => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    resolve(\n                        notifications as {\n                            result: FilteredNotificationInformation;\n                        },\n                    );\n                });\n            },\n        });\n    }\n\n    /**\n     * Clear the alarm notifications on a host (only for admin connection).\n     *\n     * @param host The host name.\n     * @param category - optional\n     */\n    clearNotifications(host: string, category: string): Promise<any> {\n        return this.request({\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('sendToHost', host, 'clearNotifications', { category }, notifications => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    resolve(notifications);\n                });\n            },\n        });\n    }\n\n    /**\n     * Read if only easy mode is allowed (only for admin connection).\n     */\n    getIsEasyModeStrict(): Promise<boolean> {\n        return this.request({\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('getIsEasyModeStrict', (err, isStrict) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve(!!isStrict);\n                });\n            },\n        });\n    }\n\n    /**\n     * Read easy mode configuration (only for admin connection).\n     */\n    getEasyMode(): Promise<{\n        strict: boolean;\n        configs: {\n            id: string;\n            title: ioBroker.StringOrTranslated;\n            desc: ioBroker.StringOrTranslated;\n            color: string;\n            url: string;\n            icon: string;\n            materialize: boolean;\n            jsonConfig: boolean;\n            version: string;\n        }[];\n    }> {\n        return this.request({\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('getEasyMode', (err, config) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n\n                    timeout.clearTimeout();\n\n                    if (err) {\n                        reject(new Error(err));\n                    } else {\n                        resolve(\n                            config as {\n                                strict: boolean;\n                                configs: {\n                                    id: string;\n                                    title: ioBroker.StringOrTranslated;\n                                    desc: ioBroker.StringOrTranslated;\n                                    color: string;\n                                    url: string;\n                                    icon: string;\n                                    materialize: boolean;\n                                    jsonConfig: boolean;\n                                    version: string;\n                                }[];\n                            },\n                        );\n                    }\n                });\n            },\n        });\n    }\n\n    /**\n     * Read adapter ratings\n     */\n    getRatings(update?: boolean): Promise<{\n        [adapterName: string]: {\n            rating: {\n                r: number;\n                c: number;\n            };\n            [versionNumber: string]: {\n                r: number;\n                c: number;\n            };\n        };\n    }> {\n        return this.request({\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('getRatings', !!update, (err, ratings) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (err) {\n                        reject(new Error(err));\n                    } else {\n                        resolve(\n                            ratings as {\n                                [adapterName: string]: {\n                                    rating: {\n                                        r: number;\n                                        c: number;\n                                    };\n                                    [versionNumber: string]: {\n                                        r: number;\n                                        c: number;\n                                    };\n                                };\n                            },\n                        );\n                    }\n                });\n            },\n        });\n    }\n\n    getCurrentSession(cmdTimeout?: number): any {\n        const controller = new AbortController();\n\n        return this.request({\n            commandTimeout: cmdTimeout || 5000,\n            onTimeout: () => {\n                controller.abort();\n            },\n            executor: async (resolve, reject, timeout) => {\n                try {\n                    const res = await fetch('./session', {\n                        signal: controller.signal,\n                    });\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    resolve(res.json());\n                } catch (e) {\n                    reject(`getCurrentSession: ${e}`);\n                }\n            },\n        });\n    }\n\n    /**\n     * Read current web, socketio or admin namespace, like admin.0\n     */\n    getCurrentInstance(): Promise<string> {\n        return this.request({\n            cacheKey: 'currentInstance',\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('getCurrentInstance', (err, namespace) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve(namespace!);\n                });\n            },\n        });\n    }\n\n    /**\n     * Get all instances of the given adapter or get all instances.\n     *\n     * @param adapter The name of the adapter.\n     * @param update Force update.\n     */\n    getAdapterInstances(adapter?: string | boolean, update?: boolean): Promise<ioBroker.InstanceObject[]> {\n        let adapterStr: string;\n        if (typeof adapter === 'boolean') {\n            update = adapter;\n            adapterStr = '';\n        } else {\n            adapterStr = adapter || '';\n        }\n\n        return this.request({\n            cacheKey: `instances_${adapterStr}`,\n            forceUpdate: update,\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('getAdapterInstances', adapterStr, (err, instances) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve(instances!);\n                });\n            },\n        });\n    }\n\n    /**\n     * Get adapters with the given name or get all adapters.\n     *\n     * @param adapter The name of the adapter.\n     * @param update Force update.\n     */\n    getAdapters(adapter?: string | boolean, update?: boolean): Promise<ioBroker.AdapterObject[]> {\n        let adapterStr: string;\n        if (typeof adapter === 'boolean') {\n            update = adapter;\n            adapterStr = '';\n        } else {\n            adapterStr = adapter || '';\n        }\n\n        return this.request({\n            cacheKey: `adapter_${adapterStr}`,\n            forceUpdate: update,\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('getAdapters', adapterStr, (err, adapters) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve(adapters!);\n                });\n            },\n        });\n    }\n\n    // returns very optimized information for adapters to minimize a connection load\n    getCompactAdapters(update?: boolean): Promise<Record<string, CompactAdapterInfo>> {\n        return this.request({\n            cacheKey: 'compactAdapters',\n            forceUpdate: update,\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('getCompactAdapters', (err, adapters) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve(adapters!);\n                });\n            },\n        });\n    }\n\n    // reset cached promise, so next time the information will be requested anew\n    getAdaptersResetCache(adapter?: string): void {\n        adapter = adapter ?? '';\n        this.resetCache(`adapter_${adapter}`);\n        this.resetCache(`compactAdapters`);\n    }\n\n    // returns very optimized information for adapters to minimize a connection load\n    getCompactInstances(update?: boolean): Promise<Record<string, CompactInstanceInfo>> {\n        return this.request({\n            cacheKey: 'compactInstances',\n            forceUpdate: update,\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('getCompactInstances', (err, instances) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve(instances!);\n                });\n            },\n        });\n    }\n\n    // reset cached promise, so next time the information will be requested anew\n    getAdapterInstancesResetCache(adapter?: string): void {\n        adapter = adapter ?? '';\n        this.resetCache(`instances_${adapter}`);\n        this.resetCache(`compactInstances`);\n    }\n\n    // returns very optimized information for adapters to minimize a connection load\n    // reads only a version of installed adapter\n    getCompactInstalled(host: string, update?: boolean, cmdTimeout?: number): Promise<CompactInstalledInfo> {\n        host = normalizeHostId(host);\n\n        return this.request({\n            cacheKey: `installedCompact_${host}`,\n            forceUpdate: update,\n            commandTimeout: cmdTimeout,\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('getCompactInstalled', host, data => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n\n                    if (data === ERRORS.PERMISSION_ERROR) {\n                        reject('May not read \"getCompactInstalled\"');\n                    } else if (!data) {\n                        reject('Cannot read \"getCompactInstalled\"');\n                    } else {\n                        resolve(data);\n                    }\n                });\n            },\n        });\n    }\n\n    // reset cached promise, so next time the information will be requested anew\n    getInstalledResetCache(host?: string): void {\n        if (!host) {\n            this.resetCache(`installedCompact_`, true);\n            this.resetCache(`installed_`, true);\n        } else {\n            this.resetCache(`installedCompact_${host}`);\n            this.resetCache(`installed_${host}`);\n        }\n    }\n\n    /**\n     * Get the repository in compact form (only version and icon).\n     *\n     * @param host The host name.\n     * @param update Force update.\n     * @param timeoutMs timeout in ms.\n     */\n    getCompactRepository(host: string, update?: boolean, timeoutMs?: number): Promise<CompactRepository> {\n        host = normalizeHostId(host);\n\n        return this.request({\n            cacheKey: `repositoryCompact_${host}`,\n            forceUpdate: update,\n            commandTimeout: timeoutMs,\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('getCompactRepository', host, data => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n\n                    if (data === ERRORS.PERMISSION_ERROR) {\n                        reject('May not read \"getCompactRepository\"');\n                    } else if (!data) {\n                        reject('Cannot read \"getCompactRepository\"');\n                    } else {\n                        resolve(data);\n                    }\n                });\n            },\n        });\n    }\n\n    // reset cached promise, so next time the information will be requested anew\n    getRepositoryResetCache(host: string): void {\n        if (!host) {\n            this.resetCache(`repositoryCompact_`, true);\n            this.resetCache(`repository_`, true);\n        } else {\n            this.resetCache(`repositoryCompact_${host}`);\n            this.resetCache(`repository_${host}`);\n        }\n    }\n\n    /**\n     * Get the list of all hosts in compact form (only _id, common.name, common.icon, common.color, native.hardware.networkInterfaces)\n     *\n     * @param update Force update.\n     */\n    getCompactHosts(update?: boolean): Promise<CompactHost[]> {\n        return this.request({\n            cacheKey: 'hostsCompact',\n            forceUpdate: update,\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('getCompactHosts', (err, compactHostsInfo) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve(compactHostsInfo!);\n                });\n            },\n        });\n    }\n\n    /**\n     * Get `system.repository` without big JSON\n     */\n    getCompactSystemRepositories(update?: boolean): Promise<CompactSystemRepository> {\n        return this.request({\n            cacheKey: 'repositoriesCompact',\n            forceUpdate: update,\n            executor: (resolve, reject, timeout) => {\n                this._socket.emit('getCompactSystemRepositories', (err, systemRepositories) => {\n                    if (timeout.elapsed) {\n                        return;\n                    }\n                    timeout.clearTimeout();\n                    if (err) {\n                        reject(err);\n                    }\n                    resolve(systemRepositories!);\n                });\n            },\n        });\n    }\n}\n","import { useRef } from \"react\";\n\n// Saves incoming handler to the ref in order to avoid \"useCallback hell\"\nexport function useEventCallback<T>(handler?: (value: T) => void): (value: T) => void {\n  const callbackRef = useRef(handler);\n  const fn = useRef((value: T) => {\n    callbackRef.current && callbackRef.current(value);\n  });\n  callbackRef.current = handler;\n\n  return fn.current;\n}\n","// Clamps a value between an upper and lower bound.\n// We use ternary operators because it makes the minified code\n// 2 times shorter then `Math.min(Math.max(a,b),c)`\nexport const clamp = (number: number, min = 0, max = 1): number => {\n  return number > max ? max : number < min ? min : number;\n};\n","import React, { useRef, useMemo, useEffect } from \"react\";\n\nimport { useEventCallback } from \"../../hooks/useEventCallback\";\nimport { clamp } from \"../../utils/clamp\";\n\nexport interface Interaction {\n  left: number;\n  top: number;\n}\n\n// Check if an event was triggered by touch\nconst isTouch = (event: MouseEvent | TouchEvent): event is TouchEvent => \"touches\" in event;\n\n// Finds a proper touch point by its identifier\nconst getTouchPoint = (touches: TouchList, touchId: null | number): Touch => {\n  for (let i = 0; i < touches.length; i++) {\n    if (touches[i].identifier === touchId) return touches[i];\n  }\n  return touches[0];\n};\n\n// Finds the proper window object to fix iframe embedding issues\nconst getParentWindow = (node?: HTMLDivElement | null): Window => {\n  return (node && node.ownerDocument.defaultView) || self;\n};\n\n// Returns a relative position of the pointer inside the node's bounding box\nconst getRelativePosition = (\n  node: HTMLDivElement,\n  event: MouseEvent | TouchEvent,\n  touchId: null | number\n): Interaction => {\n  const rect = node.getBoundingClientRect();\n\n  // Get user's pointer position from `touches` array if it's a `TouchEvent`\n  const pointer = isTouch(event) ? getTouchPoint(event.touches, touchId) : (event as MouseEvent);\n\n  return {\n    left: clamp((pointer.pageX - (rect.left + getParentWindow(node).pageXOffset)) / rect.width),\n    top: clamp((pointer.pageY - (rect.top + getParentWindow(node).pageYOffset)) / rect.height),\n  };\n};\n\n// Browsers introduced an intervention, making touch events passive by default.\n// This workaround removes `preventDefault` call from the touch handlers.\n// https://github.com/facebook/react/issues/19651\nconst preventDefaultMove = (event: MouseEvent | TouchEvent): void => {\n  !isTouch(event) && event.preventDefault();\n};\n\n// Prevent mobile browsers from handling mouse events (conflicting with touch ones).\n// If we detected a touch interaction before, we prefer reacting to touch events only.\nconst isInvalid = (event: MouseEvent | TouchEvent, hasTouch: boolean): boolean => {\n  return hasTouch && !isTouch(event);\n};\n\ninterface Props {\n  onMove: (interaction: Interaction) => void;\n  onKey: (offset: Interaction) => void;\n  children: React.ReactNode;\n}\n\nconst InteractiveBase = ({ onMove, onKey, ...rest }: Props) => {\n  const container = useRef<HTMLDivElement>(null);\n  const onMoveCallback = useEventCallback<Interaction>(onMove);\n  const onKeyCallback = useEventCallback<Interaction>(onKey);\n  const touchId = useRef<null | number>(null);\n  const hasTouch = useRef(false);\n\n  const [handleMoveStart, handleKeyDown, toggleDocumentEvents] = useMemo(() => {\n    const handleMoveStart = ({ nativeEvent }: React.MouseEvent | React.TouchEvent) => {\n      const el = container.current;\n      if (!el) return;\n\n      // Prevent text selection\n      preventDefaultMove(nativeEvent);\n\n      if (isInvalid(nativeEvent, hasTouch.current) || !el) return;\n\n      if (isTouch(nativeEvent)) {\n        hasTouch.current = true;\n        const changedTouches = nativeEvent.changedTouches || [];\n        if (changedTouches.length) touchId.current = changedTouches[0].identifier;\n      }\n\n      el.focus();\n      onMoveCallback(getRelativePosition(el, nativeEvent, touchId.current));\n      toggleDocumentEvents(true);\n    };\n\n    const handleMove = (event: MouseEvent | TouchEvent) => {\n      // Prevent text selection\n      preventDefaultMove(event);\n\n      // If user moves the pointer outside of the window or iframe bounds and release it there,\n      // `mouseup`/`touchend` won't be fired. In order to stop the picker from following the cursor\n      // after the user has moved the mouse/finger back to the document, we check `event.buttons`\n      // and `event.touches`. It allows us to detect that the user is just moving his pointer\n      // without pressing it down\n      const isDown = isTouch(event) ? event.touches.length > 0 : event.buttons > 0;\n\n      if (isDown && container.current) {\n        onMoveCallback(getRelativePosition(container.current, event, touchId.current));\n      } else {\n        toggleDocumentEvents(false);\n      }\n    };\n\n    const handleMoveEnd = () => toggleDocumentEvents(false);\n\n    const handleKeyDown = (event: React.KeyboardEvent) => {\n      const keyCode = event.which || event.keyCode;\n\n      // Ignore all keys except arrow ones\n      if (keyCode < 37 || keyCode > 40) return;\n      // Do not scroll page by arrow keys when document is focused on the element\n      event.preventDefault();\n      // Send relative offset to the parent component.\n      // We use codes (37, 38, 39, 40) instead of keys ('ArrowRight', 'ArrowDown', etc)\n      // to reduce the size of the library\n      onKeyCallback({\n        left: keyCode === 39 ? 0.05 : keyCode === 37 ? -0.05 : 0,\n        top: keyCode === 40 ? 0.05 : keyCode === 38 ? -0.05 : 0,\n      });\n    };\n\n    function toggleDocumentEvents(state?: boolean) {\n      const touch = hasTouch.current;\n      const el = container.current;\n      const parentWindow = getParentWindow(el);\n\n      // Add or remove additional pointer event listeners\n      const toggleEvent = state ? parentWindow.addEventListener : parentWindow.removeEventListener;\n      toggleEvent(touch ? \"touchmove\" : \"mousemove\", handleMove);\n      toggleEvent(touch ? \"touchend\" : \"mouseup\", handleMoveEnd);\n    }\n\n    return [handleMoveStart, handleKeyDown, toggleDocumentEvents];\n  }, [onKeyCallback, onMoveCallback]);\n\n  // Remove window event listeners before unmounting\n  useEffect(() => toggleDocumentEvents, [toggleDocumentEvents]);\n\n  return (\n    <div\n      {...rest}\n      onTouchStart={handleMoveStart}\n      onMouseDown={handleMoveStart}\n      className=\"react-colorful__interactive\"\n      ref={container}\n      onKeyDown={handleKeyDown}\n      tabIndex={0}\n      role=\"slider\"\n    />\n  );\n};\n\nexport const Interactive = React.memo(InteractiveBase);\n","export const formatClassName = (names: unknown[]): string => names.filter(Boolean).join(\" \");\n","import React from \"react\";\nimport { formatClassName } from \"../../utils/format\";\n\ninterface Props {\n  className?: string;\n  top?: number;\n  left: number;\n  color: string;\n}\n\nexport const Pointer = ({ className, color, left, top = 0.5 }: Props): JSX.Element => {\n  const nodeClassName = formatClassName([\"react-colorful__pointer\", className]);\n\n  const style = {\n    top: `${top * 100}%`,\n    left: `${left * 100}%`,\n  };\n\n  return (\n    <div className={nodeClassName} style={style}>\n      <div className=\"react-colorful__pointer-fill\" style={{ backgroundColor: color }} />\n    </div>\n  );\n};\n","export const round = (number: number, digits = 0, base = Math.pow(10, digits)): number => {\n  return Math.round(base * number) / base;\n};\n","import { round } from \"./round\";\nimport { RgbaColor, RgbColor, HslaColor, HslColor, HsvaColor, HsvColor } from \"../types\";\n\n/**\n * Valid CSS <angle> units.\n * https://developer.mozilla.org/en-US/docs/Web/CSS/angle\n */\nconst angleUnits: Record<string, number> = {\n  grad: 360 / 400,\n  turn: 360,\n  rad: 360 / (Math.PI * 2),\n};\n\nexport const hexToHsva = (hex: string): HsvaColor => rgbaToHsva(hexToRgba(hex));\n\nexport const hexToRgba = (hex: string): RgbaColor => {\n  if (hex[0] === \"#\") hex = hex.substring(1);\n\n  if (hex.length < 6) {\n    return {\n      r: parseInt(hex[0] + hex[0], 16),\n      g: parseInt(hex[1] + hex[1], 16),\n      b: parseInt(hex[2] + hex[2], 16),\n      a: hex.length === 4 ? round(parseInt(hex[3] + hex[3], 16) / 255, 2) : 1,\n    };\n  }\n\n  return {\n    r: parseInt(hex.substring(0, 2), 16),\n    g: parseInt(hex.substring(2, 4), 16),\n    b: parseInt(hex.substring(4, 6), 16),\n    a: hex.length === 8 ? round(parseInt(hex.substring(6, 8), 16) / 255, 2) : 1,\n  };\n};\n\nexport const parseHue = (value: string, unit = \"deg\"): number => {\n  return Number(value) * (angleUnits[unit] || 1);\n};\n\nexport const hslaStringToHsva = (hslString: string): HsvaColor => {\n  const matcher = /hsla?\\(?\\s*(-?\\d*\\.?\\d+)(deg|rad|grad|turn)?[,\\s]+(-?\\d*\\.?\\d+)%?[,\\s]+(-?\\d*\\.?\\d+)%?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i;\n  const match = matcher.exec(hslString);\n\n  if (!match) return { h: 0, s: 0, v: 0, a: 1 };\n\n  return hslaToHsva({\n    h: parseHue(match[1], match[2]),\n    s: Number(match[3]),\n    l: Number(match[4]),\n    a: match[5] === undefined ? 1 : Number(match[5]) / (match[6] ? 100 : 1),\n  });\n};\n\nexport const hslStringToHsva = hslaStringToHsva;\n\nexport const hslaToHsva = ({ h, s, l, a }: HslaColor): HsvaColor => {\n  s *= (l < 50 ? l : 100 - l) / 100;\n\n  return {\n    h: h,\n    s: s > 0 ? ((2 * s) / (l + s)) * 100 : 0,\n    v: l + s,\n    a,\n  };\n};\n\nexport const hsvaToHex = (hsva: HsvaColor): string => rgbaToHex(hsvaToRgba(hsva));\n\nexport const hsvaToHsla = ({ h, s, v, a }: HsvaColor): HslaColor => {\n  const hh = ((200 - s) * v) / 100;\n\n  return {\n    h: round(h),\n    s: round(hh > 0 && hh < 200 ? ((s * v) / 100 / (hh <= 100 ? hh : 200 - hh)) * 100 : 0),\n    l: round(hh / 2),\n    a: round(a, 2),\n  };\n};\n\nexport const hsvaToHslString = (hsva: HsvaColor): string => {\n  const { h, s, l } = hsvaToHsla(hsva);\n  return `hsl(${h}, ${s}%, ${l}%)`;\n};\n\nexport const hsvaToHsvString = (hsva: HsvaColor): string => {\n  const { h, s, v } = roundHsva(hsva);\n  return `hsv(${h}, ${s}%, ${v}%)`;\n};\n\nexport const hsvaToHsvaString = (hsva: HsvaColor): string => {\n  const { h, s, v, a } = roundHsva(hsva);\n  return `hsva(${h}, ${s}%, ${v}%, ${a})`;\n};\n\nexport const hsvaToHslaString = (hsva: HsvaColor): string => {\n  const { h, s, l, a } = hsvaToHsla(hsva);\n  return `hsla(${h}, ${s}%, ${l}%, ${a})`;\n};\n\nexport const hsvaToRgba = ({ h, s, v, a }: HsvaColor): RgbaColor => {\n  h = (h / 360) * 6;\n  s = s / 100;\n  v = v / 100;\n\n  const hh = Math.floor(h),\n    b = v * (1 - s),\n    c = v * (1 - (h - hh) * s),\n    d = v * (1 - (1 - h + hh) * s),\n    module = hh % 6;\n\n  return {\n    r: round([v, c, b, b, d, v][module] * 255),\n    g: round([d, v, v, c, b, b][module] * 255),\n    b: round([b, b, d, v, v, c][module] * 255),\n    a: round(a, 2),\n  };\n};\n\nexport const hsvaToRgbString = (hsva: HsvaColor): string => {\n  const { r, g, b } = hsvaToRgba(hsva);\n  return `rgb(${r}, ${g}, ${b})`;\n};\n\nexport const hsvaToRgbaString = (hsva: HsvaColor): string => {\n  const { r, g, b, a } = hsvaToRgba(hsva);\n  return `rgba(${r}, ${g}, ${b}, ${a})`;\n};\n\nexport const hsvaStringToHsva = (hsvString: string): HsvaColor => {\n  const matcher = /hsva?\\(?\\s*(-?\\d*\\.?\\d+)(deg|rad|grad|turn)?[,\\s]+(-?\\d*\\.?\\d+)%?[,\\s]+(-?\\d*\\.?\\d+)%?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i;\n  const match = matcher.exec(hsvString);\n\n  if (!match) return { h: 0, s: 0, v: 0, a: 1 };\n\n  return roundHsva({\n    h: parseHue(match[1], match[2]),\n    s: Number(match[3]),\n    v: Number(match[4]),\n    a: match[5] === undefined ? 1 : Number(match[5]) / (match[6] ? 100 : 1),\n  });\n};\n\nexport const hsvStringToHsva = hsvaStringToHsva;\n\nexport const rgbaStringToHsva = (rgbaString: string): HsvaColor => {\n  const matcher = /rgba?\\(?\\s*(-?\\d*\\.?\\d+)(%)?[,\\s]+(-?\\d*\\.?\\d+)(%)?[,\\s]+(-?\\d*\\.?\\d+)(%)?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i;\n  const match = matcher.exec(rgbaString);\n\n  if (!match) return { h: 0, s: 0, v: 0, a: 1 };\n\n  return rgbaToHsva({\n    r: Number(match[1]) / (match[2] ? 100 / 255 : 1),\n    g: Number(match[3]) / (match[4] ? 100 / 255 : 1),\n    b: Number(match[5]) / (match[6] ? 100 / 255 : 1),\n    a: match[7] === undefined ? 1 : Number(match[7]) / (match[8] ? 100 : 1),\n  });\n};\n\nexport const rgbStringToHsva = rgbaStringToHsva;\n\nconst format = (number: number) => {\n  const hex = number.toString(16);\n  return hex.length < 2 ? \"0\" + hex : hex;\n};\n\nexport const rgbaToHex = ({ r, g, b, a }: RgbaColor): string => {\n  const alphaHex = a < 1 ? format(round(a * 255)) : \"\";\n  return \"#\" + format(r) + format(g) + format(b) + alphaHex;\n};\n\nexport const rgbaToHsva = ({ r, g, b, a }: RgbaColor): HsvaColor => {\n  const max = Math.max(r, g, b);\n  const delta = max - Math.min(r, g, b);\n\n  // prettier-ignore\n  const hh = delta\n    ? max === r\n      ? (g - b) / delta\n      : max === g\n        ? 2 + (b - r) / delta\n        : 4 + (r - g) / delta\n    : 0;\n\n  return {\n    h: round(60 * (hh < 0 ? hh + 6 : hh)),\n    s: round(max ? (delta / max) * 100 : 0),\n    v: round((max / 255) * 100),\n    a,\n  };\n};\n\nexport const roundHsva = (hsva: HsvaColor): HsvaColor => ({\n  h: round(hsva.h),\n  s: round(hsva.s),\n  v: round(hsva.v),\n  a: round(hsva.a, 2),\n});\n\nexport const rgbaToRgb = ({ r, g, b }: RgbaColor): RgbColor => ({ r, g, b });\n\nexport const hslaToHsl = ({ h, s, l }: HslaColor): HslColor => ({ h, s, l });\n\nexport const hsvaToHsv = (hsva: HsvaColor): HsvColor => {\n  const { h, s, v } = roundHsva(hsva);\n  return { h, s, v };\n};\n","import React from \"react\";\n\nimport { Interactive, Interaction } from \"./Interactive\";\nimport { Pointer } from \"./Pointer\";\n\nimport { hsvaToHslString } from \"../../utils/convert\";\nimport { formatClassName } from \"../../utils/format\";\nimport { clamp } from \"../../utils/clamp\";\nimport { round } from \"../../utils/round\";\n\ninterface Props {\n  className?: string;\n  hue: number;\n  onChange: (newHue: { h: number }) => void;\n}\n\nconst HueBase = ({ className, hue, onChange }: Props) => {\n  const handleMove = (interaction: Interaction) => {\n    onChange({ h: 360 * interaction.left });\n  };\n\n  const handleKey = (offset: Interaction) => {\n    // Hue measured in degrees of the color circle ranging from 0 to 360\n    onChange({\n      h: clamp(hue + offset.left * 360, 0, 360),\n    });\n  };\n\n  const nodeClassName = formatClassName([\"react-colorful__hue\", className]);\n\n  return (\n    <div className={nodeClassName}>\n      <Interactive\n        onMove={handleMove}\n        onKey={handleKey}\n        aria-label=\"Hue\"\n        aria-valuenow={round(hue)}\n        aria-valuemax=\"360\"\n        aria-valuemin=\"0\"\n      >\n        <Pointer\n          className=\"react-colorful__hue-pointer\"\n          left={hue / 360}\n          color={hsvaToHslString({ h: hue, s: 100, v: 100, a: 1 })}\n        />\n      </Interactive>\n    </div>\n  );\n};\n\nexport const Hue = React.memo(HueBase);\n","import React from \"react\";\nimport { Interactive, Interaction } from \"./Interactive\";\nimport { Pointer } from \"./Pointer\";\nimport { HsvaColor } from \"../../types\";\nimport { hsvaToHslString } from \"../../utils/convert\";\nimport { clamp } from \"../../utils/clamp\";\nimport { round } from \"../../utils/round\";\n\ninterface Props {\n  hsva: HsvaColor;\n  onChange: (newColor: { s: number; v: number }) => void;\n}\n\nconst SaturationBase = ({ hsva, onChange }: Props) => {\n  const handleMove = (interaction: Interaction) => {\n    onChange({\n      s: interaction.left * 100,\n      v: 100 - interaction.top * 100,\n    });\n  };\n\n  const handleKey = (offset: Interaction) => {\n    // Saturation and brightness always fit into [0, 100] range\n    onChange({\n      s: clamp(hsva.s + offset.left * 100, 0, 100),\n      v: clamp(hsva.v - offset.top * 100, 0, 100),\n    });\n  };\n\n  const containerStyle = {\n    backgroundColor: hsvaToHslString({ h: hsva.h, s: 100, v: 100, a: 1 }),\n  };\n\n  return (\n    <div className=\"react-colorful__saturation\" style={containerStyle}>\n      <Interactive\n        onMove={handleMove}\n        onKey={handleKey}\n        aria-label=\"Color\"\n        aria-valuetext={`Saturation ${round(hsva.s)}%, Brightness ${round(hsva.v)}%`}\n      >\n        <Pointer\n          className=\"react-colorful__saturation-pointer\"\n          top={1 - hsva.v / 100}\n          left={hsva.s / 100}\n          color={hsvaToHslString(hsva)}\n        />\n      </Interactive>\n    </div>\n  );\n};\n\nexport const Saturation = React.memo(SaturationBase);\n","import { hexToRgba } from \"./convert\";\nimport { ObjectColor } from \"../types\";\n\nexport const equalColorObjects = (first: ObjectColor, second: ObjectColor): boolean => {\n  if (first === second) return true;\n\n  for (const prop in first) {\n    // The following allows for a type-safe calling of this function (first & second have to be HSL, HSV, or RGB)\n    // with type-unsafe iterating over object keys. TS does not allow this without an index (`[key: string]: number`)\n    // on an object to define how iteration is normally done. To ensure extra keys are not allowed on our types,\n    // we must cast our object to unknown (as RGB demands `r` be a key, while `Record<string, x>` does not care if\n    // there is or not), and then as a type TS can iterate over.\n    if (\n      ((first as unknown) as Record<string, number>)[prop] !==\n      ((second as unknown) as Record<string, number>)[prop]\n    )\n      return false;\n  }\n\n  return true;\n};\n\nexport const equalColorString = (first: string, second: string): boolean => {\n  return first.replace(/\\s/g, \"\") === second.replace(/\\s/g, \"\");\n};\n\nexport const equalHex = (first: string, second: string): boolean => {\n  if (first.toLowerCase() === second.toLowerCase()) return true;\n\n  // To compare colors like `#FFF` and `ffffff` we convert them into RGB objects\n  return equalColorObjects(hexToRgba(first), hexToRgba(second));\n};\n","import { useState, useEffect, useCallback, useRef } from \"react\";\nimport { ColorModel, AnyColor, HsvaColor } from \"../types\";\nimport { equalColorObjects } from \"../utils/compare\";\nimport { useEventCallback } from \"./useEventCallback\";\n\nexport function useColorManipulation<T extends AnyColor>(\n  colorModel: ColorModel<T>,\n  color: T,\n  onChange?: (color: T) => void\n): [HsvaColor, (color: Partial<HsvaColor>) => void] {\n  // Save onChange callback in the ref for avoiding \"useCallback hell\"\n  const onChangeCallback = useEventCallback<T>(onChange);\n\n  // No matter which color model is used (HEX, RGB(A) or HSL(A)),\n  // all internal calculations are based on HSVA model\n  const [hsva, updateHsva] = useState<HsvaColor>(() => colorModel.toHsva(color));\n\n  // By using this ref we're able to prevent extra updates\n  // and the effects recursion during the color conversion\n  const cache = useRef({ color, hsva });\n\n  // Update local HSVA-value if `color` property value is changed,\n  // but only if that's not the same color that we just sent to the parent\n  useEffect(() => {\n    if (!colorModel.equal(color, cache.current.color)) {\n      const newHsva = colorModel.toHsva(color);\n      cache.current = { hsva: newHsva, color };\n      updateHsva(newHsva);\n    }\n  }, [color, colorModel]);\n\n  // Trigger `onChange` callback only if an updated color is different from cached one;\n  // save the new color to the ref to prevent unnecessary updates\n  useEffect(() => {\n    let newColor;\n    if (\n      !equalColorObjects(hsva, cache.current.hsva) &&\n      !colorModel.equal((newColor = colorModel.fromHsva(hsva)), cache.current.color)\n    ) {\n      cache.current = { hsva, color: newColor };\n      onChangeCallback(newColor);\n    }\n  }, [hsva, colorModel, onChangeCallback]);\n\n  // Merge the current HSVA color object with updated params.\n  // For example, when a child component sends `h` or `s` only\n  const handleChange = useCallback((params: Partial<HsvaColor>) => {\n    updateHsva((current) => Object.assign({}, current, params));\n  }, []);\n\n  return [hsva, handleChange];\n}\n","declare const __webpack_nonce__: string | undefined;\nlet nonce: string | undefined;\n\n/**\n * Returns a nonce hash included by Webpack or the one defined manually by developer.\n * https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/nonce\n * https://webpack.js.org/guides/csp/\n */\nexport const getNonce = (): string | undefined => {\n  if (nonce) return nonce;\n  if (typeof __webpack_nonce__ !== \"undefined\") return __webpack_nonce__;\n  return undefined;\n};\n\n/**\n * Signs the style tag with a base64-encoded string (nonce) to conforms to Content Security Policies.\n * This function has to be invoked before any picker is rendered if you aren't using Webpack for CSP.\n */\nexport const setNonce = (hash: string): void => {\n  nonce = hash;\n};\n","import { useLayoutEffect, useEffect } from \"react\";\n\n// React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser.\nexport const useIsomorphicLayoutEffect =\n  typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\n","import { RefObject } from \"react\";\n\nimport { useIsomorphicLayoutEffect } from \"./useIsomorphicLayoutEffect\";\nimport { getNonce } from \"../utils/nonce\";\n\n// Bundler is configured to load this as a processed minified CSS-string\nimport styles from \"../css/styles.css\";\n\nconst styleElementMap: Map<Document, HTMLStyleElement> = new Map();\n\n/**\n * Injects CSS code into the document's <head>\n */\nexport const useStyleSheet = (nodeRef: RefObject<HTMLDivElement>): void => {\n  useIsomorphicLayoutEffect(() => {\n    const parentDocument = nodeRef.current ? nodeRef.current.ownerDocument : document;\n\n    if (typeof parentDocument !== \"undefined\" && !styleElementMap.has(parentDocument)) {\n      const styleElement = parentDocument.createElement(\"style\");\n      styleElement.innerHTML = styles;\n      styleElementMap.set(parentDocument, styleElement);\n\n      // Conform to CSP rules by setting `nonce` attribute to the inline styles\n      const nonce = getNonce();\n      if (nonce) styleElement.setAttribute(\"nonce\", nonce);\n\n      parentDocument.head.appendChild(styleElement);\n    }\n  }, []);\n};\n","import React, { useRef } from \"react\";\n\nimport { Hue } from \"./Hue\";\nimport { Saturation } from \"./Saturation\";\n\nimport { ColorModel, ColorPickerBaseProps, AnyColor } from \"../../types\";\nimport { useColorManipulation } from \"../../hooks/useColorManipulation\";\nimport { useStyleSheet } from \"../../hooks/useStyleSheet\";\nimport { formatClassName } from \"../../utils/format\";\n\ninterface Props<T extends AnyColor> extends Partial<ColorPickerBaseProps<T>> {\n  colorModel: ColorModel<T>;\n}\n\nexport const ColorPicker = <T extends AnyColor>({\n  className,\n  colorModel,\n  color = colorModel.defaultColor,\n  onChange,\n  ...rest\n}: Props<T>): JSX.Element => {\n  const nodeRef = useRef<HTMLDivElement>(null);\n  useStyleSheet(nodeRef);\n\n  const [hsva, updateHsva] = useColorManipulation<T>(colorModel, color, onChange);\n\n  const nodeClassName = formatClassName([\"react-colorful\", className]);\n\n  return (\n    <div {...rest} ref={nodeRef} className={nodeClassName}>\n      <Saturation hsva={hsva} onChange={updateHsva} />\n      <Hue hue={hsva.h} onChange={updateHsva} className=\"react-colorful__last-control\" />\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport { ColorPicker } from \"./common/ColorPicker\";\nimport { ColorModel, ColorPickerBaseProps } from \"../types\";\nimport { equalHex } from \"../utils/compare\";\nimport { hexToHsva, hsvaToHex } from \"../utils/convert\";\n\nconst colorModel: ColorModel<string> = {\n  defaultColor: \"000\",\n  toHsva: hexToHsva,\n  fromHsva: ({ h, s, v }) => hsvaToHex({ h, s, v, a: 1 }),\n  equal: equalHex,\n};\n\nexport const HexColorPicker = (props: Partial<ColorPickerBaseProps<string>>): JSX.Element => (\n  <ColorPicker {...props} colorModel={colorModel} />\n);\n","export const styleToObject = (input: string): Record<string, any> => {\n  /* c8 ignore next 3 */\n  if (typeof input !== 'string') {\n    return {};\n  }\n\n  return input.split(/ ?; ?/).reduce<Record<string, string | number>>((acc, item: string) => {\n    const [key, value] = item\n      .split(/ ?: ?/)\n      .map((d, index) => (index === 0 ? d.replace(/\\s+/g, '') : d.trim()));\n\n    if (key && value) {\n      const nextKey = key.replace(/(\\w)-(\\w)/g, (_$0, $1, $2) => `${$1}${$2.toUpperCase()}`);\n      let nextValue: string | number = value.trim();\n\n      if (!Number.isNaN(Number(value))) {\n        nextValue = Number(value);\n      }\n\n      acc[key.startsWith('-') ? key : nextKey] = nextValue;\n    }\n\n    return acc;\n  }, {});\n};\n\nexport function randomString(length = 6): string {\n  const characters = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  let result = '';\n\n  for (let index = length; index > 0; --index) {\n    result += characters[Math.round(Math.random() * (characters.length - 1))];\n  }\n\n  return result;\n}\n\nexport const noTextChildNodes = [\n  'br',\n  'col',\n  'colgroup',\n  'dl',\n  'hr',\n  'iframe',\n  'img',\n  'input',\n  'link',\n  'menuitem',\n  'meta',\n  'ol',\n  'param',\n  'select',\n  'table',\n  'tbody',\n  'tfoot',\n  'thead',\n  'tr',\n  'ul',\n  'wbr',\n];\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// Taken from https://raw.githubusercontent.com/facebook/react/baff5cc2f69d30589a5dc65b089e47765437294b/packages/react-dom/src/shared/possibleStandardNames.js\n// tslint:disable:object-literal-sort-keys\nexport const possibleStandardNames: Record<string, any> = {\n  // HTML\n  'accept-charset': 'acceptCharset',\n  acceptcharset: 'acceptCharset',\n  accesskey: 'accessKey',\n  allowfullscreen: 'allowFullScreen',\n  autocapitalize: 'autoCapitalize',\n  autocomplete: 'autoComplete',\n  autocorrect: 'autoCorrect',\n  autofocus: 'autoFocus',\n  autoplay: 'autoPlay',\n  autosave: 'autoSave',\n  cellpadding: 'cellPadding',\n  cellspacing: 'cellSpacing',\n  charset: 'charSet',\n  class: 'className',\n  classid: 'classID',\n  classname: 'className',\n  colspan: 'colSpan',\n  contenteditable: 'contentEditable',\n  contextmenu: 'contextMenu',\n  controlslist: 'controlsList',\n  crossorigin: 'crossOrigin',\n  dangerouslysetinnerhtml: 'dangerouslySetInnerHTML',\n  datetime: 'dateTime',\n  defaultchecked: 'defaultChecked',\n  defaultvalue: 'defaultValue',\n  enctype: 'encType',\n  for: 'htmlFor',\n  formmethod: 'formMethod',\n  formaction: 'formAction',\n  formenctype: 'formEncType',\n  formnovalidate: 'formNoValidate',\n  formtarget: 'formTarget',\n  frameborder: 'frameBorder',\n  hreflang: 'hrefLang',\n  htmlfor: 'htmlFor',\n  httpequiv: 'httpEquiv',\n  'http-equiv': 'httpEquiv',\n  icon: 'icon',\n  innerhtml: 'innerHTML',\n  inputmode: 'inputMode',\n  itemid: 'itemID',\n  itemprop: 'itemProp',\n  itemref: 'itemRef',\n  itemscope: 'itemScope',\n  itemtype: 'itemType',\n  keyparams: 'keyParams',\n  keytype: 'keyType',\n  marginwidth: 'marginWidth',\n  marginheight: 'marginHeight',\n  maxlength: 'maxLength',\n  mediagroup: 'mediaGroup',\n  minlength: 'minLength',\n  nomodule: 'noModule',\n  novalidate: 'noValidate',\n  playsinline: 'playsInline',\n  radiogroup: 'radioGroup',\n  readonly: 'readOnly',\n  referrerpolicy: 'referrerPolicy',\n  rowspan: 'rowSpan',\n  spellcheck: 'spellCheck',\n  srcdoc: 'srcDoc',\n  srclang: 'srcLang',\n  srcset: 'srcSet',\n  tabindex: 'tabIndex',\n  typemustmatch: 'typeMustMatch',\n  usemap: 'useMap',\n\n  // SVG\n  accentheight: 'accentHeight',\n  'accent-height': 'accentHeight',\n  alignmentbaseline: 'alignmentBaseline',\n  'alignment-baseline': 'alignmentBaseline',\n  allowreorder: 'allowReorder',\n  arabicform: 'arabicForm',\n  'arabic-form': 'arabicForm',\n  attributename: 'attributeName',\n  attributetype: 'attributeType',\n  autoreverse: 'autoReverse',\n  basefrequency: 'baseFrequency',\n  baselineshift: 'baselineShift',\n  'baseline-shift': 'baselineShift',\n  baseprofile: 'baseProfile',\n  calcmode: 'calcMode',\n  capheight: 'capHeight',\n  'cap-height': 'capHeight',\n  clippath: 'clipPath',\n  'clip-path': 'clipPath',\n  clippathunits: 'clipPathUnits',\n  cliprule: 'clipRule',\n  'clip-rule': 'clipRule',\n  colorinterpolation: 'colorInterpolation',\n  'color-interpolation': 'colorInterpolation',\n  colorinterpolationfilters: 'colorInterpolationFilters',\n  'color-interpolation-filters': 'colorInterpolationFilters',\n  colorprofile: 'colorProfile',\n  'color-profile': 'colorProfile',\n  colorrendering: 'colorRendering',\n  'color-rendering': 'colorRendering',\n  contentscripttype: 'contentScriptType',\n  contentstyletype: 'contentStyleType',\n  diffuseconstant: 'diffuseConstant',\n  dominantbaseline: 'dominantBaseline',\n  'dominant-baseline': 'dominantBaseline',\n  edgemode: 'edgeMode',\n  enablebackground: 'enableBackground',\n  'enable-background': 'enableBackground',\n  externalresourcesrequired: 'externalResourcesRequired',\n  fillopacity: 'fillOpacity',\n  'fill-opacity': 'fillOpacity',\n  fillrule: 'fillRule',\n  'fill-rule': 'fillRule',\n  filterres: 'filterRes',\n  filterunits: 'filterUnits',\n  floodopacity: 'floodOpacity',\n  'flood-opacity': 'floodOpacity',\n  floodcolor: 'floodColor',\n  'flood-color': 'floodColor',\n  fontfamily: 'fontFamily',\n  'font-family': 'fontFamily',\n  fontsize: 'fontSize',\n  'font-size': 'fontSize',\n  fontsizeadjust: 'fontSizeAdjust',\n  'font-size-adjust': 'fontSizeAdjust',\n  fontstretch: 'fontStretch',\n  'font-stretch': 'fontStretch',\n  fontstyle: 'fontStyle',\n  'font-style': 'fontStyle',\n  fontvariant: 'fontVariant',\n  'font-variant': 'fontVariant',\n  fontweight: 'fontWeight',\n  'font-weight': 'fontWeight',\n  glyphname: 'glyphName',\n  'glyph-name': 'glyphName',\n  glyphorientationhorizontal: 'glyphOrientationHorizontal',\n  'glyph-orientation-horizontal': 'glyphOrientationHorizontal',\n  glyphorientationvertical: 'glyphOrientationVertical',\n  'glyph-orientation-vertical': 'glyphOrientationVertical',\n  glyphref: 'glyphRef',\n  gradienttransform: 'gradientTransform',\n  gradientunits: 'gradientUnits',\n  horizadvx: 'horizAdvX',\n  'horiz-adv-x': 'horizAdvX',\n  horizoriginx: 'horizOriginX',\n  'horiz-origin-x': 'horizOriginX',\n  imagerendering: 'imageRendering',\n  'image-rendering': 'imageRendering',\n  kernelmatrix: 'kernelMatrix',\n  kernelunitlength: 'kernelUnitLength',\n  keypoints: 'keyPoints',\n  keysplines: 'keySplines',\n  keytimes: 'keyTimes',\n  lengthadjust: 'lengthAdjust',\n  letterspacing: 'letterSpacing',\n  'letter-spacing': 'letterSpacing',\n  lightingcolor: 'lightingColor',\n  'lighting-color': 'lightingColor',\n  limitingconeangle: 'limitingConeAngle',\n  markerend: 'markerEnd',\n  'marker-end': 'markerEnd',\n  markerheight: 'markerHeight',\n  markermid: 'markerMid',\n  'marker-mid': 'markerMid',\n  markerstart: 'markerStart',\n  'marker-start': 'markerStart',\n  markerunits: 'markerUnits',\n  markerwidth: 'markerWidth',\n  maskcontentunits: 'maskContentUnits',\n  maskunits: 'maskUnits',\n  numoctaves: 'numOctaves',\n  overlineposition: 'overlinePosition',\n  'overline-position': 'overlinePosition',\n  overlinethickness: 'overlineThickness',\n  'overline-thickness': 'overlineThickness',\n  paintorder: 'paintOrder',\n  'paint-order': 'paintOrder',\n  'panose-1': 'panose1',\n  pathlength: 'pathLength',\n  patterncontentunits: 'patternContentUnits',\n  patterntransform: 'patternTransform',\n  patternunits: 'patternUnits',\n  pointerevents: 'pointerEvents',\n  'pointer-events': 'pointerEvents',\n  pointsatx: 'pointsAtX',\n  pointsaty: 'pointsAtY',\n  pointsatz: 'pointsAtZ',\n  preservealpha: 'preserveAlpha',\n  preserveaspectratio: 'preserveAspectRatio',\n  primitiveunits: 'primitiveUnits',\n  refx: 'refX',\n  refy: 'refY',\n  renderingintent: 'renderingIntent',\n  'rendering-intent': 'renderingIntent',\n  repeatcount: 'repeatCount',\n  repeatdur: 'repeatDur',\n  requiredextensions: 'requiredExtensions',\n  requiredfeatures: 'requiredFeatures',\n  shaperendering: 'shapeRendering',\n  'shape-rendering': 'shapeRendering',\n  specularconstant: 'specularConstant',\n  specularexponent: 'specularExponent',\n  spreadmethod: 'spreadMethod',\n  startoffset: 'startOffset',\n  stddeviation: 'stdDeviation',\n  stitchtiles: 'stitchTiles',\n  stopcolor: 'stopColor',\n  'stop-color': 'stopColor',\n  stopopacity: 'stopOpacity',\n  'stop-opacity': 'stopOpacity',\n  strikethroughposition: 'strikethroughPosition',\n  'strikethrough-position': 'strikethroughPosition',\n  strikethroughthickness: 'strikethroughThickness',\n  'strikethrough-thickness': 'strikethroughThickness',\n  strokedasharray: 'strokeDasharray',\n  'stroke-dasharray': 'strokeDasharray',\n  strokedashoffset: 'strokeDashoffset',\n  'stroke-dashoffset': 'strokeDashoffset',\n  strokelinecap: 'strokeLinecap',\n  'stroke-linecap': 'strokeLinecap',\n  strokelinejoin: 'strokeLinejoin',\n  'stroke-linejoin': 'strokeLinejoin',\n  strokemiterlimit: 'strokeMiterlimit',\n  'stroke-miterlimit': 'strokeMiterlimit',\n  strokewidth: 'strokeWidth',\n  'stroke-width': 'strokeWidth',\n  strokeopacity: 'strokeOpacity',\n  'stroke-opacity': 'strokeOpacity',\n  suppresscontenteditablewarning: 'suppressContentEditableWarning',\n  suppresshydrationwarning: 'suppressHydrationWarning',\n  surfacescale: 'surfaceScale',\n  systemlanguage: 'systemLanguage',\n  tablevalues: 'tableValues',\n  targetx: 'targetX',\n  targety: 'targetY',\n  textanchor: 'textAnchor',\n  'text-anchor': 'textAnchor',\n  textdecoration: 'textDecoration',\n  'text-decoration': 'textDecoration',\n  textlength: 'textLength',\n  textrendering: 'textRendering',\n  'text-rendering': 'textRendering',\n  underlineposition: 'underlinePosition',\n  'underline-position': 'underlinePosition',\n  underlinethickness: 'underlineThickness',\n  'underline-thickness': 'underlineThickness',\n  unicodebidi: 'unicodeBidi',\n  'unicode-bidi': 'unicodeBidi',\n  unicoderange: 'unicodeRange',\n  'unicode-range': 'unicodeRange',\n  unitsperem: 'unitsPerEm',\n  'units-per-em': 'unitsPerEm',\n  unselectable: 'unselectable',\n  valphabetic: 'vAlphabetic',\n  'v-alphabetic': 'vAlphabetic',\n  vectoreffect: 'vectorEffect',\n  'vector-effect': 'vectorEffect',\n  vertadvy: 'vertAdvY',\n  'vert-adv-y': 'vertAdvY',\n  vertoriginx: 'vertOriginX',\n  'vert-origin-x': 'vertOriginX',\n  vertoriginy: 'vertOriginY',\n  'vert-origin-y': 'vertOriginY',\n  vhanging: 'vHanging',\n  'v-hanging': 'vHanging',\n  videographic: 'vIdeographic',\n  'v-ideographic': 'vIdeographic',\n  viewbox: 'viewBox',\n  viewtarget: 'viewTarget',\n  vmathematical: 'vMathematical',\n  'v-mathematical': 'vMathematical',\n  wordspacing: 'wordSpacing',\n  'word-spacing': 'wordSpacing',\n  writingmode: 'writingMode',\n  'writing-mode': 'writingMode',\n  xchannelselector: 'xChannelSelector',\n  xheight: 'xHeight',\n  'x-height': 'xHeight',\n  xlinkactuate: 'xlinkActuate',\n  'xlink:actuate': 'xlinkActuate',\n  xlinkarcrole: 'xlinkArcrole',\n  'xlink:arcrole': 'xlinkArcrole',\n  xlinkhref: 'xlinkHref',\n  'xlink:href': 'xlinkHref',\n  xlinkrole: 'xlinkRole',\n  'xlink:role': 'xlinkRole',\n  xlinkshow: 'xlinkShow',\n  'xlink:show': 'xlinkShow',\n  xlinktitle: 'xlinkTitle',\n  'xlink:title': 'xlinkTitle',\n  xlinktype: 'xlinkType',\n  'xlink:type': 'xlinkType',\n  xmlbase: 'xmlBase',\n  'xml:base': 'xmlBase',\n  xmllang: 'xmlLang',\n  'xml:lang': 'xmlLang',\n  'xml:space': 'xmlSpace',\n  xmlnsxlink: 'xmlnsXlink',\n  'xmlns:xlink': 'xmlnsXlink',\n  xmlspace: 'xmlSpace',\n  ychannelselector: 'yChannelSelector',\n  zoomandpan: 'zoomAndPan',\n\n  // event handlers\n  onblur: 'onBlur',\n  onchange: 'onChange',\n  onclick: 'onClick',\n  oncontextmenu: 'onContextMenu',\n  ondoubleclick: 'onDoubleClick',\n  ondrag: 'onDrag',\n  ondragend: 'onDragEnd',\n  ondragenter: 'onDragEnter',\n  ondragexit: 'onDragExit',\n  ondragleave: 'onDragLeave',\n  ondragover: 'onDragOver',\n  ondragstart: 'onDragStart',\n  ondrop: 'onDrop',\n  onerror: 'onError',\n  onfocus: 'onFocus',\n  oninput: 'onInput',\n  oninvalid: 'onInvalid',\n  onkeydown: 'onKeyDown',\n  onkeypress: 'onKeyPress',\n  onkeyup: 'onKeyUp',\n  onload: 'onLoad',\n  onmousedown: 'onMouseDown',\n  onmouseenter: 'onMouseEnter',\n  onmouseleave: 'onMouseLeave',\n  onmousemove: 'onMouseMove',\n  onmouseout: 'onMouseOut',\n  onmouseover: 'onMouseOver',\n  onmouseup: 'onMouseUp',\n  onscroll: 'onScroll',\n  onsubmit: 'onSubmit',\n  ontouchcancel: 'onTouchCancel',\n  ontouchend: 'onTouchEnd',\n  ontouchmove: 'onTouchMove',\n  ontouchstart: 'onTouchStart',\n  onwheel: 'onWheel',\n};\n","import * as React from 'react';\n\nimport { noTextChildNodes, possibleStandardNames, randomString, styleToObject } from './helpers';\n\nexport interface Options {\n  /**\n   * An array of actions to modify the nodes before converting them to ReactNodes.\n   */\n  actions?: Action[];\n  /**\n   * Don't remove white spaces in the output.\n   */\n  allowWhiteSpaces?: boolean;\n  /**\n   * Parse all nodes instead of just a single parent node.\n   * This will return a ReactNode array (or a NodeList if `nodeOnly` is true).\n   */\n  includeAllNodes?: boolean;\n  /**\n   * The index to start the React key identification.\n   * @default 0\n   */\n  index?: number;\n  /**\n   * The level to start the React key identification.\n   * @default 0\n   */\n  level?: number;\n  /**\n   * Only return the node (or NodeList) without converting it to a ReactNode.\n   */\n  nodeOnly?: boolean;\n  /**\n   * Add a random key to the root element.\n   * @default false\n   */\n  randomKey?: boolean;\n  /**\n   * The selector to use in the `document.querySelector` method.\n   * @default 'body > *'\n   */\n  selector?: string;\n  /**\n   * The mimeType to use in the DOMParser's parseFromString.\n   * @default 'text/html'\n   */\n  type?: DOMParserSupportedType;\n}\n\nexport type Output = React.ReactNode | Node | NodeList;\n\ninterface Attributes {\n  [index: string]: any;\n\n  key: string;\n}\n\ninterface GetReactNodeOptions extends Options {\n  key: string;\n  level: number;\n}\n\nexport interface Action {\n  // If this returns true, the two following functions are called if they are defined\n  condition: (node: Node, key: string, level: number) => boolean;\n\n  // Use this to inject a component or remove the node\n  // It must return something that can be rendered by React\n  post?: (node: Node, key: string, level: number) => React.ReactNode;\n\n  // Use this to update or replace the node\n  // e.g. for removing or adding attributes, changing the node type\n  pre?: (node: Node, key: string, level: number) => Node;\n}\n\nfunction getReactNode(node: Node, options: GetReactNodeOptions): React.ReactNode {\n  const { key, level, ...rest } = options;\n\n  switch (node.nodeType) {\n    case 1: {\n      // regular dom-node\n      return React.createElement(\n        parseName(node.nodeName),\n        parseAttributes(node, key),\n        parseChildren(node.childNodes, level, rest),\n      );\n    }\n    case 3: {\n      // textnode\n      const nodeText = node.nodeValue?.toString() ?? '';\n\n      if (!rest.allowWhiteSpaces && /^\\s+$/.test(nodeText) && !/[\\u00A0\\u202F]/.test(nodeText)) {\n        return null;\n      }\n\n      /* c8 ignore next 3 */\n      if (!node.parentNode) {\n        return nodeText;\n      }\n\n      const parentNodeName = node.parentNode.nodeName.toLowerCase();\n\n      if (noTextChildNodes.includes(parentNodeName)) {\n        if (/\\S/.test(nodeText)) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            `A textNode is not allowed inside '${parentNodeName}'. Your text \"${nodeText}\" will be ignored`,\n          );\n        }\n\n        return null;\n      }\n\n      return nodeText;\n    }\n    case 8: {\n      // html-comment\n      return null;\n    }\n    case 11: {\n      // fragment\n\n      return parseChildren(node.childNodes, level, options);\n    }\n    /* c8 ignore next 3 */\n    default: {\n      return null;\n    }\n  }\n}\n\nfunction parseAttributes(node: Node, reactKey: string): Attributes {\n  const attributes: Attributes = {\n    key: reactKey,\n  };\n\n  if (node instanceof Element) {\n    const nodeClassNames = node.getAttribute('class');\n\n    if (nodeClassNames) {\n      attributes.className = nodeClassNames;\n    }\n\n    [...node.attributes].forEach(d => {\n      switch (d.name) {\n        // this is manually handled above, so break;\n        case 'class':\n          break;\n        case 'style':\n          attributes[d.name] = styleToObject(d.value);\n          break;\n        case 'allowfullscreen':\n        case 'allowpaymentrequest':\n        case 'async':\n        case 'autofocus':\n        case 'autoplay':\n        case 'checked':\n        case 'controls':\n        case 'default':\n        case 'defer':\n        case 'disabled':\n        case 'formnovalidate':\n        case 'hidden':\n        case 'ismap':\n        case 'itemscope':\n        case 'loop':\n        case 'multiple':\n        case 'muted':\n        case 'nomodule':\n        case 'novalidate':\n        case 'open':\n        case 'readonly':\n        case 'required':\n        case 'reversed':\n        case 'selected':\n        case 'typemustmatch':\n          attributes[possibleStandardNames[d.name] || d.name] = true;\n          break;\n        default:\n          attributes[possibleStandardNames[d.name] || d.name] = d.value;\n      }\n    });\n  }\n\n  return attributes;\n}\n\nfunction parseChildren(childNodeList: NodeList, level: number, options: Options) {\n  const children: React.ReactNode[] = [...childNodeList]\n    .map((node, index) =>\n      convertFromNode(node, {\n        ...options,\n        index,\n        level: level + 1,\n      }),\n    )\n    .filter(Boolean);\n\n  if (!children.length) {\n    return null;\n  }\n\n  return children;\n}\n\nfunction parseName(nodeName: string) {\n  if (/[a-z]+[A-Z]+[a-z]+/.test(nodeName)) {\n    return nodeName;\n  }\n\n  return nodeName.toLowerCase();\n}\n\nexport function convertFromNode(input: Node, options: Options = {}): React.ReactNode {\n  if (!input || !(input instanceof Node)) {\n    return null;\n  }\n\n  const { actions = [], index = 0, level = 0, randomKey } = options;\n\n  let node = input;\n  let key = `${level}-${index}`;\n  const result: React.ReactNode[] = [];\n\n  if (randomKey && level === 0) {\n    key = `${randomString()}-${key}`;\n  }\n\n  if (Array.isArray(actions)) {\n    actions.forEach((action: Action) => {\n      if (action.condition(node, key, level)) {\n        if (typeof action.pre === 'function') {\n          node = action.pre(node, key, level);\n\n          if (!(node instanceof Node)) {\n            node = input;\n\n            if (process.env.NODE_ENV !== 'production') {\n              // eslint-disable-next-line no-console\n              console.warn(\n                'The `pre` method always must return a valid DomNode (instanceof Node) - your modification will be ignored (Hint: if you want to render a React-component, use the `post` method instead)',\n              );\n            }\n          }\n        }\n\n        if (typeof action.post === 'function') {\n          result.push(action.post(node, key, level));\n        }\n      }\n    });\n  }\n\n  if (result.length) {\n    return result;\n  }\n\n  return getReactNode(node, { key, level, ...options });\n}\n\nexport function convertFromString(input: string, options: Options = {}): Output {\n  if (!input || typeof input !== 'string') {\n    return null;\n  }\n\n  const {\n    includeAllNodes = false,\n    nodeOnly = false,\n    selector = 'body > *',\n    type = 'text/html',\n  } = options;\n\n  try {\n    const parser = new DOMParser();\n    const document = parser.parseFromString(input, type);\n\n    if (includeAllNodes) {\n      const { childNodes } = document.body;\n\n      if (nodeOnly) {\n        return childNodes;\n      }\n\n      return [...childNodes].map(node => convertFromNode(node, options));\n    }\n\n    const node = document.querySelector(selector) || document.body.childNodes[0];\n\n    /* c8 ignore next 3 */\n    if (!(node instanceof Node)) {\n      throw new TypeError('Error parsing input');\n    }\n\n    if (nodeOnly) {\n      return node;\n    }\n\n    return convertFromNode(node, options);\n    /* c8 ignore start */\n  } catch (error) {\n    if (process.env.NODE_ENV !== 'production') {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n  }\n\n  return null;\n  /* c8 ignore stop */\n}\n\nexport default function convert(input: Node | string, options: Options = {}): Output {\n  if (typeof input === 'string') {\n    return convertFromString(input, options);\n  }\n\n  if (input instanceof Node) {\n    return convertFromNode(input, options);\n  }\n\n  return null;\n}\n","export const CACHE_NAME = 'react-inlinesvg';\nexport const CACHE_MAX_RETRIES = 10;\n\nexport const STATUS = {\n  IDLE: 'idle',\n  LOADING: 'loading',\n  LOADED: 'loaded',\n  FAILED: 'failed',\n  READY: 'ready',\n  UNSUPPORTED: 'unsupported',\n} as const;\n","import type { PlainObject } from '../types';\n\nexport function canUseDOM(): boolean {\n  return !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n}\n\nexport function isSupportedEnvironment(): boolean {\n  return supportsInlineSVG() && typeof window !== 'undefined' && window !== null;\n}\n\nexport async function request(url: string, options?: RequestInit) {\n  const response = await fetch(url, options);\n  const contentType = response.headers.get('content-type');\n  const [fileType] = (contentType ?? '').split(/ ?; ?/);\n\n  if (response.status > 299) {\n    throw new Error('Not found');\n  }\n\n  if (!['image/svg+xml', 'text/plain'].some(d => fileType.includes(d))) {\n    throw new Error(`Content type isn't valid: ${fileType}`);\n  }\n\n  return response.text();\n}\n\nexport function sleep(seconds = 1) {\n  return new Promise(resolve => {\n    setTimeout(resolve, seconds * 1000);\n  });\n}\n\nexport function supportsInlineSVG(): boolean {\n  /* c8 ignore next 3 */\n  if (!document) {\n    return false;\n  }\n\n  const div = document.createElement('div');\n\n  div.innerHTML = '<svg />';\n  const svg = div.firstChild as SVGSVGElement;\n\n  return !!svg && svg.namespaceURI === 'http://www.w3.org/2000/svg';\n}\n\nfunction randomCharacter(character: string) {\n  return character[Math.floor(Math.random() * character.length)];\n}\n\nexport function randomString(length: number): string {\n  const letters = 'abcdefghijklmnopqrstuvwxyz';\n  const numbers = '1234567890';\n  const charset = `${letters}${letters.toUpperCase()}${numbers}`;\n\n  let R = '';\n\n  for (let index = 0; index < length; index++) {\n    R += randomCharacter(charset);\n  }\n\n  return R;\n}\n\n/**\n *  Remove properties from an object\n */\nexport function omit<T extends PlainObject, K extends keyof T>(\n  input: T,\n  ...filter: K[]\n): Omit<T, K> {\n  const output: any = {};\n\n  for (const key in input) {\n    if ({}.hasOwnProperty.call(input, key)) {\n      if (!filter.includes(key as unknown as K)) {\n        output[key] = input[key];\n      }\n    }\n  }\n\n  return output as Omit<T, K>;\n}\n","import { canUseDOM, request, sleep } from './helpers';\n\nimport { CACHE_MAX_RETRIES, CACHE_NAME, STATUS } from '../config';\nimport { StorageItem } from '../types';\n\nexport default class CacheStore {\n  private cacheApi: Cache | undefined;\n  private readonly cacheStore: Map<string, StorageItem>;\n  private readonly subscribers: Array<() => void> = [];\n  public isReady = false;\n\n  constructor() {\n    this.cacheStore = new Map<string, StorageItem>();\n\n    let cacheName = CACHE_NAME;\n    let usePersistentCache = false;\n\n    if (canUseDOM()) {\n      cacheName = window.REACT_INLINESVG_CACHE_NAME ?? CACHE_NAME;\n      usePersistentCache = !!window.REACT_INLINESVG_PERSISTENT_CACHE && 'caches' in window;\n    }\n\n    if (usePersistentCache) {\n      caches\n        .open(cacheName)\n        .then(cache => {\n          this.cacheApi = cache;\n        })\n        .catch(error => {\n          // eslint-disable-next-line no-console\n          console.error(`Failed to open cache: ${error.message}`);\n        })\n        .finally(() => {\n          this.isReady = true;\n          this.subscribers.forEach(callback => callback());\n        });\n    } else {\n      this.isReady = true;\n    }\n  }\n\n  public onReady(callback: () => void) {\n    if (this.isReady) {\n      callback();\n    } else {\n      this.subscribers.push(callback);\n    }\n  }\n\n  public async get(url: string, fetchOptions?: RequestInit) {\n    await (this.cacheApi\n      ? this.fetchAndAddToPersistentCache(url, fetchOptions)\n      : this.fetchAndAddToInternalCache(url, fetchOptions));\n\n    return this.cacheStore.get(url)?.content ?? '';\n  }\n\n  public set(url: string, data: StorageItem) {\n    this.cacheStore.set(url, data);\n  }\n\n  public isCached(url: string) {\n    return this.cacheStore.get(url)?.status === STATUS.LOADED;\n  }\n\n  private async fetchAndAddToInternalCache(url: string, fetchOptions?: RequestInit) {\n    const cache = this.cacheStore.get(url);\n\n    if (cache?.status === STATUS.LOADING) {\n      await this.handleLoading(url, async () => {\n        this.cacheStore.set(url, { content: '', status: STATUS.IDLE });\n        await this.fetchAndAddToInternalCache(url, fetchOptions);\n      });\n\n      return;\n    }\n\n    if (!cache?.content) {\n      this.cacheStore.set(url, { content: '', status: STATUS.LOADING });\n\n      try {\n        const content = await request(url, fetchOptions);\n\n        this.cacheStore.set(url, { content, status: STATUS.LOADED });\n      } catch (error: any) {\n        this.cacheStore.set(url, { content: '', status: STATUS.FAILED });\n        throw error;\n      }\n    }\n  }\n\n  private async fetchAndAddToPersistentCache(url: string, fetchOptions?: RequestInit) {\n    const cache = this.cacheStore.get(url);\n\n    if (cache?.status === STATUS.LOADED) {\n      return;\n    }\n\n    if (cache?.status === STATUS.LOADING) {\n      await this.handleLoading(url, async () => {\n        this.cacheStore.set(url, { content: '', status: STATUS.IDLE });\n        await this.fetchAndAddToPersistentCache(url, fetchOptions);\n      });\n\n      return;\n    }\n\n    this.cacheStore.set(url, { content: '', status: STATUS.LOADING });\n\n    const data = await this.cacheApi?.match(url);\n\n    if (data) {\n      const content = await data.text();\n\n      this.cacheStore.set(url, { content, status: STATUS.LOADED });\n\n      return;\n    }\n\n    try {\n      await this.cacheApi?.add(new Request(url, fetchOptions));\n\n      const response = await this.cacheApi?.match(url);\n      const content = (await response?.text()) ?? '';\n\n      this.cacheStore.set(url, { content, status: STATUS.LOADED });\n    } catch (error: any) {\n      this.cacheStore.set(url, { content: '', status: STATUS.FAILED });\n      throw error;\n    }\n  }\n\n  private async handleLoading(url: string, callback: () => Promise<void>) {\n    let retryCount = 0;\n\n    while (this.cacheStore.get(url)?.status === STATUS.LOADING && retryCount < CACHE_MAX_RETRIES) {\n      // eslint-disable-next-line no-await-in-loop\n      await sleep(0.1);\n      retryCount += 1;\n    }\n\n    if (retryCount >= CACHE_MAX_RETRIES) {\n      await callback();\n    }\n  }\n\n  public keys(): Array<string> {\n    return [...this.cacheStore.keys()];\n  }\n\n  public data(): Array<Record<string, StorageItem>> {\n    return [...this.cacheStore.entries()].map(([key, value]) => ({ [key]: value }));\n  }\n\n  public async delete(url: string) {\n    if (this.cacheApi) {\n      await this.cacheApi.delete(url);\n    }\n\n    this.cacheStore.delete(url);\n  }\n\n  public async clear() {\n    if (this.cacheApi) {\n      const keys = await this.cacheApi.keys();\n\n      for (const key of keys) {\n        // eslint-disable-next-line no-await-in-loop\n        await this.cacheApi.delete(key);\n      }\n    }\n\n    this.cacheStore.clear();\n  }\n}\n","import React, {\n  cloneElement,\n  isValidElement,\n  ReactElement,\n  useCallback,\n  useEffect,\n  useReducer,\n  useRef,\n  useState,\n} from 'react';\nimport convert from 'react-from-dom';\n\nimport { STATUS } from './config';\nimport CacheStore from './modules/cache';\nimport { canUseDOM, isSupportedEnvironment, omit, randomString, request } from './modules/helpers';\nimport { usePrevious } from './modules/hooks';\nimport { getNode } from './modules/utils';\nimport { FetchError, Props, State, Status } from './types';\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let cacheStore: CacheStore;\n\nfunction ReactInlineSVG(props: Props) {\n  const {\n    cacheRequests = true,\n    children = null,\n    description,\n    fetchOptions,\n    innerRef,\n    loader = null,\n    onError,\n    onLoad,\n    src,\n    title,\n    uniqueHash,\n  } = props;\n  const [state, setState] = useReducer(\n    (previousState: State, nextState: Partial<State>) => ({\n      ...previousState,\n      ...nextState,\n    }),\n    {\n      content: '',\n      element: null,\n\n      isCached: cacheRequests && cacheStore.isCached(props.src),\n      status: STATUS.IDLE,\n    },\n  );\n  const { content, element, isCached, status } = state;\n  const previousProps = usePrevious(props);\n  const previousState = usePrevious(state);\n\n  const hash = useRef(uniqueHash ?? randomString(8));\n  const isActive = useRef(false);\n  const isInitialized = useRef(false);\n\n  const handleError = useCallback(\n    (error: Error | FetchError) => {\n      if (isActive.current) {\n        setState({\n          status:\n            error.message === 'Browser does not support SVG' ? STATUS.UNSUPPORTED : STATUS.FAILED,\n        });\n\n        onError?.(error);\n      }\n    },\n    [onError],\n  );\n\n  const handleLoad = useCallback((loadedContent: string, hasCache = false) => {\n    if (isActive.current) {\n      setState({\n        content: loadedContent,\n        isCached: hasCache,\n        status: STATUS.LOADED,\n      });\n    }\n  }, []);\n\n  const fetchContent = useCallback(async () => {\n    const responseContent: string = await request(src, fetchOptions);\n\n    handleLoad(responseContent);\n  }, [fetchOptions, handleLoad, src]);\n\n  const getElement = useCallback(() => {\n    try {\n      const node = getNode({ ...props, handleError, hash: hash.current, content }) as Node;\n      const convertedElement = convert(node);\n\n      if (!convertedElement || !isValidElement(convertedElement)) {\n        throw new Error('Could not convert the src to a React element');\n      }\n\n      setState({\n        element: convertedElement,\n        status: STATUS.READY,\n      });\n    } catch (error: any) {\n      handleError(new Error(error.message));\n    }\n  }, [content, handleError, props]);\n\n  const getContent = useCallback(async () => {\n    const dataURI = /^data:image\\/svg[^,]*?(;base64)?,(.*)/u.exec(src);\n    let inlineSrc;\n\n    if (dataURI) {\n      inlineSrc = dataURI[1] ? window.atob(dataURI[2]) : decodeURIComponent(dataURI[2]);\n    } else if (src.includes('<svg')) {\n      inlineSrc = src;\n    }\n\n    if (inlineSrc) {\n      handleLoad(inlineSrc);\n\n      return;\n    }\n\n    try {\n      if (cacheRequests) {\n        const cachedContent = await cacheStore.get(src, fetchOptions);\n\n        handleLoad(cachedContent, true);\n      } else {\n        await fetchContent();\n      }\n    } catch (error: any) {\n      handleError(error);\n    }\n  }, [cacheRequests, fetchContent, fetchOptions, handleError, handleLoad, src]);\n\n  const load = useCallback(async () => {\n    if (isActive.current) {\n      setState({\n        content: '',\n        element: null,\n        isCached: false,\n        status: STATUS.LOADING,\n      });\n    }\n  }, []);\n\n  // Run on mount\n  useEffect(\n    () => {\n      isActive.current = true;\n\n      if (!canUseDOM() || isInitialized.current) {\n        return () => undefined;\n      }\n\n      try {\n        if (status === STATUS.IDLE) {\n          if (!isSupportedEnvironment()) {\n            throw new Error('Browser does not support SVG');\n          }\n\n          if (!src) {\n            throw new Error('Missing src');\n          }\n\n          load();\n        }\n      } catch (error: any) {\n        handleError(error);\n      }\n\n      isInitialized.current = true;\n\n      return () => {\n        isActive.current = false;\n      };\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [],\n  );\n\n  // Handle prop changes\n  useEffect(() => {\n    if (!canUseDOM()) {\n      return;\n    }\n\n    if (!previousProps) {\n      return;\n    }\n\n    if (previousProps.src !== src) {\n      if (!src) {\n        handleError(new Error('Missing src'));\n\n        return;\n      }\n\n      load();\n    } else if (previousProps.title !== title || previousProps.description !== description) {\n      getElement();\n    }\n  }, [description, getElement, handleError, load, previousProps, src, title]);\n\n  // handle state\n  useEffect(() => {\n    if (!previousState) {\n      return;\n    }\n\n    if (previousState.status !== STATUS.LOADING && status === STATUS.LOADING) {\n      getContent();\n    }\n\n    if (previousState.status !== STATUS.LOADED && status === STATUS.LOADED) {\n      getElement();\n    }\n\n    if (previousState.status !== STATUS.READY && status === STATUS.READY) {\n      onLoad?.(src, isCached);\n    }\n  }, [getContent, getElement, isCached, onLoad, previousState, src, status]);\n\n  const elementProps = omit(\n    props,\n    'baseURL',\n    'cacheRequests',\n    'children',\n    'description',\n    'fetchOptions',\n    'innerRef',\n    'loader',\n    'onError',\n    'onLoad',\n    'preProcessor',\n    'src',\n    'title',\n    'uniqueHash',\n    'uniquifyIDs',\n  );\n\n  if (!canUseDOM()) {\n    return loader;\n  }\n\n  if (element) {\n    return cloneElement(element as ReactElement, { ref: innerRef, ...elementProps });\n  }\n\n  if (([STATUS.UNSUPPORTED, STATUS.FAILED] as Status[]).includes(status)) {\n    return children;\n  }\n\n  return loader;\n}\n\nexport default function InlineSVG(props: Props) {\n  if (!cacheStore) {\n    cacheStore = new CacheStore();\n  }\n\n  const { loader } = props;\n  const hasCallback = useRef(false);\n  const [isReady, setReady] = useState(cacheStore.isReady);\n\n  useEffect(() => {\n    if (!hasCallback.current) {\n      cacheStore.onReady(() => {\n        setReady(true);\n      });\n\n      hasCallback.current = true;\n    }\n  }, []);\n\n  if (!isReady) {\n    return loader;\n  }\n\n  return <ReactInlineSVG {...props} />;\n}\n\nexport * from './types';\n","import { useEffect, useRef } from 'react';\n\nexport function usePrevious<T>(state: T): T | undefined {\n  const ref = useRef<T>();\n\n  useEffect(() => {\n    ref.current = state;\n  });\n\n  return ref.current;\n}\n","import convert from 'react-from-dom';\n\nimport { Props, State } from '../types';\n\ninterface GetNodeOptions extends Props, Pick<State, 'content'> {\n  handleError: (error: Error) => void;\n  hash: string;\n}\n\ninterface UpdateSVGAttributesOptions extends Pick<Props, 'baseURL' | 'uniquifyIDs'> {\n  hash: string;\n}\n\nexport function getNode(options: GetNodeOptions) {\n  const {\n    baseURL,\n    content,\n    description,\n    handleError,\n    hash,\n    preProcessor,\n    title,\n    uniquifyIDs = false,\n  } = options;\n\n  try {\n    const svgText = processSVG(content, preProcessor);\n    const node = convert(svgText, { nodeOnly: true });\n\n    if (!node || !(node instanceof SVGSVGElement)) {\n      throw new Error('Could not convert the src to a DOM Node');\n    }\n\n    const svg = updateSVGAttributes(node, { baseURL, hash, uniquifyIDs });\n\n    if (description) {\n      const originalDesc = svg.querySelector('desc');\n\n      if (originalDesc?.parentNode) {\n        originalDesc.parentNode.removeChild(originalDesc);\n      }\n\n      const descElement = document.createElementNS('http://www.w3.org/2000/svg', 'desc');\n\n      descElement.innerHTML = description;\n      svg.prepend(descElement);\n    }\n\n    if (typeof title !== 'undefined') {\n      const originalTitle = svg.querySelector('title');\n\n      if (originalTitle?.parentNode) {\n        originalTitle.parentNode.removeChild(originalTitle);\n      }\n\n      if (title) {\n        const titleElement = document.createElementNS('http://www.w3.org/2000/svg', 'title');\n\n        titleElement.innerHTML = title;\n        svg.prepend(titleElement);\n      }\n    }\n\n    return svg;\n  } catch (error: any) {\n    return handleError(error);\n  }\n}\n\nexport function processSVG(content: string, preProcessor?: Props['preProcessor']) {\n  if (preProcessor) {\n    return preProcessor(content);\n  }\n\n  return content;\n}\n\nexport function updateSVGAttributes(\n  node: SVGSVGElement,\n  options: UpdateSVGAttributesOptions,\n): SVGSVGElement {\n  const { baseURL = '', hash, uniquifyIDs } = options;\n  const replaceableAttributes = ['id', 'href', 'xlink:href', 'xlink:role', 'xlink:arcrole'];\n  const linkAttributes = ['href', 'xlink:href'];\n  const isDataValue = (name: string, value: string) =>\n    linkAttributes.includes(name) && (value ? !value.includes('#') : false);\n\n  if (!uniquifyIDs) {\n    return node;\n  }\n\n  [...node.children].forEach(d => {\n    if (d.attributes?.length) {\n      const attributes = Object.values(d.attributes).map(a => {\n        const attribute = a;\n        const match = /url\\((.*?)\\)/.exec(a.value);\n\n        if (match?.[1]) {\n          attribute.value = a.value.replace(match[0], `url(${baseURL}${match[1]}__${hash})`);\n        }\n\n        return attribute;\n      });\n\n      replaceableAttributes.forEach(r => {\n        const attribute = attributes.find(a => a.name === r);\n\n        if (attribute && !isDataValue(r, attribute.value)) {\n          attribute.value = `${attribute.value}__${hash}`;\n        }\n      });\n    }\n\n    if (d.children.length) {\n      return updateSVGAttributes(d as SVGSVGElement, options);\n    }\n\n    return d;\n  });\n\n  return node;\n}\n"],"names":["createTheme","useTheme","theme","useThemeSystem","defaultTheme","THEME_ID","systemDefaultTheme","arguments","length","undefined","useThemeWithoutDefault","module","exports","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPrimitive","Symbol","toPrimitive","i","call","TypeError","String","Number","_toPropertyKey","_typeof","iterator","constructor","prototype","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","configurable","writable","key","_createClass","protoProps","staticProps","obj","value","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","from","minLen","n","toString","slice","name","test","len","arr2","IS_BROWSER","window","document","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","NAMESPACE","ACTION_ALL","ACTION_CROP","ACTION_MOVE","ACTION_ZOOM","ACTION_EAST","ACTION_WEST","ACTION_SOUTH","ACTION_NORTH","ACTION_NORTH_EAST","ACTION_NORTH_WEST","ACTION_SOUTH_EAST","ACTION_SOUTH_WEST","CLASS_CROP","concat","CLASS_DISABLED","CLASS_HIDDEN","CLASS_HIDE","CLASS_INVISIBLE","CLASS_MODAL","CLASS_MOVE","DATA_ACTION","DATA_PREVIEW","DRAG_MODE_CROP","DRAG_MODE_MOVE","DRAG_MODE_NONE","EVENT_CROP","EVENT_CROP_END","EVENT_CROP_MOVE","EVENT_CROP_START","EVENT_DBLCLICK","EVENT_TOUCH_START","EVENT_TOUCH_MOVE","EVENT_TOUCH_END","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_READY","EVENT_RESIZE","EVENT_WHEEL","EVENT_ZOOM","MIME_TYPE_JPEG","REGEXP_ACTIONS","REGEXP_DATA_URL","REGEXP_DATA_URL_JPEG","REGEXP_TAG_NAME","MIN_CONTAINER_WIDTH","MIN_CONTAINER_HEIGHT","DEFAULTS","viewMode","dragMode","initialAspectRatio","NaN","aspectRatio","data","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","center","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRatio","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","minContainerWidth","minContainerHeight","ready","cropstart","cropmove","cropend","crop","zoom","TEMPLATE","isNaN","isNumber","isPositiveNumber","Infinity","isUndefined","isObject","hasOwnProperty","isPlainObject","_constructor","error","isFunction","toArray","callback","assign","_len","args","_key","arg","REGEXP_DECIMALS","normalizeDecimalNumber","times","Math","round","REGEXP_SUFFIX","setStyle","element","styles","style","property","hasClass","classList","contains","className","indexOf","addClass","elem","add","trim","removeClass","remove","replace","toggleClass","added","REGEXP_CAMEL_CASE","toParamCase","toLowerCase","getData","dataset","getAttribute","setData","setAttribute","removeData","removeAttribute","REGEXP_SPACES","onceSupported","supported","once","listener","options","get","set","addEventListener","removeEventListener","removeListener","type","handler","split","event","listeners","addListener","_handler","_element$listeners","_len2","_key2","dispatchEvent","Event","CustomEvent","detail","bubbles","cancelable","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","clientLeft","top","pageYOffset","clientTop","location","REGEXP_ORIGINS","isCrossOriginURL","url","parts","match","protocol","hostname","port","addTimestamp","timestamp","Date","getTime","getTransforms","_ref","rotate","scaleX","scaleY","translateX","translateY","values","transform","join","WebkitTransform","msTransform","getMaxZoomRatio","pointers","pointers2","maxRatio","pointer","pointerId","pointer2","x1","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","ratio","getPointer","_ref2","endOnly","pageX","pageY","end","getPointersCenter","count","_ref3","getAdjustedSizes","_ref4","height","width","isValidWidth","isValidHeight","adjustedWidth","getRotatedSizes","_ref5","degree","arc","PI","sinArc","sin","cosArc","cos","newWidth","newHeight","getSourceCanvas","image","_ref6","_ref7","_ref8","imageAspectRatio","imageNaturalWidth","naturalWidth","imageNaturalHeight","naturalHeight","_ref6$rotate","_ref6$scaleX","_ref6$scaleY","_ref8$fillColor","fillColor","_ref8$imageSmoothingE","imageSmoothingEnabled","_ref8$imageSmoothingQ","imageSmoothingQuality","_ref8$maxWidth","maxWidth","_ref8$maxHeight","maxHeight","_ref8$minWidth","minWidth","_ref8$minHeight","minHeight","canvas","createElement","context","getContext","maxSizes","minSizes","min","max","destMaxSizes","destMinSizes","destWidth","destHeight","params","fillStyle","fillRect","save","translate","scale","drawImage","map","param","floor","fromCharCode","getStringFromCharCode","dataView","start","str","getUint8","REGEXP_DATA_URL_HEAD","dataURLToArrayBuffer","dataURL","base64","binary","atob","arrayBuffer","ArrayBuffer","uint8","Uint8Array","charCodeAt","arrayBufferToDataURL","mimeType","chunks","chunkSize","subarray","btoa","resetAndGetOrientation","orientation","DataView","littleEndian","app1Start","ifdStart","byteLength","offset","tiffOffset","endianness","getUint16","firstIFDOffset","getUint32","_offset","_length","setUint16","parseOrientation","render","this","initContainer","initCanvas","initCropBox","renderCanvas","cropped","renderCropBox","container","cropper","containerData","offsetWidth","offsetHeight","imageData","rotated","canvasWidth","canvasHeight","canvasData","limited","limitCanvas","oldLeft","oldTop","initialCanvasData","sizeLimited","positionLimited","cropBoxData","_getAdjustedSizes","newCanvasLeft","newCanvasTop","minLeft","minTop","maxLeft","maxTop","changed","transformed","_getRotatedSizes","renderImage","limitCropBox","output","initialCropBoxData","maxCropBoxWidth","maxCropBoxHeight","face","cropBox","disabled","initPreview","crossOrigin","crossOriginUrl","alt","src","viewBox","appendChild","viewBoxImage","previews","ownerDocument","querySelectorAll","querySelector","el","img","html","innerHTML","cssText","resetPreview","cropBoxWidth","cropBoxHeight","originalWidth","originalHeight","getElementsByTagName","events","bind","onCropStart","cropStart","onWheel","wheel","passive","capture","onDblclick","dblclick","onCropMove","cropMove","onCropEnd","cropEnd","onResize","resize","unbind","handlers","ratioX","ratioY","getCanvasData","getCropBoxData","setCanvasData","setCropBoxData","setDragMode","dragBox","_this","delta","preventDefault","wheeling","setTimeout","deltaY","wheelDelta","buttons","button","pointerType","ctrlKey","action","changedTouches","touch","identifier","originalEvent","cropping","change","right","bottom","renderable","shiftKey","range","x","y","check","side","move","p","methods","reset","initialImageData","clear","hasSameSize","isImg","replaced","uncreate","load","enable","disable","destroy","originalUrl","offsetX","offsetY","_this$canvasData","moveTo","_originalEvent","zoomTo","pivot","oldRatio","rotateTo","_scaleX","_scaleY","rounded","getContainerData","getImageData","sized","widthChanged","heightChanged","getCroppedCanvas","HTMLCanvasElement","source","_this$getData","initialX","initialY","initialWidth","initialHeight","_options$imageSmoothi","srcWidth","srcHeight","dstX","dstY","dstWidth","dstHeight","sourceWidth","sourceHeight","srcX","srcY","setAspectRatio","mode","croppable","AnotherCropper","Cropper","tagName","Error","reloading","sizing","init","toDataURL","read","clone","xhr","XMLHttpRequest","onabort","onerror","ontimeout","onprogress","getResponseHeader","abort","onload","response","onloadend","open","responseType","withCredentials","send","_parseOrientation","stop","parentNode","insertBefore","nextSibling","_this2","isIOSWebKit","navigator","userAgent","done","build","sizingImage","body","removeChild","template","getElementsByClassName","unbuild","factory","a","propertyIsEnumerable","c","opacity","l","s","u","d","v","f","m","g","b","h","O","T","z","C","w","onInitialized","j","M","E","current","currentTarget","R","reduce","ref","_classPrivateFieldBase","id","_classPrivateFieldKey","getObjectViewResultToArray","doc","rows","item","val","normalizeHostId","host","startsWith","objectIdToHostname","substring","wait","ms","Promise","resolve","pattern2RegEx","pattern","startsWithWildcard","endsWithWildcard","PROGRESS","ERRORS","PERMISSION_ERROR","ADAPTERS","NOT_CONNECTED","Connection","applyDefaultProps","waitForSocketLib","then","startSocket","catch","alert","ioTimeout","cmdTimeout","admin5only","autoSubscribes","autoSubscribeLog","doNotLoadACL","doNotLoadAllObjects","ignoreState","connected","subscribed","firstConnect","waitForRestart","loaded","simStates","statesSubscribes","filesSubscribes","objectsSubscribes","objects","states","acl","isSecure","onReadyDone","onConnectionHandlers","onLogHandlers","onCmdStdoutHandler","onCmdStderrHandler","onCmdExitHandler","onError","console","_socket","_waitForSocketPromise","_waitForFirstConnectionPromise","res","rej","promise","reject","createDeferredPromise","_instanceSubscriptions","_promises","_authTimer","_systemConfig","systemConfig","systemLang","isWeb","socketUrl","async","io","iob","registerSocketOnLoad","path","pathname","parsed","URL","pos","lastIndexOf","pop","includes","endsWith","connect","query","timeout","uuid","token","on","noTimeout","getVersion","info","major","minor","patch","version","parseInt","onPreConnect","emit","isOk","message","operation","onProgress","READY","reload","_subscribe","cb","CONNECTING","authenticate","onLog","err","_err","JSON","stringify","objectChange","state","stateChange","messageType","instanceMessage","fileName","size","fileChange","text","exitCode","_isOk","clearTimeout","loadData","isCloud","isConnected","waitForFirstConnection","getUserPermissions","request","commandTimeout","executor","doLoadData","vendorPrefix","getSystemConfig","getCompactSystemConfig","common","language","userLanguage","onLanguage","CONNECTED","getObjects","onReady","search","href","hash","subscribeState","ids","toSubscribe","_id","cbs","reg","RegExp","getBinaryState","find","getForeignStates","entries","mayBePromise","getStates","subscribeStateAsync","unsubscribeState","toUnsubscribe","sub","splice","subscribeObject","unsubscribeObject","oldObj","_rev","onObjectChange","sourceInstance","regId","regFilePattern","subscribeFiles","filePattern","filePatterns","unsubscribeFiles","cacheKey","forceUpdate","onTimeout","requireAdmin","requireFeatures","NOT_ADMIN","feature","checkFeatureSupported","NOT_SUPPORTED","timeoutControl","elapsed","TIMEOUT","resetCache","isAll","k","getState","ack","setBinaryState","setState","ts","now","lc","update","disableProgressUpdate","OBJECTS_LOADED","getObjectsById","list","isEnable","requireLog","isEnabled","delObject","maintenance","delObjects","setObject","parse","user","getObject","sendTo","command","result","extendObject","registerLogHandler","unregisterLogHandler","registerConnectionHandler","unregisterConnectionHandler","registerCmdStdoutHandler","unregisterCmdStdoutHandler","registerCmdStderrHandler","unregisterCmdStderrHandler","registerCmdExitHandler","unregisterCmdExitHandler","getEnums","_enum","startkey","endkey","_res","getObjectView","getObjectViewCustom","getObjectViewSystem","design","readMetaItems","objs","readDir","namespace","files","readFile","file","writeFile64","byte","deleteFile","deleteFolder","folderName","rename","oldName","newName","renameFile","cmdExec","cmd","cmdId","native","getForeignObjects","setSystemConfig","getRawSocket","getHistory","getHistoryEx","stepIgnore","sessionId","getIpAddresses","address","serverName","getWebServerName","fileExists","adapter","filename","exists","getCurrentUser","_isSecure","getUuid","features","getAdapterInstances","startKey","endKey","instances","instanceObjects","getAdapters","adapters","adapterObjects","getGroups","logout","subscribeOnInstance","targetInstance","subscribeResult","subscription","unsubscribeFromInstance","deleted","promiseResults","index","findIndex","_messageType","wasSubscribed","all","results","log","level","setStateToIgnore","AdminConnection","super","getCertificates","certificates","cert","parseCertificate","getLogs","linesNumber","lines","upgradeAdapterWithWebserver","upgradeController","adminInstance","_result","updateLicenses","login","password","licenses","upgradeOsPackages","packages","restart","getLogsFiles","delLogs","getHosts","getUsers","renameGroup","newId","groups","subGroups","group","oldGroupId","newGroupId","parentGroup","getHostInfo","timeoutMs","getHostInfoShort","getRepository","getInstalled","readBaseSettings","writeBaseSettings","config","restartController","getDiagData","typeOfDiag","_reject","changePassword","getHostByIp","ipOrHostName","ip","IPs4","IPs6","family","hardware","networkInterfaces","eth","iface","parseIPAddresses","encrypt","plaintext","ciphertext","decrypt","chmodFile","processed","chownFile","getNotifications","category","notifications","clearNotifications","getIsEasyModeStrict","isStrict","getEasyMode","getRatings","ratings","getCurrentSession","controller","AbortController","fetch","signal","json","getCurrentInstance","adapterStr","getCompactAdapters","getAdaptersResetCache","getCompactInstances","getAdapterInstancesResetCache","getCompactInstalled","getInstalledResetCache","getCompactRepository","getRepositoryResetCache","getCompactHosts","compactHostsInfo","getCompactSystemRepositories","systemRepositories","defaultView","self","touches","onMove","onKey","_","nativeEvent","focus","which","keyCode","H","onTouchStart","onMouseDown","onKeyDown","tabIndex","role","Boolean","color","backgroundColor","pow","L","K","I","q","D","S","hue","onChange","hsva","F","X","Y","toHsva","equal","fromHsva","V","J","Map","Q","has","__webpack_nonce__","head","U","colorModel","defaultColor","W","Z","styleToObject","input","acc","nextKey","_$0","$1","$2","toUpperCase","nextValue","noTextChildNodes","possibleStandardNames","acceptcharset","accesskey","allowfullscreen","autocapitalize","autocomplete","autocorrect","autofocus","autoplay","autosave","cellpadding","cellspacing","charset","class","classid","classname","colspan","contenteditable","contextmenu","controlslist","crossorigin","dangerouslysetinnerhtml","datetime","defaultchecked","defaultvalue","enctype","for","formmethod","formaction","formenctype","formnovalidate","formtarget","frameborder","hreflang","htmlfor","httpequiv","icon","innerhtml","inputmode","itemid","itemprop","itemref","itemscope","itemtype","keyparams","keytype","marginwidth","marginheight","maxlength","mediagroup","minlength","nomodule","novalidate","playsinline","radiogroup","readonly","referrerpolicy","rowspan","spellcheck","srcdoc","srclang","srcset","tabindex","typemustmatch","usemap","accentheight","alignmentbaseline","allowreorder","arabicform","attributename","attributetype","autoreverse","basefrequency","baselineshift","baseprofile","calcmode","capheight","clippath","clippathunits","cliprule","colorinterpolation","colorinterpolationfilters","colorprofile","colorrendering","contentscripttype","contentstyletype","diffuseconstant","dominantbaseline","edgemode","enablebackground","externalresourcesrequired","fillopacity","fillrule","filterres","filterunits","floodopacity","floodcolor","fontfamily","fontsize","fontsizeadjust","fontstretch","fontstyle","fontvariant","fontweight","glyphname","glyphorientationhorizontal","glyphorientationvertical","glyphref","gradienttransform","gradientunits","horizadvx","horizoriginx","imagerendering","kernelmatrix","kernelunitlength","keypoints","keysplines","keytimes","lengthadjust","letterspacing","lightingcolor","limitingconeangle","markerend","markerheight","markermid","markerstart","markerunits","markerwidth","maskcontentunits","maskunits","numoctaves","overlineposition","overlinethickness","paintorder","pathlength","patterncontentunits","patterntransform","patternunits","pointerevents","pointsatx","pointsaty","pointsatz","preservealpha","preserveaspectratio","primitiveunits","refx","refy","renderingintent","repeatcount","repeatdur","requiredextensions","requiredfeatures","shaperendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stopcolor","stopopacity","strikethroughposition","strikethroughthickness","strokedasharray","strokedashoffset","strokelinecap","strokelinejoin","strokemiterlimit","strokewidth","strokeopacity","suppresscontenteditablewarning","suppresshydrationwarning","surfacescale","systemlanguage","tablevalues","targetx","targety","textanchor","textdecoration","textlength","textrendering","underlineposition","underlinethickness","unicodebidi","unicoderange","unitsperem","unselectable","valphabetic","vectoreffect","vertadvy","vertoriginx","vertoriginy","vhanging","videographic","viewbox","viewtarget","vmathematical","wordspacing","writingmode","xchannelselector","xheight","xlinkactuate","xlinkarcrole","xlinkhref","xlinkrole","xlinkshow","xlinktitle","xlinktype","xmlbase","xmllang","xmlnsxlink","xmlspace","ychannelselector","zoomandpan","onblur","onchange","onclick","oncontextmenu","ondoubleclick","ondrag","ondragend","ondragenter","ondragexit","ondragleave","ondragover","ondragstart","ondrop","onfocus","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onsubmit","ontouchcancel","ontouchend","ontouchmove","ontouchstart","onwheel","getReactNode","node","rest","nodeType","React","nodeName","parseName","reactKey","attributes","Element","nodeClassNames","parseAttributes","parseChildren","childNodes","nodeText","nodeValue","allowWhiteSpaces","parentNodeName","warn","childNodeList","children","convertFromNode","Node","actions","randomKey","characters","random","randomString","condition","pre","post","convert","includeAllNodes","nodeOnly","selector","DOMParser","parseFromString","node2","convertFromString","CACHE_NAME","STATUS","IDLE","LOADING","LOADED","FAILED","UNSUPPORTED","canUseDOM","isSupportedEnvironment","div","svg","firstChild","namespaceURI","supportsInlineSVG","contentType","headers","fileType","status","some","sleep","seconds","cacheStore","CacheStore","__publicField","cacheName","usePersistentCache","REACT_INLINESVG_CACHE_NAME","REACT_INLINESVG_PERSISTENT_CACHE","caches","cache","cacheApi","finally","isReady","subscribers","fetchOptions","fetchAndAddToPersistentCache","fetchAndAddToInternalCache","content","isCached","handleLoading","Request","retryCount","delete","usePrevious","useRef","useEffect","getNode","baseURL","description","handleError","preProcessor","title","uniquifyIDs","svgText","processSVG","SVGSVGElement","updateSVGAttributes","originalDesc","descElement","createElementNS","prepend","originalTitle","titleElement","replaceableAttributes","linkAttributes","attribute","exec","isDataValue","ReactInlineSVG","cacheRequests","innerRef","loader","onLoad","uniqueHash","useReducer","previousState2","nextState","previousProps","previousState","useRef2","letters","character","isActive","isInitialized","useCallback","handleLoad","loadedContent","hasCache","fetchContent","responseContent","getElement","convertedElement","convert2","isValidElement","getContent","dataURI","inlineSrc","decodeURIComponent","cachedContent","useEffect2","elementProps","omit","cloneElement","InlineSVG","hasCallback","setReady","useState"],"sourceRoot":""}