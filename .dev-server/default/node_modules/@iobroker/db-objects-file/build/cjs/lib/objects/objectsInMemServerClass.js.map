{
  "version": 3,
  "sources": ["../../../../src/lib/objects/objectsInMemServerClass.js"],
  "sourcesContent": ["/**\n *      States DB in memory - Server with Redis protocol\n *\n *      Copyright 2013-2024 bluefox <dogafox@gmail.com>\n *\n *      MIT License\n *\n */\n\nimport { Client as ObjectsInRedisClient } from '@iobroker/db-objects-redis';\nimport { ObjectsInMemoryServer } from './objectsInMemServerRedis.js';\n\nexport class ObjectsInMemoryServerClass extends ObjectsInRedisClient {\n    constructor(settings) {\n        settings.autoConnect = false; // delay Client connection to when we need it\n        super(settings);\n\n        const serverSettings = {\n            namespace: settings.namespace ? `${settings.namespace}-Server` : 'Server',\n            connection: settings.connection,\n            logger: settings.logger,\n            hostname: settings.hostname,\n            connected: () => {\n                this.connectDb(); // now that server is connected also connect client\n            },\n        };\n        this.objectsServer = new ObjectsInMemoryServer(serverSettings);\n    }\n\n    async destroy() {\n        await super.destroy(); // destroy client first\n        await this.objectsServer.destroy(); // server afterwards too\n    }\n\n    getStatus() {\n        return this.objectsServer.getStatus(); // return Status as Server\n    }\n\n    syncFileDirectory(limitId) {\n        return this.objectsServer.syncFileDirectory(limitId);\n    }\n\n    dirExists(id, name) {\n        return this.objectsServer.dirExists(id, name);\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;;;;;AASA,8BAA+C;AAC/C,qCAAsC;AAEhC,MAAO,mCAAmC,wBAAAA,OAAoB;EAChE,YAAY,UAAQ;AAChB,aAAS,cAAc;AACvB,UAAM,QAAQ;AAEd,UAAM,iBAAiB;MACnB,WAAW,SAAS,YAAY,GAAG,SAAS,SAAS,YAAY;MACjE,YAAY,SAAS;MACrB,QAAQ,SAAS;MACjB,UAAU,SAAS;MACnB,WAAW,MAAK;AACZ,aAAK,UAAS;MAClB;;AAEJ,SAAK,gBAAgB,IAAI,qDAAsB,cAAc;EACjE;EAEA,MAAM,UAAO;AACT,UAAM,MAAM,QAAO;AACnB,UAAM,KAAK,cAAc,QAAO;EACpC;EAEA,YAAS;AACL,WAAO,KAAK,cAAc,UAAS;EACvC;EAEA,kBAAkB,SAAO;AACrB,WAAO,KAAK,cAAc,kBAAkB,OAAO;EACvD;EAEA,UAAU,IAAI,MAAI;AACd,WAAO,KAAK,cAAc,UAAU,IAAI,IAAI;EAChD;;",
  "names": ["ObjectsInRedisClient"]
}
